(function(){(this||window).webpackJsonp.registerAbsMids({"esri/renderers/support/utils":830,"esri/renderers/visualVariables/support/ColorStop":839,"esri/renderers/support/numberUtils":840,"esri/layers/support/commonProperties":841,"esri/layers/mixins/OperationalLayer":859,"esri/layers/mixins/PortalLayer":862,"esri/symbols/support/ElevationInfo":895,"esri/symbols/support/FeatureExpressionInfo":897,"esri/symbols/support/unitConversionUtils":898,"esri/layers/mixins/ScaleRangeLayer":901,"esri/layers/mixins/RefreshableLayer":1002,"esri/geometry/projection":1031,"esri/geometry/pe":1037,"esri/geometry/support/GeographicTransformation":1038,"esri/geometry/support/GeographicTransformationStep":1039,"esri/support/popupUtils":1065,"esri/core/MemCache":1066,"esri/layers/support/TilemapCache":1081,"esri/core/LRUCache":1095,"esri/layers/support/Tilemap":1096,"esri/layers/support/RasterFunction":1109,"esri/layers/support/DimensionalDefinition":1166,"esri/layers/support/imageryRendererUtils":1167,"esri/layers/support/rasterFunctions/rasterProjectionHelper":1197,"esri/layers/support/RasterJobHandler":1200,"esri/layers/TileImageryLayer":1240,"esri/layers/support/RasterStorageInfo":1241,"esri/layers/support/rasterDatasets/BaseRaster":1242,"esri/layers/support/rasterDatasets/RawBlockCache":1297,"esri/layers/support/rasterDatasets/RasterFactory":1867,"esri/layers/support/rasterDatasets/CloudRaster":1869,"esri/layers/support/rasterDatasets/DBFParser":1870,"esri/layers/support/rasterDatasets/ImageServerRaster":1871,"esri/layers/support/rasterDatasets/MRFRaster":1872,"esri/layers/support/rasterDatasets/xmlUtilities":1873,"esri/layers/support/rasterDatasets/TIFFRaster":1874})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[62,31,89,90,91,92,93,94],{1002:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(2)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshableLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r(t,e),t.prototype.refresh=function(){this.emit("refresh")},n([i.property({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),n([i.subclass("esri.layers.mixins.RefreshableLayer")],t)}(i.declared(e))}}.apply(null,n))||(e.exports=i)},1031:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(6),r(1037),r(28),r(1038)],void 0===(i=function(e,t,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=null;t.isLoaded=function(){return!!s&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var l=null;t.load=function(){return l||(l=n.create((function(e,t){var n=i.load();r.e(10).then((function(){var o=[r(1058)];(function(r){s=r,n.then((function(){s._enableProjection(i),e()}),(function(e){t(e)}))}).apply(null,o)})).catch(r.oe)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:p(e,e[0].spatialReference,t,r):p([e],e.spatialReference,t,r)[0]};var u={};function p(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var l=a.cacheKey(t,r);void 0!==u[l]?n=u[l]:(null===(n=c(t,r,null))&&(n=new a),u[l]=n)}return s._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function c(e,t,r){void 0===r&&(r=null);var n=s._getTransformation(e,t,r);return null!==n?a.fromGE(n):null}t.projectMany=p,t.getTransformation=c,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=s._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,l=n;o<l.length;o++){var u=l[o];i.push(a.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},1037:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(14),r(13),r(6)],void 0===(i=function(e,t,n,i,o){var a,s,l,u,p,c;function f(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,s.init(),l.init(),u.init(),p.init(),c.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(s.PE_NAME_MAX))}}));for(var a=0,f=[t._pe.PeGeogtran,t._pe.PeProjcs];a<f.length;a++)r(f[a].prototype,"getParameters",(function(e){return function(){for(var r=new Array(s.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return m(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var d=t._pe._pe_getPeHorizonSize(),h=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+d*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",h),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",h),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=s.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(s.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function d(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function h(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function y(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function m(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return a||(a=o.create((function(t,n){Promise.all([r.e(55),r.e(107)]).then((function(){var i=[r(1086)];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then((function(e){f(e),t()}))}).apply(null,i)})).catch(r.oe)})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=y(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&m(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=y(n),a=n===o,s=t._pe.ensureFloat64(o),l=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return l&&m(n,r,s,a),l}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case s.PE_TRANSFORM_P_TO_G:return n(e,t,i);case s.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(s=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,a=r[e];if(a||(a={},r[e]=a),a.hasOwnProperty(String(n)))i=a[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(i=s,a[n]=i)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case s.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case s.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case s.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&s.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(s.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,a[r]=i)}return o(i)},e.geogcs=function(e){return i(s.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(s.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(s.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(s.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var l=null,u=new t._pe.PeInteger(s);try{var p=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,u);if((s=u.val)&&(l=[p],s>1))for(var c=t._pe.getPointer(p),f=1;f<s;f++)l.push(t._pe.wrapPointer(c+r*f,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(u)}return l}}(l=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];d(i),i.getEntries().forEach((function(e){d(e);var t=e.getGeogtran();d(t),t.getParameters().forEach(d),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){d(e);var t=e.getDatum();d(t),d(t.getSpheroid()),d(e.getPrimem()),d(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=y(n),s=n===a,l=t._pe.ensureFloat64(a),u=0;i&&(u=t._pe.ensureFloat64(i));var p=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,l,u,o);return p&&m(n,r,l,s),p}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,a){var l,u;switch(t._pe.ensureCache.prepare(),e){case"dd":l=t._pe._pe_geog_to_dd,u=s.PE_DD_MAX;break;case"ddm":l=t._pe._pe_geog_to_ddm,u=s.PE_DDM_MAX;break;case"dms":l=t._pe._pe_geog_to_dms,u=s.PE_DMS_MAX}var p=0;r&&(p=t._pe.getPointer(r));var c=y(i),f=t._pe.ensureFloat64(c),d=h(n,u),m=l(p,n,f,o,t._pe.ensureInt32(d));if(m)for(var v=0;v<n;v++)a[v]=t._pe.UTF8ToString(d[v]);return m}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var l=i.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(l),p=t._pe.ensureFloat64(new Array(2*n)),c=a(s,n,u,p);return c&&m(o,n,p),c}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,l){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),f=h(r,s.PE_MGRS_MAX),d=t._pe.ensureInt32(f),m=t._pe._pe_geog_to_mgrs_extended(u,r,c,i,o,a,d);if(m)for(var v=0;v<r;v++)l[v]=t._pe.UTF8ToString(f[v]);return m},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_mgrs_to_geog_extended(a,r,l,i,u);return p&&m(o,r,u),p}}(u=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,l){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),f=h(r,s.PE_MGRS_MAX),d=t._pe.ensureInt32(f),m=t._pe._pe_geog_to_usng(u,r,c,i,o,a,d);if(m)for(var v=0;v<r;v++)l[v]=t._pe.UTF8ToString(f[v]);return m},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(a),l=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_usng_to_geog(o,r,s,l);return u&&m(i,r,l),u}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var l=y(n),u=t._pe.ensureFloat64(l),p=h(r,s.PE_UTM_MAX),c=t._pe.ensureInt32(p),f=t._pe._pe_geog_to_utm(a,r,u,i,c);if(f)for(var d=0;d<r;d++)o[d]=t._pe.UTF8ToString(p[d]);return f},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_utm_to_geog(a,r,l,i,u);return p&&m(o,r,u),p}}(p=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||(a=[],r.set(n,a)),a[i]=o),o}}(c=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=f}.apply(null,n))||(e.exports=i)},1038:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1039)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=a[o],l=r.fromGE(s);n.steps.push(l),i+=l.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=i)},1039:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},1065:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(254),r(140),r(271),r(165),r(268)],void 0===(i=function(e,t,r,n,i,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=["oid","global-id","guid"];function u(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function p(e,t){return e.editable&&-1===l.indexOf(e.type)&&!function(e,t){if(!e||!t)return!1;var r=t.creationDateField,n=t.creatorField,i=t.editDateField,o=t.editorField;return-1!==[r&&r.toLowerCase(),n&&n.toLowerCase(),i&&i.toLowerCase(),o&&o.toLowerCase()].indexOf(e.toLowerCase())}(e.name,t)}function c(e){switch(e.type){case"small-integer":case"integer":case"single":return new s({digitSeparator:!0,places:0});case"double":return new s({digitSeparator:!0,places:2});case"date":return new s({dateFormat:"long-month-day-year"});default:return null}}function f(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}t.createPopupTemplate=function(e,t){var s=e.displayField,l=e.fields,f=e.title,h=e.visibleFieldNames,y=e.editFieldsInfo;if(!l)return null;var m=function(e,t){var r=e;return t.ignoreFieldTypes&&(e=e.filter((function(e){return-1===t.ignoreFieldTypes.indexOf(e.type)}))),0===e.length?null:(e===r&&(e=e.slice()),e.sort(u),{fields:e})}(l,r({},d,t));if(!m)return null;var v=function(e){var t=i.getDisplayFieldName(e),r=e.titleBase;return t?r+": {"+t.trim()+"}":r}({titleBase:f,fields:m.fields,displayField:s}),g=[new o.FieldsContent,new o.AttachmentsContent],_=function(e){var t=e.visibleFieldNames,r=e.editFieldsInfo;return e.fields.map((function(e){return new a({fieldName:e.name,isEditable:p(e,r),label:e.alias,format:c(e),visible:!t||t.has(e.name)})}))}({fields:m.fields,visibleFieldNames:h,editFieldsInfo:y});return new n({title:v,content:g,fieldInfos:_})};var d={ignoreFieldTypes:["geometry","blob","raster","guid","xml"]}}.apply(null,n))||(e.exports=i)},1066:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(98),r(157),r(52)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_PRIORITY=-3;var o=function(){function e(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0}),e.prototype.resetHitRate=function(){this._hit=this._miss=0},e.prototype.destroy=function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)},e.prototype.put=function(e,t,r,n){void 0===n&&(n=0),this._storage.put(this._namespace+e,t,r,n)},e.prototype.get=function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t},e.prototype.pop=function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t},e.prototype.updateSize=function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)},e.prototype.clear=function(){this._storage.clear(this._namespace)},e.prototype.clearAll=function(){this._storage.clearAll()},e.prototype.getStats=function(){return this._storage.getStats()},e.prototype.resetStats=function(){this._storage.resetStats()},e}();t.MemCache=o;var a=function(){function e(e){void 0===e&&(e=10485760),this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new n}return e.prototype.register=function(e){this._users.push(e)},e.prototype.deregister=function(e){this._users.removeUnordered(e)},e.prototype.registerRemoveFunc=function(e,t){this._removeFuncs.push([e,t])},e.prototype.deregisterRemoveFunc=function(e){this._removeFuncs=this._removeFuncs.filter((function(t){return t[0]!==e}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,r,n,i){var o=this._db.get(e);if(o&&(this._size-=o.size,this._db.delete(e),o.entry!==r&&this._notifyRemoved(e,o.entry)),n>this._maxSize)this._notifyRemoved(e,r);else if(void 0!==r)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(i,t.MIN_PRIORITY)-t.MIN_PRIORITY;this._db.set(e,{entry:r,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")},e.prototype.updateSize=function(e,t,r){var n=this._db.get(e);n&&n.entry===t&&(this._size-=n.size,r>this._maxSize?this._notifyRemoved(e,t):(n.size=r,this._size+=r,this._checkSizeLimit()))},e.prototype.pop=function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss},e.prototype.get=function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss},e.prototype.getStats=function(){var e=this,r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},o=new Array;this._db.forEach((function(t,r){var a=t.lifetime;o[a]=(o[a]||0)+t.size,e._users.forEach((function(e){var o=e.namespace;if(i.startsWith(r,o)){var a=n[o]||0;n[o]=a+t.size}}))}));var a={};this._users.forEach((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var r=n[t]||0;n[t]=r,a[t]=Math.round(100*e.hitRate)+"%"}else a[t]="0%"}));var s=Object.keys(n);s.forEach((function(t){return n[t]=n[t]/e._size*100})),s.sort((function(e,t){return n[t]-n[e]})),s.forEach((function(e){return r[e]=Math.round(n[e])+"% / "+a[e]}));for(var l=o.length-1;l>=0;--l){var u=o[l];u&&(r["Priority "+(l+t.MIN_PRIORITY-1)]=Math.round(u/this.size*100)+"%")}return r},e.prototype.resetStats=function(){this._hit=this._miss=0,this._users.forEach((function(e){return e.resetHitRate()}))},e.prototype.clear=function(e){var t=this;this._db.forEach((function(r,n){i.startsWith(n,e)&&(t._size-=r.size,t._db.delete(n),t._notifyRemoved(n,r.entry))}))},e.prototype.clearAll=function(){var e=this;this._db.forEach((function(t,r){e._notifyRemoved(r,t.entry)})),this._size=0,this._db.clear()},e.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)},e.prototype._notifyRemoved=function(e,t){this._removeFuncs.forEach((function(r){i.startsWith(e,r[0])&&r[1](t)}))},e.prototype._checkSizeLimit=function(){var e=this;this._size<=this._maxSize||r.someMap(this._db,(function(t,r){return e._db.delete(r),t.lives<=1?(e._size-=t.size,e._notifyRemoved(r,t.entry)):(--t.lives,e._db.set(r,t)),e._size<=.9*e.maxSize}))},e}();t.MemCacheStorage=a}.apply(null,n))||(e.exports=i)},1081:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(1),r(0),r(10),r(11),r(76),r(7),r(9),r(20),r(5),r(1095),r(157),r(6),r(26),r(36),r(12),r(2),r(1096)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,m,v,g,_){Object.defineProperty(t,"__esModule",{value:!0}),t.TILEMAP_SIZE_EXP=5;var b=c.getLogger("esri.layers.support.TilemapCache"),w=function(e){function l(t){var r=e.call(this,t)||this;return r._handles=new p,r._pendingTilemapRequests={},r._availableLevels={},r.levels=5,r.cacheByteSize=2097152,r.request=s,r._prefetchingEnabled=!0,r}var c;return n(l,e),c=l,l.prototype.initialize=function(){var e=this;this._tilemapCache=new f(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),v.init(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()},l.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},l.prototype.castLevels=function(e){return e<=2?(b.error("Minimum levels for Tilemap is 3, but got ",e),3):e},Object.defineProperty(l.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0}),l.prototype.fetchTilemap=function(e,t,n,i){var o=this;if(!this._availableLevels[e])return h.reject(new u("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"));var a=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,n,a);if(s)return h.resolve(s);var l=i&&i.signal;return i=r({},i,{signal:null}),h.create((function(e,t){h.onAbort(l,(function(){return t(h.createAbortError())}));var r=_.tilemapDefinitionId(a),n=o._pendingTilemapRequests[r];if(!n){n=_.Tilemap.fromDefinition(a,i).then((function(e){return o._tilemapCache.put(r,e,e.byteSize),e}));var s=function(){return delete o._pendingTilemapRequests[r]};o._pendingTilemapRequests[r]=n,n.then(s,s)}n.then(e,t)}))},l.prototype.getAvailability=function(e,t,r){if(!this._availableLevels[e])return"unavailable";var n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"},l.prototype.getAvailabilityUpsample=function(e,t,r,n){n.level=e,n.row=t,n.col=r;var i=this.layer.tileInfo;for(i.updateTileInfo(n);;){var o=this.getAvailability(n.level,n.row,n.col);if("unavailable"!==o)return o;if(!i.upsampleTile(n))return"unavailable"}},l.prototype.fetchAvailability=function(e,t,r,n){return this._availableLevels[e]?this.fetchTilemap(e,t,r,n).catch((function(e){return e})).then((function(n){if(n instanceof _.Tilemap){var i=n.getAvailability(t,r);return"unavailable"===i?h.reject(new u("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):i}if(h.isAbortError(n))throw n;return"unknown"})):h.reject(new u("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"))},l.prototype.fetchAvailabilityUpsample=function(e,t,r,n,i){var o=this;n.level=e,n.row=t,n.col=r;var a=this.layer.tileInfo;a.updateTileInfo(n);var s=this.fetchAvailability(e,t,r,i).catch((function(e){if(h.isAbortError(e))throw e;if(a.upsampleTile(n))return o.fetchAvailabilityUpsample(n.level,n.row,n.col,n);throw e}));return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,i,s),s},l.prototype._fetchAvailabilityUpsamplePrefetch=function(e,t,n,i,s,l){return a(this,void 0,void 0,(function(){var a,u,p,f,d,m,v,g,_,b;return o(this,(function(o){switch(o.label){case 0:if(!this._prefetchingEnabled)return[2];if(a="prefetch-"+e,this._handles.has(a))return[2];u=h.createAbortController(),l.then((function(){return u.abort()}),(function(){return u.abort()})),p=!1,f={remove:function(){p||(p=!0,u.abort())}},this._handles.add(f,a),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,y.waitTicks(10,u.signal)];case 2:case 3:return o.sent(),[3,4];case 4:if(p||(p=!0,this._handles.remove(a)),h.isAborted(u))return[2];for(d={id:e,level:t,row:n,col:i},m=r({},s,{signal:u.signal}),v=this.layer.tileInfo,g=function(e){var t=_.fetchAvailability(d.level,d.row,d.col,m);c._prefetches.push(t);var r=function(){c._prefetches.removeUnordered(t)};t.then(r,r)},_=this,b=0;c._prefetches.length<c._maxPrefetch&&v.upsampleTile(d);++b)g();return[2]}}))}))},l.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?m.objectToQuery(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}},l.prototype._tilemapFromCache=function(e,t,r,n){var i=this._getTilemapDefinition(e,t,r,n),o=_.tilemapDefinitionId(i);return this._tilemapCache.get(o)},l.prototype._getTilemapDefinition=function(e,r,n,i){i.level=e;var o=e>t.TILEMAP_SIZE_EXP;return i.row=o?r-r%this.size:r,i.col=o?n-n%this.size:n,i},l.prototype._initializeAvailableLevels=function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))},Object.defineProperty(l.prototype,"test",{get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,r,n){return!!e._tilemapFromCache(t,r,n,e._tmpTilemapDefinition)}}},enumerable:!0,configurable:!0}),l._maxPrefetch=4,l._prefetches=new d({initialSize:c._maxPrefetch}),i([g.property({constructOnly:!0,type:Number})],l.prototype,"levels",void 0),i([g.cast("levels")],l.prototype,"castLevels",null),i([g.property({readOnly:!0,dependsOn:["levels"],type:Number})],l.prototype,"size",null),i([g.property({constructOnly:!0,type:Number})],l.prototype,"cacheByteSize",void 0),i([g.property({constructOnly:!0})],l.prototype,"layer",void 0),i([g.property({constructOnly:!0})],l.prototype,"request",void 0),c=i([g.subclass("esri.layers.support.TilemapCache")],l)}(g.declared(l));t.TilemapCache=w}.apply(null,n))||(e.exports=i)},1095:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1066)],void 0===(i=function(e,t,r){return function(){function e(e,t){this._storage=new r.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t,r){this._storage.put(e,t,r,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e},enumerable:!0,configurable:!0}),e}()}.apply(null,n))||(e.exports=i)},1096:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(76),r(25),r(9),r(3)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return e.prototype.getAvailability=function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var r=(e-this.location.top)*this.location.width+(t-this.location.left),n=r%8,i=r>>3,o=this._tileAvailabilityBitSet;return i<0||i>o.length?"unknown":o[i]&1<<n?"available":"unavailable"},e.prototype._updateFromData=function(e){for(var t=this.location.width,r=this.location.height,n=!0,i=!0,o=Math.ceil(t*r/8),a=new Uint8Array(o),s=0,l=0;l<e.length;l++){var u=l%8;e[l]?(i=!1,a[s]|=1<<u):n=!1,7===u&&++s}i?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)},e.fromDefinition=function(t,a){var s=t.service.request||n,u=t.row,p=t.col,c=t.width,f=t.height,d={query:{f:"json"}};return a=a?r({},d,a):d,s(l(t),a).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:u,left:p,width:c,height:f},valid:!0,data:i.constant(c*f,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==u||t.location.left!==p||t.location.width!==c||t.location.height!==f))throw new o("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:u,left:p,width:c,height:f}});return e.fromJSON(t)}))},e.fromJSON=function(t){e.validateJSON(t);var r=new e;return r.location=Object.freeze(a.clone(t.location)),r._updateFromData(t.data),Object.freeze(r)},e.validateJSON=function(e){if(!e||!e.location)throw new o("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new o("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new o("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new o("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new o("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")},e}();function l(e){var t;if("vector-tile"===e.service.type)t=e.service.url+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;else{var r=e.service.tileServers;t=(r&&r.length?r[e.row%r.length]:e.service.url)+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height}var n=e.service.query;return n&&(t=t+"?"+n),t}t.Tilemap=s,t.tilemapDefinitionId=function(e){return e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height},t.tilemapDefinitionUrl=l,t.default=s}.apply(null,n))||(e.exports=i)},1109:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(4),r(3),r(64),r(2)],void 0===(i=function(e,t,r,n,i,o,a,s){var l,u=a.createSetFromValues(["Raster","Raster2","DEM","FillRaster"]),p=a.createSetFromValues(["Rasters"]),c=function(e){return e&&e.rasterFunction?d.fromJSON(e):e},f=function(e){return e&&e instanceof d?e.toJSON():e};!function(e){e[e.MOSAIC=0]="MOSAIC",e[e.GROUP=1]="GROUP",e[e.ITEM=2]="ITEM"}(l||(l={}));var d=function(e){function t(t){var r=e.call(this,t)||this;return r.functionArguments=null,r.functionName=null,r.outputPixelType="unknown",r.variableName=null,r.description=null,r.functionDefinition=null,r.thumbnail=null,r}var i;return r(t,e),i=t,t.prototype.readFunctionArguments=function(e,t){return function(e){if(null==e)return null;for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];u.has(i)?t[i]=c(e[i]):p.has(i)&&Array.isArray(e[i])?t[i]=e[i].map(c):t[i]=e[i]}return t}(t.arguments||t.rasterFunctionArguments)},t.prototype.writeFunctionArguments=function(e,t,r){for(var n={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];u.has(a)?n[a]=f(e[a]):p.has(a)&&Array.isArray(e[a])?n[a]=e[a].map(f):n[a]=f(e[a])}this.functionDefinition?t.arguments=n:t[r]=n},t.prototype.readFunctionName=function(e,t){var r=t.rasterFunctionInfos;return t.name||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunction)},t.prototype.writeFunctionName=function(e,t,r){this.functionDefinition?t.name=e:t[r]=e},t.prototype.readFunctionType=function(e){return l[e]},t.prototype.writeFunctionType=function(e,t,r){t[r]=l[e]},t.prototype.clone=function(){return new i({functionName:this.functionName,functionArguments:o.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,name:this.functionName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})},n([s.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],t.prototype,"functionArguments",void 0),n([s.reader("functionArguments",["rasterFunctionArguments","arguments"])],t.prototype,"readFunctionArguments",null),n([s.writer("functionArguments")],t.prototype,"writeFunctionArguments",null),n([s.property({json:{type:String,write:{target:"rasterFunction"}}})],t.prototype,"functionName",void 0),n([s.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],t.prototype,"readFunctionName",null),n([s.writer("functionName")],t.prototype,"writeFunctionName",null),n([s.enumeration.serializable()({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),s.property({json:{default:"unknown"}})],t.prototype,"outputPixelType",void 0),n([s.property({type:String,json:{read:!0,write:!0}})],t.prototype,"variableName",void 0),n([s.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"description",void 0),n([s.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"functionType",void 0),n([s.reader("functionType")],t.prototype,"readFunctionType",null),n([s.writer("functionType")],t.prototype,"writeFunctionType",null),n([s.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"functionDefinition",void 0),n([s.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"thumbnail",void 0),i=n([s.subclass("esri.layers.support.RasterFunction")],t)}(s.declared(i.JSONSupport));return d}.apply(null,n))||(e.exports=i)},1166:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(4),r(3),r(2),r(17)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.variableName=null,r.dimensionName=null,r.values=[],r.isSlice=!1,r}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({variableName:this.variableName,dimensionName:this.dimensionName,values:o.clone(this.values),isSlice:this.isSlice})},n([a.property({type:String,json:{write:!0}})],t.prototype,"variableName",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"dimensionName",void 0),n([a.property({type:s.types.array(s.types.oneOf([s.types.native(Number),s.types.array(s.types.native(Number))])),json:{write:!0}})],t.prototype,"values",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"isSlice",void 0),i=n([a.subclass("esri.layers.support.DimensionalDefinition")],t)}(a.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},1167:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1153),r(25),r(3),r(1109),r(1191),r(1226)],void 0===(i=function(e,t,r,n,i,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},u={type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]};t.isSupportedRendererType=function(e){var t=e.type;return"raster-stretch"===t||"unique-value"===t||"class-breaks"===t},t.combineRenderingRules=function(e,t){if(!e||!t)return i.clone(e||t);var r=i.clone(e);return"none"!==t.functionName.toLowerCase()&&((function e(t){var r=t.Raster;return r&&"esri.layers.support.RasterFunction"===r.declaredClass?e(r.functionArguments):t}(r.functionArguments)).Raster=t),r},t.convertRendererToRenderingRule=function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var r=new o;r.functionName="Stretch";var n=p[s.stretchTypeJSONDict.toJSON(e.stretchType)],i={StretchType:n,Statistics:e.statistics,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(i.Min=e.outputMin),null!=e.outputMax&&(i.Max=e.outputMax),n===p.standardDeviation?(i.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType="u8"):n===p.percentClip?(i.MinPercent=e.minPercent,i.MaxPercent=e.maxPercent,r.outputPixelType="u8"):n===p.minMax?r.outputPixelType="u8":n===p.sigmoid&&(i.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=i,r.variableName="Raster",e.colorRamp){var l=e.colorRamp,u=new o,c=a.getColorRampName(l);return c?u.functionArguments={colorRamp:c}:!t.convertColorRampToColormap||"algorithmic"!==l.type&&"multipart"!==l.type?u.functionArguments={colorRamp:e.colorRamp.toJSON()}:u.functionArguments={Colormap:a.convertColorRampToColormap(l,256)},u.variableName="Raster",u.functionName="Colormap",u.functionArguments.Raster=r,u}return r}(e,t);case"class-breaks":return function(e,t){var r=[],n=[],i=[],a=[],s=t.pixelType,l=t.rasterAttributeTable,u=l&&l.features,p=f(l);if(u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,r){var n,i=t.symbol.color;i.a&&u.forEach((function(o){((n=o.attributes[e.field])>=t.minValue&&n<t.maxValue||r===e.classBreakInfos.length-1&&n>=t.minValue)&&a.push([o.attributes[p],i.r,i.g,i.b])}))}));var d=s?c(a,s):a,h=new o;return h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=d,h.variableName="Raster",h}e.classBreakInfos.forEach((function(e,t){var o=e.symbol&&e.symbol.color;o.a?(0===t?r.push(e.minValue,e.maxValue+1e-6):r.push(e.minValue+1e-6,e.maxValue+1e-6),n.push(t),a.push([t,o.r,o.g,o.b])):i.push(e.minValue,e.maxValue)}));var y=s?c(a,s):a,m=new o;m.functionName="Remap",m.functionArguments={InputRanges:r,OutputValues:n,NoDataRanges:i},m.variableName="Raster";var v=new o;return v.functionName="Colormap",v.functionArguments={Colormap:y,Raster:m},v}(e,t);case"unique-value":return function(e,t){var r=[],n=t.pixelType,i=t.rasterAttributeTable,a=i&&i.features,s=f(i),l=!1;if(e.uniqueValueInfos&&e.uniqueValueInfos.forEach((function(t){var n=t.symbol.color;n.a&&(e.field!==s&&a?a&&a.forEach((function(i){String(i.attributes[e.field])===String(t.value)&&r.push([i.attributes[s],n.r,n.g,n.b])})):isNaN(t.value)?l=!0:r.push([t.value,n.r,n.g,n.b]))})),l)return null;var u=n&&r.length>0?c(r,n):r,p=new o;return p.functionName="Colormap",p.functionArguments={},p.functionArguments.Colormap=u,p.variableName="Raster",p}(e,t);case"raster-colormap":return function(e,t){var r=e.extractColormap();if(r&&0!==r.length){var n=t.pixelType,i=n?c(r,n):r,a=new o;return a.functionName="Colormap",a.functionArguments={},a.functionArguments.Colormap=i,a}}(e,t)}},t.createDefaultRenderer=function(e,t){if(e){var n,i=e.attributeTable,o=e.dataType,a=e.bandCount,s=e.pixelType,l=e.colormap,p=e.statistics,c=e.histograms;if(t&&t.length>0&&(p=p?t.map((function(e){return p[e]})):null,c=c?t.map((function(e){return c[e]})):null),1===a&&l&&l.length>0)n=r.RasterColormapRenderer.createFromColormap(l);else if(1===a&&i){var f=i.fields.filter((function(e){return"red"===e.name.toLowerCase()}))[0],d=i.fields.filter((function(e){return"green"===e.name.toLowerCase()}))[0],h=i.fields.filter((function(e){return"blue"===e.name.toLowerCase()}))[0],y=i.fields.filter((function(e){return"value"===e.name}))[0],m=i.fields.filter((function(e){return"classname"===e.name.toLowerCase()}))[0];m||(m=i.fields.filter((function(e){return"string"===e.type}))[0])||(m=y),f&&d&&h&&m&&(n=r.UniqueValueRenderer.fromJSON({field1:m.name,uniqueValueInfos:i.features.map((function(e){return{value:e.attributes[m.name],label:e.attributes[m.name],symbol:{color:[e.attributes[f.name],e.attributes[d.name],e.attributes[h.name],255],type:"esriSFS",style:"esriSFSSolid"}}}))}))}if(!n){var v=void 0,g=!1,_=void 0,b=void 0,w=void 0;"u8"===s&&"processed"===o?(v="min-max",p=p||[{min:0,max:255},{min:0,max:255},{min:0,max:255}]):"u8"===s||"elevation"===o?(v="min-max",g=!p):"scientific"===o?(v="min-max",g=!p,_=u):c&&c.length>0?(v="percent-clip",w=b=.25):p?v="min-max":(v="percent-clip",g=!0),n=r.RasterStretchRenderer.fromJSON({stretchType:v,dra:g,colorRamp:_,min:0,max:255,statistics:g?null:p,histograms:g?null:c,maxPercent:b,minPercent:w})}return n}},t.getDefaultBandCombination=function(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,n,i,o,a,s=e.keyProperties&&e.keyProperties.BandProperties;if(s&&s.length===t){for(var l=0;l<s.length;l++)s[l].BandName&&"red"===s[l].BandName.toLowerCase()&&(n=l),s[l].BandName&&"green"===s[l].BandName.toLowerCase()&&(i=l),s[l].BandName&&"blue"===s[l].BandName.toLowerCase()&&(o=l),s[l].BandName&&"nearinfrared"===s[l].BandName.toLowerCase()&&(a=l);void 0!==n&&void 0!==i&&void 0!==o?r=[n,i,o]:void 0!==n&&void 0!==i&&void 0!==a&&(r=[a,n,i])}return!r&&t>3&&(r=[0,1,2]),r};var p={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function c(e,t){var r=l[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function f(e){if(e){var t=e.fields,r=t&&n.find(t,(function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return r&&r.name}}}.apply(null,n))||(e.exports=i)},1197:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(10),r(11),r(8),r(32),r(9),r(1031),r(37),r(31)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c){Object.defineProperty(t,"__esModule",{value:!0});var f=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};t.defaultGridSpacing=32,t.load=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return u.isLoaded()||!u.isSupported()?[2,null]:[4,u.load()];case 1:return e.sent(),[2]}}))}))},t.projectResolution=function(e,t,r,n){if(void 0===n&&(n=null),e.spatialReference.equals(t))return e;var i=f(e.spatialReference,t);if(i&&!u.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");var o=r.center,a=new s.Extent({xmin:o.x-e.x/2,xmax:o.x+e.x/2,ymin:o.y-e.y/2,ymax:o.y+e.y/2,spatialReference:e.spatialReference}),p=i?u.project(a,t,n):c.project(a,t);return null==p?null:new s.Point(p.xmax-p.xmin,p.ymax-p.ymin,t)},t.projectPoint=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=f(e.spatialReference,t);if(n&&!u.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");return n?u.project(e,t,r):c.project(e,t)},t.projectExtent=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=f(e.spatialReference,t);if(n&&!u.isLoaded())throw new l("rasterprojectionhelper-projectExtent","projection engine is not loaded");return n?u.project(e,t,r):c.project(e,t)},t.getProjectionOffsetGrid=function(e,r,n,i,o,a){void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=[t.defaultGridSpacing,t.defaultGridSpacing]);var d=r.spatialReference.equals(e.spatialReference),h=f(e.spatialReference,r.spatialReference);if(h&&!u.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&r&&n))return null;for(var y,m,v,g=e.xmin,_=e.ymin,b=e.xmax,w=e.ymax,x=e.spatialReference,P=r.spatialReference,S=p.getInfo(x),I=S&&S.valid[0],T=S&&S.valid[1],E={x:a[0]*n.x,y:a[1]*n.y},R={cols:Math.ceil((b-g)/E.x-.1)+1,rows:Math.ceil((w-_)/E.y-.1)+1},O=E.x,M=E.y,N=[],A=!1,C=0;C<R.cols;C++){for(var L=[],F=0;F<R.rows;F++)y=new s.Point({x:g+O*C,y:w-M*F,spatialReference:x}),m=d?y:h?u.project(y,P,i):c.project(y,P),L.push(m),C>0&&o&&m&&v[F]&&S&&m.x<v[F].x&&(m.x+=T-I),m?(N.push((m.x-r.xmin)/(r.xmax-r.xmin)),N.push((r.ymax-m.y)/(r.ymax-r.ymin))):(N.push(NaN),N.push(NaN),A=!0);v=L}var j=function(e,t){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,n=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(r-e[2*t.rows+2]),Math.abs(n-e[2*t.rows+3])]}(N,R),k=new Float32Array((R.cols-1)*(R.rows-1)*2*6),D=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),z=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(C=0;C<R.cols-1;C++){for(F=0;F<R.rows-1;F++){for(var B=C*R.rows*2+2*F,G=N[B],U=N[B+1],H=N[B+2],V=N[B+3],J=N[B+=2*R.rows],q=N[B+1],W=N[B+2],Y=N[B+3],X=0,Z=12*(F*(R.cols-1)+C),K=0;K<3;K++)k[Z++]=D[X++]*G+D[X++]*H+D[X++]*W;for(X=0,K=0;K<3;K++)k[Z++]=D[X++]*U+D[X++]*V+D[X++]*Y;for(X=0,K=0;K<3;K++)k[Z++]=z[X++]*G+z[X++]*J+z[X++]*W;for(X=0,K=0;K<3;K++)k[Z++]=z[X++]*U+z[X++]*q+z[X++]*Y}if(A)for(var Q=0;Q<k.length;Q++)isNaN(k[Q])&&(k[Q]=-1)}return{offsets:N,error:j,coefficients:k,spacing:a,size:[R.cols-1,R.rows-1]}},t.snapPyramid=function(e,t,r){var n=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,o=t.storageInfo.maximumPyramidLevel||0,a="down"===r?Math.floor(Math.min(n,i)):"up"===r?Math.ceil(Math.max(n,i)):Math.round((n+i)/2),l=!1;a<0?a=0:a>o&&(l=a>o+3,a=o);var u=Math.pow(2,a);return{pyramidLevel:a,pyramidResolution:new s.Point({x:u*t.pixelSize.x,y:u*t.pixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}}.apply(null,n))||(e.exports=i)},1200:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(11),r(8),r(9),r(6),r(262),r(1111)],void 0===(i=function(e,t,r,n,i,o,a,s,l){return function(){function e(){this._workerThread=null,this._destroyed=!1}return e.prototype.initialize=function(){return n(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return[4,s.open("RasterWorker")];case 1:return e=t.sent(),this._destroyed?e.close():this._workerThread=e,[2]}}))}))},e.prototype.destroy=function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)},e.prototype.decode=function(e,t){return n(this,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new o("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("decode",e,t)];case 1:return[2,(n=r.sent())?new l(n):null]}}))}))},e.prototype.symbolize=function(e,t){return n(this,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new o("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("symbolize",e.toJSON(),t)];case 1:return[2,(n=r.sent())?new l(n):null]}}))}))},e.prototype.updateSymbolizer=function(e,t){return n(this,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new o("raster-jobhandler:no-connection","no available worker connection");return n=e&&e.renderer&&"raster-stretch"===e.renderer.type&&e.renderer.histograms,[4,a.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:n},t))];case 1:return r.sent(),[2]}}))}))},e.prototype.stretch=function(e,t){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new o("raster-jobhandler:no-connection","no available worker connection");return e&&e.pixelBlock?(n={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},[4,this._workerThread.invoke("stretch",n,t)]):[2,null];case 1:return[2,(i=r.sent())?new l(i):null]}}))}))},e.prototype.mosaicAndTransform=function(e,t){return n(this,void 0,void 0,(function(){var n,a;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new o("raster-jobhandler:no-connection","no available worker connection");return e&&e.srcPixelBlocks&&e.srcPixelBlocks.length>0?(n=i({},e,{srcPixelBlocks:e.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),[4,this._workerThread.invoke("mosaicAndTransform",n,t)]):[2,null];case 1:return[2,(a=r.sent())?new l(a):null]}}))}))},e}()}.apply(null,n))||(e.exports=i)},1240:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(1),r(0),r(10),r(11),r(32),r(254),r(1153),r(9),r(15),r(246),r(6),r(2),r(17),r(144),r(859),r(862),r(1002),r(901),r(841),r(1166),r(854),r(1167),r(1200),r(248),r(1867),r(1225),r(1065)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,m,v,g,_,b,w,x,P,S,I,T,E,R,O){return function(e){function t(t,r){var n=e.call(this,t)||this;return n._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},n._symbolizer=null,n.bandIds=null,n.fullExtent=null,n.interpolation="nearest",n.isReference=null,n.listMode="show",n.raster=null,n.rasterInfo=null,n.spatialReference=null,n.tileInfo=null,n.title=null,n.type="imagery-tile",n.url=null,n.operationalLayerType="ArcGISTiledImageServiceLayer",n.popupEnabled=!0,n.popupTemplate=null,n}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},t.prototype.load=function(e){var t=this,r=c.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._openRaster(r)}),(function(){return t._openRaster(r)}))),d.resolve(this)},Object.defineProperty(t.prototype,"multidimensionalDefinition",{set:function(e){this.raster&&(this._sliceId=this.raster.getSliceIndex(e)),this._set("multidimensionalDefinition",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return[new P({name:"Raster.PixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){this._set("renderer",e),this.updateRenderer()},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var n=t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,i=u.read(n,r)||void 0;if(null!=i)return i},t.prototype.createPopupTemplate=function(e){return O.createPopupTemplate(this,e)},t.prototype.updateRenderer=function(){return a(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this.loaded?JSON.stringify(this._cachedRendererJson)===JSON.stringify(this.renderer)?[2]:(e=this._rasterJobHandler.instance)?(this._symbolizer.renderer=this.renderer,this._symbolizer.bind(),[4,e.updateSymbolizer(this._symbolizer)]):[2]:[2];case 1:return t.sent(),this._cachedRendererJson=this.renderer.toJSON(),[2]}}))}))},t.prototype.applyRenderer=function(e,t){return a(this,void 0,void 0,(function(){var r,n,i;return o(this,(function(o){switch(o.label){case 0:return e&&e.pixels&&e.pixels.length>0?(r=t&&this.renderer&&"raster-stretch"===this.renderer.type,this.updateRenderer(),(i=this._rasterJobHandler.instance)?r?[4,i.stretch({pixelBlock:e,stretchParams:t})]:[3,2]:[3,5]):[2,null];case 1:return n=o.sent(),[3,4];case 2:return[4,i.symbolize(e)];case 3:n=o.sent(),o.label=4;case 4:return[3,6];case 5:n=r?this._symbolizer.simpleStretch(e,t):this._symbolizer.symbolize(e),o.label=6;case 6:return[2,n]}}))}))},t.prototype.fetchTile=function(e,t,n,i){return void 0===i&&(i={}),a(this,void 0,void 0,(function(){var a;return o(this,(function(o){switch(o.label){case 0:return[4,this._initJobHandler()];case 1:return o.sent(),this.multidimensionalDefinition&&(a=this._sliceId,i=r({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:a},i)),[2,this.raster.fetchTile(e,t,n,i)]}}))}))},t.prototype.fetchPixels=function(e,t,n,i){return a(this,void 0,void 0,(function(){var a;return o(this,(function(o){switch(o.label){case 0:return[4,this._initJobHandler()];case 1:return o.sent(),this.multidimensionalDefinition&&(a=this._sliceId,i=r({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:a},i)),[2,this.raster.fetchPixels(e,t,n,i)]}}))}))},t.prototype.identify=function(e,t){return void 0===t&&(t={}),this.raster.identify(e,t)},t.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},t.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},t.prototype._initJobHandler=function(){var e=this;if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;var t=new I;return this._rasterJobHandler.connectionPromise=t.initialize().then((function(){e._rasterJobHandler.instance=t,e.raster.rasterJobHandler=t,e.renderer&&e.updateRenderer()})).catch((function(){return null})),this._rasterJobHandler.connectionPromise},t.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this.raster.rasterJobHandler=null},t.prototype._openRaster=function(e){return a(this,void 0,void 0,(function(){var t,r,n,i,a,s,l,u,c,f,d;return o(this,(function(o){switch(o.label){case 0:return[4,E.open(this.raster||{url:this.url,signal:e})];case 1:if(t=o.sent(),this.url||(this.url=t.url),this.raster=t,!(r=t.rasterInfo))throw new p("tile-imagery-layer:load","cannot load resources on "+this.url);if(n=r.spatialReference,i=r.pixelSize,a=r.storageInfo,!(s=a.tileInfo)){for(l=[],u=a.maximumPyramidLevel||0,c=Math.max(i.x,i.y),f=1/.0254*96*c,d=0;d<=u;d++)l.push({level:u-d,resolution:c,scale:f}),c*=2,f*=2;s=new T({origin:a.origin,size:[a.blockWidth,a.blockHeight],spatialReference:n,lods:l}),a.tileInfo=s}return null==this.title&&(this.title=this.raster.datasetName),r.multidimensionalInfo&&(this._configDefaultSlice(),this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)),this._configDefaultRenderer(),[2,t]}}))}))},t.prototype._configDefaultSlice=function(){var e=this.raster.rasterInfo.multidimensionalInfo.variables[0],t=[];e.dimensions.forEach((function(r){t.push(new x({variableName:e.name,dimensionName:r.name,values:r.values[0],isSlice:!0}))})),this.multidimensionalDefinition=t},t.prototype._configDefaultRenderer=function(){var e=this.raster.rasterInfo,t=e.pixelType;this.bandIds||(this.bandIds=S.getDefaultBandCombination(e)),this.renderer||(this.renderer=S.createDefaultRenderer(e,this.bandIds)),"u8"===t&&this.renderer&&"stretchType"in this.renderer&&"min-max"===this.renderer.stretchType&&this.renderer.dynamicRangeAdjustment&&(this.renderer.dynamicRangeAdjustment=!1,this.renderer.statistics=this.renderer.statistics||[[0,255],[0,255],[0,255]]),this._symbolizer?(this._symbolizer.renderer=this.renderer,this._symbolizer.rasterInfo=e):this._symbolizer=new R({renderer:this.renderer,rasterInfo:e}),this._symbolizer.bind()||(this._symbolizer=null)},i([h.property()],t.prototype,"_cachedRendererJson",void 0),i([h.property()],t.prototype,"_sliceId",void 0),i([h.property()],t.prototype,"_rasterJobHandler",void 0),i([h.property()],t.prototype,"_symbolizer",void 0),i([h.property({type:[y.Integer],json:{write:!0}})],t.prototype,"bandIds",void 0),i([h.property({type:s.Extent}),h.aliasOf("rasterInfo.extent")],t.prototype,"fullExtent",void 0),i([h.property({type:String,json:{write:!0}})],t.prototype,"interpolation",void 0),i([h.property({type:Boolean,json:{read:!1}})],t.prototype,"isReference",void 0),i([h.property({type:["show","hide"]})],t.prototype,"listMode",void 0),i([h.property({type:[x]})],t.prototype,"multidimensionalDefinition",null),i([h.property()],t.prototype,"raster",void 0),i([h.property({readOnly:!0}),h.aliasOf("raster.rasterInfo")],t.prototype,"rasterInfo",void 0),i([h.property({type:s.SpatialReference}),h.aliasOf("rasterInfo.spatialReference")],t.prototype,"spatialReference",void 0),i([h.property({type:T,dependsOn:["rasterInfo"]}),h.aliasOf("rasterInfo.storageInfo.tileInfo")],t.prototype,"tileInfo",void 0),i([h.property()],t.prototype,"title",void 0),i([h.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),i([h.property(w.url)],t.prototype,"url",void 0),i([h.property({type:["ArcGISTiledImageServiceLayer"]})],t.prototype,"operationalLayerType",void 0),i([h.property(w.popupEnabled)],t.prototype,"popupEnabled",void 0),i([h.property({type:l,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),i([h.property({readOnly:!0,dependsOn:["title"]})],t.prototype,"defaultPopupTemplate",null),i([h.property({readOnly:!0,type:[P]})],t.prototype,"fields",null),i([h.property({types:u.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),i([h.reader("renderer")],t.prototype,"readRenderer",null),i([h.subclass("esri.layers.TileImageryLayer")],t)}(h.declared(b.ScaleRangeLayer(_.RefreshableLayer(v.OperationalLayer(g.PortalLayer(f.MultiOriginJSONMixin(m)))))))}.apply(null,n))||(e.exports=i)},1241:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(1),r(0),r(4),r(2),r(46)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockWidth=void 0,t.blockHeight=void 0,t.compression=null,t.origin=null,t.firstPyramidLevel=null,t.maximumPyramidLevel=null,t.pyramidScalingFactor=2,t.pyramidBlockWidth=null,t.pyramidBlockHeight=null,t.tileInfo=null,t.blockBoundary=null,t}return n(t,e),i([a.property({type:Number,json:{write:!0}})],t.prototype,"blockWidth",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"blockHeight",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"compression",void 0),i([a.property({type:s,json:{write:!0}})],t.prototype,"origin",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"firstPyramidLevel",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maximumPyramidLevel",void 0),i([a.property()],t.prototype,"pyramidScalingFactor",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockWidth",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockHeight",void 0),i([a.property({json:{write:!0}})],t.prototype,"tileInfo",void 0),i([a.property()],t.prototype,"blockBoundary",void 0),i([a.subclass("esri.layers.support.RasterStorageInfo")],t)}(a.declared(o.JSONSupport))}.apply(null,n))||(e.exports=i)},1242:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(10),r(11),r(8),r(32),r(76),r(9),r(4),r(15),r(79),r(6),r(36),r(2),r(841),r(248),r(1297),r(1222),r(1033),r(1197)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,m,v,g,_,b,w){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rasterJobHandler=null,t.datasetName=null,t.datasetFormat=null,t.rasterInfo=null,t.ioConfig={bandIds:null,sampling:"closest"},t}return r(t,e),t.prototype.init=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=w.load(),this.addResolvingPromise(e),[4,this.when()];case 1:return t.sent(),[2]}}))}))},t.prototype.normalizeCtorArgs=function(e){return e&&e.ioConfig&&(e=a({},e,{ioConfig:a({resolution:null,bandIds:null,sampling:"closest",tileInfo:v.create()},e.ioConfig)})),e},Object.defineProperty(t.prototype,"url",{set:function(e){var t=h.urlToObject(e);this._set("url",t.path)},enumerable:!0,configurable:!0}),t.prototype.open=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){throw new u("BaseRaster:open-not-implemented","open() is not implemented")}))}))},t.prototype.fetchTile=function(e,t,r,n){return void 0===n&&(n={}),o(this,void 0,void 0,(function(){var o,a,l,u;return i(this,(function(i){return o=n.tileInfo,a=o.lodAt(e),l=new s.Point({x:a.resolution,y:a.resolution,spatialReference:o.spatialReference}),u=this._getTileExtent(l,t,r,o),[2,this.fetchPixels(u,o.size[0],o.size[1],n)]}))}))},t.prototype.identify=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var r,n,o,a,s,l,u,p,c,f,d,h,y,m,v;return i(this,(function(i){switch(i.label){case 0:return r=this.rasterInfo,n=r.spatialReference,o=r.extent,a=t.datumTransformation,s=w.projectPoint(e,n,a),o.intersects(s)?(l=0,t.srcResolution?(u=w.snapPyramid(t.srcResolution,this.rasterInfo,this.ioConfig.sampling),l=u.pyramidLevel,[3,3]):[3,1]):[2,{location:s,value:null}];case 1:return[4,this.computeBestPyramidLevelForLocation(e,t)];case 2:if(null==(l=i.sent()))return[2,{location:s,value:null}];i.label=3;case 3:return null===(p=this.identifyPixelLocation(s,l,null))?[2,{location:s,value:null}]:(c=p.row,f=p.col,d=p.rowOffset,h=p.colOffset,[4,this.fetchRawTile(l,c,f,t)]);case 4:return(y=i.sent()).pixels&&y.pixels.length>0?(m=d*this.rasterInfo.storageInfo.blockHeight+h,v=!y.mask||y.mask[m]?y.pixels.map((function(e){return e[m]})):null,[2,{location:s,value:v,pyramidLevel:l}]):[2,{location:s,value:null}]}}))}))},t.prototype.fetchPixels=function(e,t,r,n){return void 0===n&&(n={}),o(this,void 0,void 0,(function(){var o,a,l,u,p,c,f,d,h,y,m,v,g,_,x,P,S,I,T,E,R,O;return i(this,(function(i){switch(i.label){case 0:return o=e.clone().normalize(),e=o[0],a=this.rasterInfo.spatialReference,l=!e.spatialReference.equals(a),u=n.datumTransformation,p=new s.Point({x:(e.xmax-e.xmin)/t,y:(e.ymax-e.ymin)/r,spatialReference:e.spatialReference}),(c=n.srcResolution||(l?w.projectResolution(p,a,e,u):p))?(f=w.snapPyramid(c,this.rasterInfo,this.ioConfig.sampling),d=f.pyramidLevel,h=f.pyramidResolution,f.excessiveReading?[2,null]:(y=this.rasterInfo.storageInfo,m=l?w.projectExtent(e,a,u):e,v={x:Math.floor((m.xmin-y.origin.x)/h.x+.1),y:Math.floor((y.origin.y-m.ymax)/h.y+.1)},g=Math.ceil((m.xmax-m.xmin)/h.x-.1),_=Math.ceil((m.ymax-m.ymin)/h.y-.1),g/t>8||_/r>8?[2,null]:[4,this.fetchRawPixels(d,v,{width:g,height:_},n)])):[2,null];case 1:return(x=i.sent())?(P=d>0?y.pyramidBlockWidth:y.blockWidth,S=d>0?y.pyramidBlockHeight:y.blockHeight,l||1!==x.pixelBlocks.length||P!==t||S!==r||c.x!==p.x||c.y!==p.y?(I=w.getProjectionOffsetGrid(e,x.extent,p,u),E=!n.requestRawData,R={rows:I.spacing[0],cols:I.spacing[1]},this.rasterJobHandler?[4,this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:x.pixelBlocks,srcMosaicSize:x.mosaicSize,destDimension:E?{width:t,height:r}:null,coefs:E?I.coefficients:null,sampleSpacing:E?R:null},n)]:[3,3]):[2,{extent:e,srcExtent:m,pixelBlock:x.pixelBlocks[0],transformGrid:null}]):[2,null];case 2:return T=i.sent(),[3,4];case 3:O=b.mosaic(x.pixelBlocks,x.mosaicSize),T=E?b.approximateTransform(O,{width:t,height:r},I.coefficients,R):O,i.label=4;case 4:return[2,{srcExtent:m,pixelBlock:T,transformGrid:I,extent:e}]}}))}))},t.prototype.fetchRawPixels=function(e,t,r,n){return o(this,void 0,void 0,(function(){var o,a,l,u,p,f,h,y,m,v,_,b,w,x,P,S,I,T,E,R,O,M,N,A,C,L,F,j;return i(this,(function(i){switch(i.label){case 0:if(o=this.rasterInfo.storageInfo,a=o.origin,l=o.blockBoundary,u=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,p=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,f=Math.floor(t.x/u),h=Math.floor(t.y/p),y=Math.floor((t.x+r.width-1)/u),m=Math.floor((t.y+r.height-1)/p),v=this.rasterInfo,_=v.pixelSize,b=v.spatialReference,!(w=l[e]))return[2,null];if(x=w.minRow,P=w.minCol,S=w.maxCol,I=w.maxRow,m<x||y<P||h>I||f>S)return[2,null];for(T=[],E=this.url,R=n.registryId,N=h;N<=m;N++)for(A=f;A<=y;A++)N>=x&&A>=P&&I>=N&&S>=A?(O=e+"/"+N+"/"+A,M=g.getBlock(E,R,O),c.isSome(M)||(M=this.fetchRawTile(e,N,A,n),g.putBlock(E,R,O,M)),T.push(M)):T.push(null);return 0===T.length?[2,null]:[4,d.all(T)];case 1:return C=i.sent(),L={height:(m-h+1)*u,width:(y-f+1)*p},F=_.x*Math.pow(2,e),j=_.y*Math.pow(2,e),[2,{extent:new s.Extent({xmin:a.x+f*u*F,xmax:a.x+(y+1)*u*F,ymin:a.y-(m+1)*p*j,ymax:a.y-h*p*j,spatialReference:b}),pixelBlocks:C,mosaicSize:L}]}}))}))},t.prototype.fetchRawTile=function(e,t,r,n){return o(this,void 0,void 0,(function(){return i(this,(function(e){throw new u("BaseRaster:read-not-implemented","fetchRawTile() is not implemented")}))}))},t.prototype.decodePixelBlock=function(e,t){return this.rasterJobHandler?this.rasterJobHandler.decode({data:e,options:t}):_.decode(e,t)},t.prototype.request=function(e,t){return o(this,void 0,void 0,(function(){var r,n,o,s,u,p;return i(this,(function(i){switch(i.label){case 0:r=this.ioConfig.customFetchParameters,n=e.url,o=e.range,s=e.query,u=e.responseType,null==e.retryCount&&this.ioConfig.retryCount&&(e.retryCount=this.ioConfig.retryCount),p=o?{Range:"bytes="+o.from+"-"+o.to}:null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l(n,{query:a({},s,r),headers:p,responseType:u,signal:t})];case 2:return[2,i.sent().data];case 3:return i.sent(),e.retryCount>0?(e.retryCount--,[2,this.request(e,t)]):[2,null];case 4:return[2]}}))}))},t.prototype.getSliceIndex=function(e){var t=this.rasterInfo.multidimensionalInfo;if(!t||0===e.length)return null;for(var r=0,n=e[0].variableName,i=function(i){var o=t.variables[i],a=o.dimensions;if(o.name!==n)return r+=a.map((function(e){return e.values.length})).reduce((function(e,t){return e+t})),"break";for(var s=a.map((function(e){return e.values.length})),l=a.length,u=function(t){var n=e.filter((function(e){return e.dimensionName===a[t].name}))[0];if(null==n)return{value:null};var i=Array.isArray(n.values[0])?n.values[0][0]:n.values[0],o=a[t].values.indexOf(i);if(-1===o)return{value:null};s.shift(),r+=t===l-1?o:o*s.reduce((function(e,t){return e+t}))},p=0;p<l;p++){var c=u(p);if("object"==typeof c)return c}},o=0;o<t.variables.length;o++){var a=i(o);if("object"==typeof a)return a.value;if("break"===a)break}return r},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,0]}))}))},t.prototype.identifyPixelLocation=function(e,t,r){var n=this.rasterInfo,i=n.spatialReference,o=n.pixelSize,a=n.extent,s=this.rasterInfo.storageInfo,l=s.blockWidth,u=s.blockHeight,p=s.maximumPyramidLevel,c=s.pyramidScalingFactor,f=s.origin,d=s.blockBoundary,h=w.projectPoint(e,i,r);if(!a.intersects(h))return null;if(t<0||t>p)return null;var y=Math.pow(c,t),m=y*o.x,v=y*o.y,g=d[t],_=Math.max(g.minRow,Math.min(g.maxRow,(f.y-h.y)/v/u)),b=Math.max(g.minCol,Math.min(g.maxCol,(h.x-f.x)/m/l)),x=Math.min(u-1,Math.floor((_-Math.floor(_))*u)),P=Math.min(l-1,Math.floor((b-Math.floor(b))*l));return{pyramidLevel:t,row:Math.floor(_),col:Math.floor(b),rowOffset:x,colOffset:P,srcLocation:h}},t.prototype._getTileExtent=function(e,t,r,n){var i=n.origin,o=n.spatialReference,a=n.size[0],l=n.size[1],u=i.x+r*a*e.x,p=u+a*e.x,c=i.y-t*l*e.y,f=c-l*e.y;return new s.Extent({xmin:u,xmax:p,ymin:f,ymax:c,spatialReference:o})},n([y.property(m.url)],t.prototype,"url",null),n([y.property({type:String,json:{write:!0}})],t.prototype,"datasetName",void 0),n([y.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),n([y.property()],t.prototype,"rasterInfo",void 0),n([y.property()],t.prototype,"ioConfig",void 0),n([y.subclass("esri.layers.support.rasterDatasets.BaseRaster")],t)}(y.declared(f.EsriPromiseMixin(p.JSONSupport)))}.apply(null,n))||(e.exports=i)},1297:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(32),r(1197)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=new Map;t.register=function(e,t){var r={extent:null,rasterInfo:t,cache:new Map};if(i.has(e)){var n=i.get(e);return n.push(r),n.length-1}return i.set(e,[r]),0},t.unregister=function(e,t){i.has(e)&&(i.get(e)[t]=null)},t.deleteRaster=function(e){i.delete(e)},t.getBlock=function(e,t,r){if(!i.has(e))return null;var n=i.get(e);if(null==n[t]){for(var o=0;o<n.length;o++)if(n[o].cache.has(r))return n[o].cache.get(r);return null}var a=n[t].cache;if(a.has(r))return a.get(r);for(o=0;o<n.length;o++)if(o!==t&&n[o]&&n[o].cache.has(r)){var s=n[o].cache.get(r);return a.set(r,s),s}return null},t.putBlock=function(e,t,r,n){if(!i.has(e))return null;var o=i.get(e);if(null==o[t])return null;o[t].cache.set(r,n)},t.update=function(e,t,o,a,s,l,u){void 0===u&&(u=null);var p=function(e,t){if(!i.has(e))return null;var r=i.get(e);return null==r[t]?null:r[t]}(e,t),c=p.extent,f=p.cache,d=p.rasterInfo,h=o.clone().normalize();if(o=h[0],!c||c.xmin!==o.xmin||c.xmax!==o.xmax||c.ymin!==o.ymin||c.ymax!==o.ymax){var y=d.spatialReference,m=n.projectExtent(o,y,u),v=new r.Point({x:a,y:a,spatialReference:o.spatialReference});if(null!==s||(s=n.projectResolution(v,y,o,u))){var g=n.snapPyramid(s,d,l||"closest"),_=g.pyramidLevel,b=g.pyramidResolution;if(!g.excessiveReading){for(var w=Math.floor((m.xmin-d.storageInfo.origin.x)/b.x),x=Math.floor((d.storageInfo.origin.y-m.ymax)/b.y),P=Math.ceil((m.xmax-m.xmin)/b.x-.1),S=Math.ceil((m.ymax-m.ymin)/b.y-.1),I=_>0?d.storageInfo.pyramidBlockWidth:d.storageInfo.blockWidth,T=_>0?d.storageInfo.pyramidBlockHeight:d.storageInfo.blockHeight,E=Math.floor(w/I),R=Math.floor(x/T),O=Math.floor((w+P-1)/I),M=Math.floor((x+S-1)/T),N=new Set,A=R-1;A<=M+1;A++)for(var C=E-1;C<=O+1;C++)N.add(_+"/"+A+"/"+C);f.forEach((function(e,t){N.has(t)||f.delete(t)})),p.extent={xmin:o.xmin,ymin:o.ymin,xmax:o.xmax,ymax:o.ymax}}}}}}.apply(null,n))||(e.exports=i)},1867:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(11),r(1868),r(9),r(1869),r(1871),r(1872),r(1874)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){var p=new Map;return p.set("CRF",{desc:"Cloud Raster Format",constructor:a}),p.set("MRF",{desc:"Meta Raster Format",constructor:l}),p.set("TIFF",{desc:"GeoTIFF",constructor:u}),p.set("RasterTileServer",{desc:"Raster Tile Server",constructor:s}),function(){function e(){}return Object.defineProperty(e,"supportedFormats",{get:function(){for(var e=p.keys(),t=new i.default,r=e.next();!r.done;)t.add(r.value),r=e.next();return t},enumerable:!0,configurable:!0}),e.open=function(e){return n(this,void 0,void 0,(function(){var t,n,i,a,s,l,u,c,f,d;return r(this,(function(r){switch(r.label){case 0:return t=e.url,n=e.ioConfig,null==(i=e.datasetFormat)&&t.lastIndexOf(".")&&(i=t.slice(t.lastIndexOf(".")+1).toUpperCase()),"OVR"===i||"TIF"===i?i="TIFF":t.toLowerCase().indexOf("/imageserver")>-1&&(i="RasterTileServer"),a={resolution:null,bandIds:null,sampling:null},s={url:t,datasetFormat:i,ioConfig:n||a},this.supportedFormats.has(i)?(l=p.get(i).constructor,[4,(u=new l(s)).open({signal:e.signal})]):[3,2];case 1:return r.sent(),[2,u];case 2:if(i)throw new o("rasterfactory:open","not a supported format "+i);return c=Array.from(p.keys()),f=0,[2,(d=function(){return(i=c[f++])?(l=p.get(i).constructor,(u=new l(s)).open({signal:e.signal}).then((function(){return u})).catch((function(){return d()}))):null})()]}}))}))},e.register=function(e,t,r){p.has(e.toUpperCase())||p.set(e.toUpperCase(),{desc:t,constructor:r})},e}()}.apply(null,n))||(e.exports=i)},1868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(42),o=r(41),a=r(153),s=r(49);r(113),t.Set=o.default.Set,s.default("es6-set")||(t.Set=((n=function(){function e(e){if(this._setData=[],this[Symbol.toStringTag]="Set",e)if(a.isArrayLike(e))for(var t=0;t<e.length;t++)this.add(e[t]);else try{for(var r=i.__values(e),n=r.next();!n.done;n=r.next()){var o=n.value;this.add(o)}}catch(e){s={error:e}}finally{try{n&&!n.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}var s,l}return e.prototype.add=function(e){return this.has(e)||this._setData.push(e),this},e.prototype.clear=function(){this._setData.length=0},e.prototype.delete=function(e){var t=this._setData.indexOf(e);return-1!==t&&(this._setData.splice(t,1),!0)},e.prototype.entries=function(){return new a.ShimIterator(this._setData.map((function(e){return[e,e]})))},e.prototype.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},e.prototype.has=function(e){return this._setData.indexOf(e)>-1},e.prototype.keys=function(){return new a.ShimIterator(this._setData)},Object.defineProperty(e.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0}),e.prototype.values=function(){return new a.ShimIterator(this._setData)},e.prototype[Symbol.iterator]=function(){return new a.ShimIterator(this._setData)},e}())[Symbol.species]=n,n)),t.default=t.Set},1869:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(0),r(11),r(1),r(32),r(9),r(15),r(6),r(2),r(1154),r(1241),r(248),r(1242),r(1870),r(910)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,m){var v=new Map;return v.set("int16","esriFieldTypeSmallInteger"),v.set("int32","esriFieldTypeInteger"),v.set("int64","esriFieldTypeInteger"),v.set("float32","esriFieldTypeSingle"),v.set("float64","esriFieldTypeDouble"),v.set("text","esriFieldTypeString"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.storageInfo=null,t}return o(t,e),t.prototype.open=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,a,u;return r(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e?l.unwrap(e.signal):null,[4,this.request({url:this.url+"/conf.json",responseType:"json"},t)];case 2:if(n=r.sent(),!this._validateHeader(n))throw new s("cloudraster:open","Invalid or unsupported conf.json.");return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),i=this._parseHeader(n),o=i.storageInfo,"thematic"!==(a=i.rasterInfo).dataType?[3,4]:[4,this._fetchAuxiliaryInformation()];case 3:u=r.sent(),a.attributeTable=u,r.label=4;case 4:return this._set("storageInfo",o),this._set("rasterInfo",a),this.ioConfig.retryCount=this.ioConfig.retryCount||0,[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,o){return void 0===o&&(o={}),i(this,void 0,void 0,(function(){var i,a,s,l,u,p,c;return r(this,(function(r){switch(r.label){case 0:return(i=this.rasterInfo.storageInfo.maximumPyramidLevel-e)<0?[2,null]:(a=this._buildCacheFilePath(i,t,n,o.multidimensionalDefinition),s=this._getIndexRecordFromBundle(t,n),[4,this.request({url:a,range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer"},o.signal)]);case 1:return(l=r.sent())?(u=new Uint8Array(l),0===(p=this._getTileEndAndContentType(u,s)).recordSize?[2,null]:[4,this.request({url:a,range:{from:p.position,to:p.position+p.recordSize},responseType:"array-buffer"},o.signal)]):[2,null];case 2:return(c=r.sent())?[2,this.decodePixelBlock(c,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null})]:[2,null]}}))}))},t.prototype._validateHeader=function(e){return e&&"RasterInfo"===e.type&&!["origin","extent","geodataXform","LODInfos","blockWidth","blockHeight","bandCount","pixelType","pixelSizeX","pixelSizeY","format","packetSize"].some((function(t){return!e[t]}))},t.prototype._parseHeader=function(e){var t,r,n,i,o=["u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64"][e.pixelType],s=e.bandCount,l=e.histograms,u=e.colormap,p=e.blockWidth,h=e.blockHeight,y=e.firstPyramidLevel,m=e.maximumPyramidLevel,v=e.statistics&&e.statistics.map((function(e){return{min:e.min,max:e.max,avg:e.mean,stddev:e.standardDeviation,median:e.median,mode:e.mode}})),g=new a.SpatialReference(e.extent.spatialReference||e.geodataXform.spatialReference),_=new a.Extent({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent.xmax,ymax:e.extent.ymax,spatialReference:g}),b=new a.Point({x:e.pixelSizeX,y:e.pixelSizeY,spatialReference:g}),w=e.properties,x=e.format.toLowerCase().replace("cache/",""),P=new a.Point(e.origin.x,e.origin.y,g);if(u&&u.colors)for(t=[],r=0;r<u.colors.length;r++)n=u.colors[r],i=u.values?u.values[r]:r,t.push([i,255&n,n<<16>>>24,n<<8>>>24,n>>>24]);var S=e.LODInfos,I=[];for(r=0;r<S.levels.length;r++)I.push({level:S.levels[r],resolution:S.resolutions[r],scale:96/.0254*S.resolutions[r]});var T=new d({dpi:96,lods:I,format:x,origin:P,size:[p,h],spatialReference:g}),E={recordSize:8,packetSize:e.packetSize,headerSize:e.packetSize*e.packetSize*8+64},R=Math.round((_.xmax-_.xmin)/b.x),O=Math.round((_.ymax-_.ymin)/b.y),M=[{maxCol:Math.ceil(R/p)-1,maxRow:Math.ceil(O/h)-1,minCol:0,minRow:0}],N=2;if(m>0)for(r=0;r<m;r++)M.push({maxCol:Math.ceil(R/N/p)-1,maxRow:Math.ceil(O/N/h)-1,minCol:0,minRow:0}),N*=2;var A=e.mdInfo;return{storageInfo:E,rasterInfo:new c({width:R,height:O,pixelType:o,bandCount:s,extent:_,spatialReference:g,pixelSize:b,keyProperties:w,statistics:v,histograms:l,multidimensionalInfo:A,colormap:t,storageInfo:new f({blockWidth:p,blockHeight:h,pyramidBlockWidth:p,pyramidBlockHeight:h,origin:P,tileInfo:T,firstPyramidLevel:y,maximumPyramidLevel:m,blockBoundary:M})})}},t.prototype._fetchAuxiliaryInformation=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,a,s,l,p;return r(this,(function(r){switch(r.label){case 0:return t=this.request({url:this.url+"/conf.vat.json",responseType:"json"},e).then((function(e){return e})).catch((function(){return null})),n=this.request({url:this.url+"/conf.vat.dbf",responseType:"array-buffer"},e).then((function(e){return e})).catch((function(){return null})),[4,u.all([t,n])];case 1:return(i=r.sent())[0]&&(a=i[0].fields,s=i[0].values,a&&s&&(a=a.map((function(e){return{type:"OID"===e.name?"esriFieldTypeOID":v.get(e.type),name:e.name,alias:e.alias||e.name}})),l=s.map((function(e){return{attributes:e}})),a&&s&&(o={fields:a,features:l}))),!o&&i[1]&&(p=y.parse(i[1]),o=p.recordSet),[2,m.fromJSON(o)]}}))}))},t.prototype._buildCacheFilePath=function(e,t,r,n){var i=this.storageInfo.packetSize,o=Math.floor(t/i)*i,a=Math.floor(r/i)*i,s="R"+this._toHexString4(o)+"C"+this._toHexString4(a),l="L";l+=e>=10?e.toString():"0"+e.toString();var u=n&&n[0];if(!u)return this.url+"/_alllayers/"+l+"/"+s+".bundle";for(var p=this.rasterInfo.multidimensionalInfo.variables.filter((function(e){return e.name===u.variableName}))[0].dimensions[0].values.indexOf(u.values[0]).toString(16),c=4-p.length,f=0;f<c;f++)p="0"+p;return p="S"+p,this.url+"/_alllayers/"+u.variableName+"/"+p+"/"+l+"/"+s+".bundle"},t.prototype._getIndexRecordFromBundle=function(e,t){var r=this.storageInfo.packetSize,n=r*(e%r)+t%r;if(n<0)throw"Invalid level / row / col";return 20+n*this.storageInfo.recordSize+44},t.prototype._getTileEndAndContentType=function(e,t){var r,n=e.subarray(t,t+8),i=0;for(r=0;r<5;r++)i|=(255&n[r])<<8*r;var o=0xffffffffff&i;for(i=0,r=5;r<8;r++)i|=(255&n[r])<<8*(r-5);return{position:o,recordSize:0xffffffffff&i}},t.prototype._toHexString4=function(e){var t=e.toString(16);if(4!==t.length)for(var r=4-t.length;r-- >0;)t="0"+t;return t},n([p.property({readOnly:!0})],t.prototype,"storageInfo",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),n([p.subclass("esri.layers.support.rasterDatasets.CloudRaster")],t)}(p.declared(h))}.apply(null,n))||(e.exports=i)},1870:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1366)],void 0===(i=function(e,t,r){return function(){function e(){}return Object.defineProperty(e,"supportedVersions",{get:function(){return[5]},enumerable:!0,configurable:!0}),e.parse=function(e){var t=new DataView(e),n=3&t.getUint8(0);if(3!==n)return{header:{version:n},recordSet:null};var i,o=t.getUint32(4,!0),a=t.getUint16(8,!0),s=t.getUint16(10,!0),l={version:n,recordCount:o,headerByteCount:a,recordByteCount:s},u=32,p=[],c=[];if(3===n){for(;13!==t.getUint8(u);)i=String.fromCharCode(t.getUint8(u+11)).trim(),p.push({name:r.bytesToUTF8(new Uint8Array(e,u,11)),type:i,typeName:["String","Date","Double","Boolean","String","Integer"][["C","D","F","L","M","N"].indexOf(i)],length:t.getUint8(u+16)}),u+=32;if(u+=1,p.length>0)for(var f=function(){var n=[];32===t.getUint8(u)?(u+=1,p.forEach((function(t){if("C"===t.type)n.push(r.bytesToUTF8(new Uint8Array(e,u,t.length)).trim());else if("N"===t.type)n.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim(),10));else if("F"===t.type)n.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim()));else if("D"===t.type){var i=String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim();n.push(new Date(parseInt(i.substring(0,4),10),parseInt(i.substring(4,6),10)-1,parseInt(i.substring(6,8),10)))}u+=t.length})),c.push(n)):u+=s};c.length<o&&e.byteLength-u>s;)f()}var d=function(e){var t=e.fields,r=e.records,n=t.some((function(e){return"oid"===e.name.toLowerCase()}))?"OBJECTID":"OID",i=[{name:n,type:"esriFieldTypeOID",alias:"OID"}].concat(t.map((function(e){return{name:e.name,type:"esriFieldType"+e.typeName,alias:e.name}}))),o=i.map((function(e){return e.name})),a=[],s=0,l=0;return r.forEach((function(e){var t={};for(t[n]=s++,l=1;l<o.length;l++)t[o[l]]=e[l-1];a.push({attributes:t})})),{displayFieldName:"",fields:i,features:a}}({fields:p,records:c});return{header:l,fields:p,records:c,recordSet:d}},e}()}.apply(null,n))||(e.exports=i)},1871:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(0),r(11),r(1),r(8),r(32),r(76),r(9),r(15),r(6),r(36),r(2),r(1154),r(1241),r(248),r(1081),r(1242),r(1033),r(910)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,m,v,g,_,b){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._levelOffset=0,t._slices=null,t._tilemapCache=null,t.sourceJSON=null,t}return o(t,e),t.prototype.open=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,d,h,g,_,b,w,x,P,S,I,T,E,R,O,M,N,A,C;return r(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e&&e.signal,this.sourceJSON?(i={data:this.sourceJSON},[3,4]):[3,2];case 2:return[4,l(this.url,{responseType:"json",query:{f:"json"},signal:t})];case 3:i=r.sent(),r.label=4;case 4:if((n=i).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),o=n.data,this.sourceJSON=o,a=["jpg","jpeg","png","png8","png24","png32","mixed"],this.tileType=o.cacheType,null===this.tileType&&(a.indexOf(o.tileInfo.format.toLowerCase())>-1?this.tileType="Map":"lerc"===o.tileInfo.format.toLowerCase()?this.tileType="Elevation":this.tileType="Raster"),!o||!o.tileInfo)throw new u("imageserverraster:open","cannot initialize tiled image service");return this.datasetName=o.name,[4,this._fetchRasterInfo({signal:t})];case 5:if(s=r.sent(),!p.isSome(s))throw new u("image-server-raster:open","cannot initialize image service");if(c=m.fromJSON(o.tileInfo),d=s.extent,h=s.pixelSize,g=.5/s.width*h.x,_=void 0,b=void 0,w=c.lodAt(Math.max.apply(null,c.lods.map((function(e){return e.level})))),0!==o.maxScale&&("Raster"===this.tileType?(_=c.lods.filter((function(e){return e.resolution===h.x}))[0])||(_=c.lods.filter((function(e){return e.resolution>h.x})).sort((function(e,t){return e.resolution>t.resolution?1:-1}))[0]):(_=c.lods.filter((function(e){return Math.abs(e.scale-o.maxScale)<g}))[0])||(_=c.lods.filter((function(e){return e.scale>o.maxScale})).sort((function(e,t){return e.scale>t.scale?1:-1}))[0]),h.x=h.y=_.resolution,s.width=Math.ceil((d.xmax-d.xmin)/h.x-.1),s.height=Math.ceil((d.ymax-d.ymin)/h.y-.1)),_||(_=w),x=c.lodAt(Math.min.apply(null,c.lods.map((function(e){return e.level})))),0!==o.minScale&&"Raster"!==this.tileType&&(b=c.lods.filter((function(e){return Math.abs(e.scale-o.minScale)<g}))[0],this._levelOffset=b.level-x.level),b||(b=x),P=Math.max(h.x,h.y),(Math.abs(h.x-h.y)>g||!c.lods.some((function(e){return Math.abs(e.resolution-P)<g})))&&(h.x=h.y=_.resolution,s.width=Math.ceil((d.xmax-d.xmin)/h.x-.1),s.height=Math.ceil((d.ymax-d.ymin)/h.y-.1)),S=_.level-b.level,I=c.size,T=I[0],E=I[1],R=c.origin,O=h.x,M=h.y,N=[{minCol:Math.floor((d.xmin-R.x+.1*O)/T/O),maxCol:Math.floor((d.xmax-R.x-.1*O)/T/O),minRow:Math.floor((R.y-d.ymax+.1*M)/E/M),maxRow:Math.floor((R.y-d.ymin-.1*M)/E/M)}],S>0)for(A=0;A<S;A++)O*=2,M*=2,N.push({minCol:Math.floor((d.xmin-R.x+.1*O)/T/O),maxCol:Math.floor((d.xmax-R.x-.1*O)/T/O),minRow:Math.floor((R.y-d.ymax+.1*M)/E/O),maxRow:Math.floor((R.y-d.ymin-.1*M)/E/O)});return s.storageInfo=new y({blockWidth:c.size[0],blockHeight:c.size[1],pyramidBlockWidth:c.size[0],pyramidBlockHeight:c.size[1],compression:c.format,origin:c.origin,firstPyramidLevel:1,maximumPyramidLevel:S,tileInfo:c,blockBoundary:N}),this._set("rasterInfo",s),o.capabilities.toLowerCase().indexOf("tilemap")>-1&&(C={tileInfo:s.storageInfo.tileInfo,parsedUrl:f.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new v.TilemapCache({layer:C})),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,o){return void 0===o&&(o={}),i(this,void 0,void 0,(function(){var i,a,s,l,u,p,c,f,d,h,y,m,v,g,b,w,x,P,S,I,T,E;return r(this,(function(r){switch(r.label){case 0:return i=this.rasterInfo,a=i.storageInfo,s=i.extent,l=i.pixelSize,u=a.maximumPyramidLevel-e+this._levelOffset,p=this.url+"/tile/"+u+"/"+t+"/"+n,c=this._slices?{sliceId:o.sliceId||0}:null,[4,this.request({url:p,query:c,responseType:"array-buffer"},o.signal)];case 1:return(f=r.sent())?[4,this.decodePixelBlock(f,{width:a.tileInfo.size[0],height:a.tileInfo.size[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType})]:[2,null];case 2:return d=r.sent(),h=a.blockBoundary[e],"jpg"!==a.compression||n>h.minCol&&n<h.maxCol&&t>h.minRow&&t<h.maxRow||(y=a.origin,m=a.blockWidth,v=a.blockHeight,g=Math.pow(2,e),b=Math.round((s.xmin-y.x)/(l.x*g))%m,w=Math.round((s.xmax-y.x)/(l.x*g))%m,x=Math.round((y.y-s.ymax)/(l.x*g))%v,P=Math.round((y.y-s.ymin)/(l.x*g))%v,S=n===h.minCol?b:0,I=t===h.minRow?x:0,T=n===h.maxCol?w:m,E=t===h.maxRow?P:v,_.setValidBoundary(d,{x:S,y:I},{width:T-S,height:E-I})),[2,d]}}))}))},t.prototype.getSliceIndex=function(e){for(var t=e,r=0;r<this._slices.length;r++){var n=this._slices[r].multidimensionalDefinition;if(n.length===t.length&&!n.some((function(e){var r=t.filter((function(t){return e.variableName===t.variableName&&t.dimensionName===e.dimensionName}))[0];return r?(Array.isArray(e.values[0])?e.values[0][0]:e.values[0])!==(Array.isArray(r.values[0])?r.values[0][0]:r.values[0]):null})))return r}return null},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var n,i,o,a,s;return r(this,(function(r){switch(r.label){case 0:if(!this._tilemapCache)return[2,0];if(null===(n=this.identifyPixelLocation(e,0,t.datumTransformation)))return[2,null];i=0,o=this.rasterInfo.storageInfo.maximumPyramidLevel,a=o-i+this._levelOffset,s=n.srcLocation,r.label=1;case 1:if(!(a>=0))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._tilemapCache.fetchAvailability(a,n.row,n.col,t)];case 3:return"available"===r.sent()?[3,6]:[3,5];case 4:return r.sent(),[3,5];case 5:return a--,i++,null===(n=this.identifyPixelLocation(s,i,t.datumTransformation))?[2,null]:[3,1];case 6:return-1===a||null==n?[2,null]:[2,i]}}))}))},t.prototype._fetchRasterInfo=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,a,u,p,f,d,y,m,v,g=this;return r(this,(function(r){return t=this.sourceJSON,n=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),i=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),o=s.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference),"Map"===this.tileType?[2,new h({width:n,height:i,bandCount:3,extent:s.Extent.fromJSON(t.extent),spatialReference:o,pixelSize:new s.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:"u8",statistics:null})]:(a=e.slice,u=e.signal,p=!!t.hasRasterAttributeTable&&l(this.url+"/rasterAttributeTable",{query:{slice:a,f:"json"},signal:u}).then((function(e){return b.fromJSON(e.data)})).catch((function(){return null})),f=!!t.hasColormap&&l(this.url+"/colormap",{query:{slice:a,f:"json"},signal:u}).then((function(e){return e.data&&e.data.colormap})),d=!!t.hasHistograms&&l(this.url+"/histograms",{query:{slice:a,f:"json"},signal:u}).then((function(e){return e.data&&e.data.histograms})),y=l(this.url+"/keyProperties",{query:{f:"json"},signal:u}).then((function(e){return e.data})).catch((function(){})),m=!!t.hasMultidimensions&&l(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:u}).then((function(e){return e.data&&e.data.multidimensionalInfo})),v=!!t.hasMultidimensions&&l(this.url+"/slices",{query:{f:"json"},signal:u}).then((function(e){return e.data&&e.data.slices})).catch((function(){})),[2,c.all([p,f,d,y,m,v]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var a=0;a<t.minValues.length;a++)r.push({min:t.minValues[a],max:t.maxValues[a],avg:t.meanValues[a],stddev:t.stdvValues[a]})}return g._slices=e[5]||null,new h({width:n,height:i,bandCount:t.bandCount,extent:s.Extent.fromJSON(t.extent),spatialReference:o,pixelSize:new s.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))])}))}))},n([d.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),n([d.property()],t.prototype,"sourceJSON",void 0),n([d.property()],t.prototype,"tileType",void 0),n([d.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],t)}(d.declared(g))}.apply(null,n))||(e.exports=i)},1872:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(0),r(11),r(1),r(32),r(9),r(15),r(6),r(2),r(1111),r(1154),r(1241),r(1242),r(1873)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y){var m,v,g=(m=new ArrayBuffer(4),v=new Uint8Array(m),new Uint32Array(m)[0]=1,1===v[0]),_=new Map;_.set("Int8","s8"),_.set("UInt8","u8"),_.set("Int16","s16"),_.set("UInt16","u16"),_.set("Int32","s32"),_.set("UInt32","u32"),_.set("Float32","f32"),_.set("Float64","f32"),_.set("Double64","f32");var b=new Map;return b.set("lerc",".lrc"),b.set("none",".til"),b.set("deflate",".pzp"),b.set("jpeg",".jzp"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._storageIndex=null,t}return o(t,e),t.prototype.open=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,a,s,u,p,c,f,d,h,y,m,v,g,_,b,w,x,P;return r(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),t=e?l.unwrap(e.signal):null,[4,this.request({url:this.url,responseType:"xml"},t)];case 2:return n=r.sent(),i=this._parseHeader(n),o=i.rasterInfo,a=i.files,this._set("rasterInfo",o),this._files=a,[4,this.request({url:a.index,responseType:"array-buffer"},t)];case 3:for(s=r.sent(),this._storageIndex=this._parseIndex(s),u=0,p=-1,d=this.rasterInfo.storageInfo,h=d.blockWidth,y=d.blockHeight,m=d.compression,v=this.rasterInfo.storageInfo.pyramidScalingFactor,g=this.rasterInfo,_=g.width,b=g.height,w=g.bandCount,x=[],P="none"===m?1:w;u<this._storageIndex.length;)p++,c=Math.ceil(_/h/Math.pow(v,p)),f=Math.ceil(b/y/Math.pow(v,p)),u+=c*f*P*4,x.push({maxRow:f,maxCol:c,minCol:0,minRow:0});return this.rasterInfo.storageInfo.blockBoundary=x,p>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=p),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,o){return void 0===o&&(o={}),i(this,void 0,void 0,(function(){var i,a,s,l,p,f,d,h,y,m,v,g,_,b,w,x,P,S,I,T,E,R,O,M,N,A;return r(this,(function(r){switch(r.label){case 0:if(i=this.rasterInfo.storageInfo,a=i.blockWidth,s=i.blockHeight,l=i.blockBoundary,p=i.compression,!(f=l[e])||f.maxRow<t||f.maxCol<n||f.minRow>t||f.minCol>n)return[2,null];if(d=this.rasterInfo,h=d.bandCount,y=d.pixelType,m=this._getTileLocation(e,t,n),v=m.ranges,g=m.actualTileWidth,_=m.actualTileHeight,!v||0===v.length)return[2,null];if(0===v[0].from&&0===v[0].to)return A=new Uint8Array(a*s),[2,new c({width:a,height:s,pixels:null,mask:A,validPixelCount:0})];for(b=this.ioConfig.bandIds,w="none"===p?1:h,x=[],P=0,P=0;P<w;P++)(!b||b.indexOf[P]>-1)&&x.push(this.request({url:this._files.data,range:{from:v[P].from,to:v[P].to},responseType:"array-buffer"},o.signal));return[4,u.all(x)];case 1:for(S=r.sent(),I=S.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),T=new Uint8Array(I),E=0,P=0;P<w;P++)T.set(new Uint8Array(S[P]),E),E+=S[P].byteLength;return R="lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",[4,this.decodePixelBlock(T.buffer,{width:a,height:s,format:R,pixelType:y})];case 2:if(O=r.sent(),M=0,N=0,g!==a||_!==s)if(A=O.mask)for(P=0;P<s;P++)if(N=P*a,P<_)for(M=g;M<a;M++)A[N+M]=0;else for(M=0;M<a;M++)A[N+M]=0;else for(A=new Uint8Array(a*s),O.mask=A,P=0;P<_;P++)for(N=P*a,M=0;M<g;M++)A[N+M]=1;return[2,O]}}))}))},t.prototype._parseIndex=function(e){if(e.byteLength%16>0)throw"invalid array buffer must be multiples of 16";var t,r,n,i,o,a;if(g){for(r=new Uint8Array(e),i=new ArrayBuffer(e.byteLength),n=new Uint8Array(i),o=0;o<e.byteLength/4;o++)for(a=0;a<4;a++)n[4*o+a]=r[4*o+3-a];t=new Uint32Array(i)}else t=new Uint32Array(e);return t},t.prototype._getTileLocation=function(e,t,r){var n,i,o,a=this.rasterInfo.storageInfo,s=a.blockWidth,l=a.blockHeight,u=a.pyramidScalingFactor,p=a.compression,c=this.rasterInfo,f=c.width,d=c.height,h=c.bandCount,y="none"===p?1:h,m=0,v=0;for(o=0;o<e;o++)v=Math.pow(u,o),m+=(n=Math.ceil(f/s/v))*(i=Math.ceil(d/l/v));v=Math.pow(u,e),n=Math.ceil(f/s/v),i=Math.ceil(d/l/v),m+=t*n+r,m*=4*y;for(var g=this._storageIndex.subarray(m,m+4*y),_=0,b=0,w=[],x=0;x<y;x++)b=(_=g[4*x+0]*Math.pow(2,32)+g[4*x+1])+g[4*x+2]*Math.pow(2,32)+g[4*x+3],w.push({from:_,to:b});return{ranges:w,actualTileWidth:r<n-1?s:Math.ceil(f/v)-s*(n-1),actualTileHeight:t<i-1?l:Math.ceil(d/v)-l*(i-1)}},t.prototype._parseHeader=function(e){var t=y.getElement(e,"MRF_META/Raster");if(!t)throw new s("mrf:open","not a valid MRF format");var r=y.getElement(t,"Size"),n=parseInt(r.getAttribute("x"),10),i=parseInt(r.getAttribute("y"),10),o=parseInt(r.getAttribute("c"),10),l=(y.getElementValue(t,"Compression")||"none").toLowerCase();if(!l||-1===["none","lerc"].indexOf(l))throw new s("mrf:open","currently does not support compression "+l);var u=y.getElementValue(t,"DataType")||"UInt8",p=_.get(u);if(null==p)throw new s("mrf:open","currently does not support pixel type "+u);var c,h,m=y.getElement(t,"PageSize"),v=parseInt(m.getAttribute("x"),10),g=parseInt(m.getAttribute("y"),10),w=y.getElement(t,"DataValues");if(w&&null!=(h=w.getAttribute("NoData"))&&(c=h.trim().split(" ").map((function(e){return parseFloat(e)}))),y.getElement(e,"MRF_META/CachedSource"))throw new s("mrf:open","currently does not support MRF referencing other data files");var x=y.getElement(e,"MRF_META/GeoTags"),P=y.getElement(x,"BoundingBox");if(null==P)throw new s("mrf:open","missing node MRF_META/GeoTags/BoundingBox");var S,I=parseFloat(P.getAttribute("minx")),T=parseFloat(P.getAttribute("miny")),E=parseFloat(P.getAttribute("maxx")),R=parseFloat(P.getAttribute("maxy")),O=y.getElementValue(x,"Projection"),M=y.getElementValue(e,"datafile"),N=y.getElementValue(e,"IndexFile");"LOCAL_CS[]"!==O&&(S=new a.SpatialReference({wkt:O}));var A=new a.Extent(I,T,E,R);A.spatialReference=S;var C=y.getElement(e,"MRF_META/Rsets"),L=parseInt(C&&C.getAttribute("scale")||"2",10),F=new d({origin:new a.Point({x:A.xmin,y:A.ymax,spatialReference:S}),blockWidth:v,blockHeight:g,pyramidBlockWidth:v,pyramidBlockHeight:g,compression:l,pyramidScalingFactor:L}),j=new a.Point({x:(E-I)/n,y:(R-T)/i,spatialReference:S});return{rasterInfo:new f({width:n,height:i,extent:A,spatialReference:S,bandCount:o,pixelType:p,pixelSize:j,noDataValue:c,storageInfo:F}),files:{mrf:this.url,index:N||this.url.replace(".mrf",".idx"),data:M||this.url.replace(".mrf",b.get(l))}}},n([p.property()],t.prototype,"_files",void 0),n([p.property()],t.prototype,"_storageIndex",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),n([p.subclass("esri.layers.support.rasterIO.MRFRaster")],t)}(p.declared(h))}.apply(null,n))||(e.exports=i)},1873:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){if(!e||!t)return[];var r,i=t;if(t.indexOf("/")>-1?(i=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="",!(r=t?n(e,i).getElementsByTagNameNS("*",t):e.getElementsByTagNameNS("*",i))||0===r.length)return[];for(var o=[],a=0;a<r.length;a++)o.push(r[a]||r.item[a]);return o}function n(e,t){if(!e||!t)return null;var i=t;t.indexOf("/")>-1?(i=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";var o=r(e,i);return o.length>0?t?n(o[0],t):o[0]:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=r,t.getElement=n,t.getElementValue=function(e,t){var r,i=n(e,t);return i&&(r=i.textContent||i.nodeValue||i.innerText)?r.trim():null},t.getElementValues=function(e,t){for(var n,i=r(e,t),o=[],a=0;a<i.length;a++)(n=i[a].textContent||i[a].nodeValue||i[a].innerText)&&""!==(n=n.trim())&&o.push(n);return o}}.apply(null,n))||(e.exports=i)},1874:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(0),r(11),r(1),r(8),r(32),r(9),r(15),r(2),r(1154),r(1241),r(1242),r(1365),r(1367)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y){var m=function(e,t){var r=e.get(t);return r&&r.values},v=function(e,t){var r=e.get(t);return r&&r.values[0]};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._headerInfo=null,t._bufferSize=1048576,t}return o(t,e),t.prototype.open=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,p,d,y,m,v,g,_,b,w,x,P,S,I,T,E,R,O,M,N,A,C,L,F;return r(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e?u.unwrap(e.signal):null,[4,this.request({url:this.url,range:{from:0,to:this._bufferSize},responseType:"array-buffer"},t)];case 2:if(!(n=r.sent()))throw new l("tiffraster:open","failed to open url "+this.url);return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),i=h.parseSignature(n),o=i.littleEndian,p=i.firstIFD,d=[],[4,this.readIFDs(d,n,o,p,0,4,t)];case 3:if(r.sent(),y=h.getImageInfo(d),m=y.width,v=y.height,g=y.tileWidth,_=y.tileHeight,b=y.planes,w=y.pixelType,x=y.compression,P=y.firstPyramidLevel,S=y.maximumPyramidLevel,I=y.pyramidBlockWidth,T=y.pyramidBlockHeight,E=y.tileBoundary,R=y.metadata,O=s.Extent.fromJSON(y.extent),M=O.spatialReference,N=O?new s.Point({x:O.xmin,y:O.ymax,spatialReference:M}):new s.Point({x:0,y:0}),A=new f({blockWidth:g,blockHeight:_,pyramidBlockWidth:I,pyramidBlockHeight:T,compression:x,origin:N,firstPyramidLevel:P,maximumPyramidLevel:S,blockBoundary:E}),C=new s.Point({x:(O.xmax-O.xmin)/m,y:(O.ymax-O.ymin)/v,spatialReference:M}),L=R?{BandProperties:R.bandProperties,DataType:R.dataType}:null,F=new c({width:m,height:v,bandCount:b,pixelType:w,compression:x,pixelSize:C,storageInfo:A,spatialReference:M,keyProperties:L,extent:O,statistics:R?R.statistics:null}),this._set("rasterInfo",F),this._headerInfo=a({littleEndian:o,ifds:d},y),!this._headerInfo.isSupported)throw new l("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);return[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,o){return void 0===o&&(o={}),i(this,void 0,void 0,(function(){var i,a,s,l,u,p,c,f,d,h,y,m,v,g,_;return r(this,(function(r){switch(r.label){case 0:return!this._headerInfo&&this._headerInfo.isSupported?[2,null]:(i=this.rasterInfo.storageInfo.blockBoundary,a=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,s=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,!(l=i[e])||l.maxRow<t||l.maxCol<n||l.minRow>t||l.minCol>n?[2,null]:(u=this.getTileLocation(e,t,n))?(p=u.range,c=u.actualTileWidth,f=u.actualTileHeight,d=u.ifd,[4,this.request({url:this.url,range:p,responseType:"array-buffer"},o.signal)]):[2,null]);case 1:return h=r.sent(),[4,this.decodePixelBlock(h,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:d,offset:0,size:0},width:a,height:s,planes:null,pixelType:null})];case 2:if(y=r.sent(),c!==a||f!==s)if(_=y.mask)for(m=0;m<s;m++)if(g=m*a,m<f)for(v=c;v<a;v++)_[g+v]=0;else for(v=0;v<a;v++)_[g+v]=0;else for(_=new Uint8Array(a*s),y.mask=_,m=0;m<f;m++)for(g=m*a,v=0;v<c;v++)_[g+v]=1;return[2,y]}}))}))},t.prototype.readIFDs=function(e,t,n,o,a,s,l){return void 0===s&&(s=4),i(this,void 0,void 0,(function(){var i;return r(this,(function(r){switch(r.label){case 0:return o?o>=t.byteLength||o<0?[4,this.request({url:this.url,range:{from:o+a,to:o+a+this._bufferSize},responseType:"array-buffer"},l)]:[3,2]:[2,null];case 1:t=r.sent(),a=o+a,o=0,r.label=2;case 2:return[4,this.readIFD(t,n,o,a,y.TIFF_TAGS,s,l)];case 3:return i=r.sent(),e.push(i.ifd),i.nextIFD?[4,this.readIFDs(e,t,n,i.nextIFD-a,a,s,l)]:[2,null];case 4:return r.sent(),[2]}}))}))},t.prototype.readIFD=function(e,t,n,o,a,s,l){return void 0===a&&(a=y.TIFF_TAGS),void 0===s&&(s=4),i(this,void 0,void 0,(function(){var i,u,p,c,f,d,m,v;return r(this,(function(r){switch(r.label){case 0:return e?(i=h.parseIFD(e,t,n,o,a,s)).success?(u=[],i.ifd.forEach((function(e){e.values||u.push(e)})),u.length>0?(p=u.map((function(e){return e.offlineOffsetSize})),c=Math.min.apply(null,p.map((function(e){return e[0]}))),Math.min.apply(null,p.map((function(e){return e[0]+e[1]})))-c<=this._bufferSize?[4,this.request({url:this.url,range:{from:c,to:c+this._bufferSize},responseType:"array-buffer"},l)]:[3,2]):[3,2]):[3,5]:[2,null];case 1:e=r.sent(),o=c,u.forEach((function(r){return h.parseFieldValues(e,t,r,o)})),r.label=2;case 2:return i.ifd.has("GEOKEYDIRECTORY")?(f=i.ifd.get("GEOKEYDIRECTORY"),(d=f.values)&&d.length>4?(m=d[0]+"."+d[1]+"."+d[2],[4,this.readIFD(e,t,f.valueOffset+6-o,o,y.GEO_KEYS,2,l)]):[3,4]):[3,4];case 3:v=r.sent(),f.data=v.ifd,f.data&&f.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[m]}),r.label=4;case 4:return[2,i];case 5:return i.requiredBufferSize&&i.requiredBufferSize!==e.byteLength?[4,this.request({url:this.url,range:{from:o,to:o+i.requiredBufferSize+4},responseType:"array-buffer"},l)]:[3,7];case 6:return(e=r.sent()).byteLength<i.requiredBufferSize?[2,null]:[2,this.readIFD(e,t,0,o,y.TIFF_TAGS,4,l)];case 7:return[2]}}))}))},t.prototype.getTileLocation=function(e,t,r){var n=this.rasterInfo.storageInfo,i=n.firstPyramidLevel,o=n.blockBoundary,a=0===e?0:e-(i-1),s=this._headerInfo.ifds[a];if(!s)return null;var l=m(s,"TILEOFFSETS");if(void 0===l)return null;var u=m(s,"TILEBYTECOUNTS"),p=o[a],c=p.minRow,f=p.minCol,d=p.maxRow,h=p.maxCol;if(t>d||r>h||t<c||r<f)return null;var y=v(s,"IMAGEWIDTH"),g=v(s,"IMAGELENGTH"),_=v(s,"TILEWIDTH"),b=v(s,"TILELENGTH"),w=t*(h+1)+r,x=l[w],P=u[w];return null==x||null==P?null:{range:{from:x,to:x+P-1},ifd:s,actualTileWidth:r===h?y%_:_,actualTileHeight:t===d?g%b:b}},n([p.property()],t.prototype,"_files",void 0),n([p.property()],t.prototype,"_headerInfo",void 0),n([p.property()],t.prototype,"_bufferSize",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),n([p.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],t)}(p.declared(d))}.apply(null,n))||(e.exports=i)},830:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(25),r(5),r(97),r(99),r(840),r(839)],void 0===(i=function(e,t,r,n,i,o,a,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=i.getLogger("esri.renderers.support.utils"),p={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},c={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function f(e,t,r){var n="";return 0===t?n="< ":t===r&&(n="> "),n+e}function d(e){var t=e.minValue,r=e.maxValue,n=e.isFirstBreak?"":"> ",i="percent-of-total"===e.normalizationType?"%":"";return n+(t=null==t?"":s.format(t))+i+" – "+(r=null==r?"":s.format(r))+i}function h(e,t){return"normalizationField"in e&&e.normalizationField?{type:"normalized-field",field:e.field,normalizationField:e.normalizationField}:"field"in e&&e.field?y(e.field):"valueExpression"in e&&e.valueExpression?{type:"expression",expression:e.valueExpression,title:e.valueExpressionTitle,returnType:t}:null}function y(e){return{type:"field",field:e}}t.meterIn={inches:o.convertUnit(1,"meters","inches"),feet:o.convertUnit(1,"meters","feet"),"us-feet":o.convertUnit(1,"meters","us-feet"),yards:o.convertUnit(1,"meters","yards"),miles:o.convertUnit(1,"meters","miles"),"nautical-miles":o.convertUnit(1,"meters","nautical-miles"),millimeters:o.convertUnit(1,"meters","millimeters"),centimeters:o.convertUnit(1,"meters","centimeters"),decimeters:o.convertUnit(1,"meters","decimeters"),meters:o.convertUnit(1,"meters","meters"),kilometers:o.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/o.lengthToDegrees(1,"meters")},t.timelineDateFormatOptions=a.convertDateFormatToIntlOptions("short-date"),t.createColorStops=function(e){var t=e.values,r=e.colors,n=e.labelIndexes,i=e.isDate,o=e.dateFormatOptions;return t.map((function(e,u){var p=null;if(!n||n.indexOf(u)>-1){var c;(c=i?a.formatDate(e,o):s.format(e))&&(p=f(c,u,t.length-1))}return new l({value:e,color:r[u],label:p})}))},t.updateColorStops=function(e){for(var t=e.stops,r=e.changes,n=e.isDate,i=e.dateFormatOptions,o=t.map((function(e){return e.value})),l=[],u=0,p=r;u<p.length;u++){var c=p[u];l.push(c.index),o[c.index]=c.value}var d=s.round(o,{indexes:l});t.forEach((function(e,r){if(e.value=o[r],null!=e.label){var l,u=null;(l=n?a.formatDate(d[r],i):s.format(d[r]))&&(u=f(l,r,t.length-1)),e.label=u}}))},t.createClassBreakLabel=d,t.setLabelsForClassBreaks=function(e){var t=e.classBreakInfos,r=e.normalizationType,n=[];if(t&&t.length)if("standard-deviation"!==e.classificationMethod)if(e.round){n.push(t[0].minValue);for(var i=0,o=t;i<o.length;i++){var a=o[i];n.push(a.maxValue)}n=s.round(n),t.forEach((function(e,t){e.label=d({minValue:0===t?n[0]:n[t],maxValue:n[t+1],isFirstBreak:0===t,normalizationType:r})}))}else t.forEach((function(e,t){e.label=d({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===t,normalizationType:r})}));else u.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.")},t.updateClassBreak=function(e){if("standard-deviation"!==e.classificationMethod){var t=e.classBreaks,r=e.change,n=r.index,i=r.value,o=t.length,a=-1,s=-1;0===n?a=n:n===o?s=n-1:(s=n-1,a=n);var l=e.normalizationType,p=null;a>-1&&a<o&&((p=t[a]).minValue=i,p.label=d({minValue:p.minValue,maxValue:p.maxValue,isFirstBreak:0===a,normalizationType:l})),s>-1&&s<o&&((p=t[s]).maxValue=i,p.label=d({minValue:p.minValue,maxValue:p.maxValue,isFirstBreak:0===s,normalizationType:l}))}else u.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.")},t.calculateDateFormatInterval=function(e){for(var t=e.map((function(e){return new Date(e)})),r=t.length,n=1/0,i=null,o=0;o<r-1;o++){for(var a=t[o],s=[],l=1/0,u=null,c=o+1;c<r;c++){var f=t[c],d=(a.getFullYear()!==f.getFullYear()?"year":a.getMonth()!==f.getMonth()&&"month")||a.getDate()!==f.getDate()&&"day"||a.getHours()!==f.getHours()&&"hour"||a.getMinutes()!==f.getMinutes()&&"minute"||a.getSeconds()!==f.getSeconds()&&"second"||"millisecond",h=p[d];h<l&&(l=h,u=d),s.push(d)}l<n&&(n=l,i=u)}return i},t.createUniqueValueLabel=function(e){var t=e.value,r=e.domain,n=e.fieldInfo,i=e.dateFormatInterval,o=String(t),l=r&&"codedValues"in r&&r.codedValues?r.getName(t):null;return l?o=l:"number"==typeof t&&(o=n&&"date"===n.type?a.formatDate(t,i&&a.convertDateFormatToIntlOptions(c[i])):s.format(t)),o},t.getAttributes=function(e,t){var r=[];if("class-breaks"===e.type||"heatmap"===e.type)r.push(h(e,"number"));else if("unique-value"===e.type){var i=e.uniqueValueInfos[0],o=null;if(i&&i.value){var a=typeof e.uniqueValueInfos[0].value;"string"!==a&&"number"!==a||(o=a)}r.push(h(e,o)),[e.field2,e.field3].forEach((function(e){return e&&r.push(y(e))}))}else"dot-density"===e.type&&e.attributes.forEach((function(e){return r.push(h(e,"number"))}));var s=t?t(e):"visualVariables"in e?e.visualVariables:null;return s&&s.forEach((function(e){return r.push(h(e,"number"))})),n.unique(r.filter(Boolean),(function(e,t){return"field"===e.type&&"field"===t.type?e.field===t.field:"normalized-field"===e.type&&"normalized-field"===t.type?e.field===t.field&&e.normalizationField===t.normalizationField:"expression"===e.type&&"expression"===t.type&&e.expression===t.expression}))}}.apply(null,n))||(e.exports=i)},839:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(38),r(4),r(2),r(17)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.color=null,r.label=null,r.value=null,r}var o;return r(t,e),o=t,t.prototype.writeValue=function(e,t,r){t[r]=null==e?0:e},t.prototype.clone=function(){return new o({color:this.color&&this.color.clone(),label:this.label,value:this.value})},n([a.property({type:i,json:{type:[s.Integer],write:!0}})],t.prototype,"color",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([a.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"value",void 0),n([a.writer("value")],t.prototype,"writeValue",null),o=n([a.subclass("esri.renderers.visualVariables.support.ColorStop")],t)}(a.declared(o.JSONSupport))}.apply(null,n))||(e.exports=i)},840:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(245)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/^-?(\d+)(\.(\d+))?$/i;function i(e,t){return e-t}function o(e,t){var r,n;return(r=Number(e.toFixed(t)))<e?n=r+1/Math.pow(10,t):(n=r,r-=1/Math.pow(10,t)),[r=Number(r.toFixed(t)),n=Number(n.toFixed(t))]}function a(e,t,r,n,i){var o=l(e,t,r,n),a=null==o.previous||o.previous<=i,s=null==o.next||o.next<=i;return a&&s||o.previous+o.next<=2*i}function s(e){var t=String(e),r=t.match(n);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(t.toLowerCase().indexOf("e")>-1){var i=t.split("e"),o=i[0],a=i[1];if(o&&a){var l=Number(o),u=Number(a),p=u>0;p||(u=Math.abs(u));var c=s(l);return p?(c.integer+=u,u>c.fractional?c.fractional=0:c.fractional-=u):(c.fractional+=u,u>c.integer?c.integer=1:c.integer-=u),c}}return{integer:0,fractional:0}}function l(e,t,r,n){var i,o={previous:null,next:null};if(null!=r){var a=t-r-(i=e-r);o.previous=Math.floor(Math.abs(100*a/i))}null!=n&&(a=n-t-(i=n-e),o.next=Math.floor(Math.abs(100*a/i)));return o}t.numDigits=s,t.percentChange=l,t.round=function(e,t){void 0===t&&(t={});var r=e.slice(0),n=t.tolerance,l=void 0===n?2:n,u=t.strictBounds,p=void 0!==u&&u,c=t.indexes,f=void 0===c?r.map((function(e,t){return t})):c;f.sort(i);for(var d=0;d<f.length;d++){var h=f[d],y=r[h],m=0===h?null:r[h-1],v=h===r.length-1?null:r[h+1],g=s(y).fractional;if(g){for(var _=0,b=!1,w=void 0;_<=g&&!b;){var x=o(y,_);b=a(y,w=p&&0===d?x[1]:x[0],m,v,l),_++}b&&(r[h]=w)}}return r};var u={maximumFractionDigits:20};t.format=function(e){return r.formatNumber(e,u)}}.apply(null,n))||(e.exports=i)},841:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(36),r(33),r(141),r(895),r(253)],void 0===(i=function(e,t,r,n,i,o,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;i.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,n){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||o.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},n))&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,value:!0,json:{read:{source:"showLabels"},write:{target:"showLabels"}}},t.url={type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writer:n.write}}},t.legendEnabled={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}},t.elevationInfo={value:null,type:a,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},t.readOnlyService=function(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}},t.opacity={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0}}}},t.opacityDrawingInfo=r({},t.opacity,{json:r({},t.opacity.json,{origins:{"web-document":r({},t.opacity.json.origins["web-document"],{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?s.transparencyToOpacity(t.layerDefinition.drawingInfo.transparency):void 0:s.transparencyToOpacity(t.drawingInfo.transparency)}}})})}.apply(null,n))||(e.exports=i)},859:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(9),r(6),r(2),r(104),r(141),r(841)],void 0===(i=function(e,t,n,i,o,a,s,l,u,p){Object.defineProperty(t,"__esModule",{value:!0}),t.OperationalLayer=function(e){return function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="Layer",t}return n(r,e),r.prototype.writeListMode=function(e,t,r,n){(n&&"ground"===n.layerContainerType||e&&u.willPropertyWrite(this,r,{},n))&&(t[r]=e)},r.prototype.writeTitle=function(e,t){t.title=e||"Layer"},r.prototype.writeOperationalLayerType=function(e,t){e&&(t.layerType=e)},r.prototype.read=function(e,t){var r=this,n=arguments;t&&(t.layer=this),l.readLoadable(this,e,(function(t){return r.inherited(n,[e,t])}),t)},r.prototype.write=function(e,r){if(r&&r.origin){var n=r.origin+"/"+(r.layerContainerType||"operational-layers"),i=t.supportedTypes[n],a=i&&i[this.operationalLayerType];if("write"!==a&&"readwrite"!==a)return r.messages&&r.messages.push(new o("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+n+"'",{layer:this})),null}var s=this.inherited(arguments,[e,r]),l=!!r&&!!r.messages&&!!r.messages.filter((function(e){return e instanceof o&&"web-document-write:property-required"===e.name})).length;return!this.url&&l?null:s},i([s.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],r.prototype,"id",void 0),i([s.property({json:{write:{ignoreOrigin:!0}}})],r.prototype,"listMode",void 0),i([s.writer("listMode")],r.prototype,"writeListMode",null),i([s.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],r.prototype,"title",void 0),i([s.writer("title")],r.prototype,"writeTitle",null),i([s.property({type:String,readOnly:!0,json:{write:{target:"layerType",ignoreOrigin:!0}}})],r.prototype,"operationalLayerType",void 0),i([s.writer("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),i([s.property(p.opacity)],r.prototype,"opacity",void 0),i([s.property({type:Boolean,json:{read:{source:"visibility"},write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],r.prototype,"visible",void 0),i([s.subclass("esri.layers.mixins.OperationalLayer")],r)}(s.declared(e))},t.typeModuleMap={ArcGISFeatureLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(6),r.e(98)]).then(function(){var t=[r(907)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISImageServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(3),r.e(7),r.e(11),r.e(63)]).then(function(){var t=[r(1014)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISImageServiceVectorLayer:function(){return a.resolve(null)},ArcGISMapServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(9),r.e(80)]).then(function(){var t=[r(1009)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISSceneServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(6),r.e(85)]).then(function(){var t=[r(1017)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISStreamLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(22)]).then(function(){var t=[r(1021)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISTiledElevationServiceLayer:function(){return a.create((function(e){return r.e(14).then(function(){var t=[r(771)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISTiledImageServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(9),r.e(28)]).then(function(){var t=[r(893)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},ArcGISTiledMapServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(9),r.e(28)]).then(function(){var t=[r(893)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},BingMapsAerial:function(){return a.create((function(e){return r.e(17).then(function(){var t=[r(843)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},BingMapsRoad:function(){return a.create((function(e){return r.e(17).then(function(){var t=[r(843)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},BingMapsHybrid:function(){return a.create((function(e){return r.e(17).then(function(){var t=[r(843)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},BuildingSceneLayer:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(20)]).then(function(){var t=[r(1018)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},CSV:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(6),r.e(87)]).then(function(){var t=[r(1012)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},GeoRSS:function(){return a.create((function(e){return r.e(103).then(function(){var t=[r(1013)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},GroupLayer:function(){return a.create((function(e){return r.e(112).then(function(){var t=[r(1010)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},IntegratedMeshLayer:function(){return a.create((function(e){return r.e(96).then(function(){var t=[r(1015)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},KML:function(){return a.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(27)]).then(function(){var t=[r(1019)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},OpenStreetMap:function(){return a.create((function(e){return r.e(97).then(function(){var t=[r(1016)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},PointCloudLayer:function(){return a.create((function(e){return r.e(21).then(function(){var t=[r(1020)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},VectorTileLayer:function(){return a.create((function(e){return Promise.all([r.e(15),r.e(25)]).then(function(){var t=[r(1022)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},WebTiledLayer:function(){return a.create((function(e){return r.e(99).then(function(){var t=[r(1007)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},WFS:function(){return a.resolve(null)},WMS:function(){return a.create((function(e){return r.e(30).then(function(){var t=[r(1023)];e.apply(null,t)}.bind(this)).catch(r.oe)}))},RasterDataLayer:function(){return a.resolve(null)},RasterDataElevationLayer:function(){return a.resolve(null)}},t.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",KML:"readwrite",RasterDataLayer:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite",RasterDataElevationLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WFS:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}}.apply(null,n))||(e.exports=i)},862:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(10),r(11),r(9),r(5),r(6),r(36),r(2),r(63),r(78)],void 0===(i=function(e,t,n,i,o,a,s,l,u,p,c,f,d){Object.defineProperty(t,"__esModule",{value:!0});var h=l.getLogger("esri.layers.mixins.PortalLayer");t.PortalLayer=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"portalItem",{set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))},enumerable:!0,configurable:!0}),t.prototype.readPortalItem=function(e,t,r){if(t.itemId)return new d({id:t.itemId,portal:r&&r.portal})},t.prototype.writePortalItem=function(e,t){e&&e.id&&(t.itemId=e.id)},t.prototype.loadFromPortal=function(e,t){return a(this,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.create((function(e){return r.e(105).then(function(){var t=[r(1041)];e.apply(null,t)}.bind(this)).catch(r.oe)}))];case 2:return n=o.sent(),u.throwIfAborted(t),[4,n.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),h.warn("Failed to load layer ("+this.title+", "+this.id+") portal item ("+this.portalItem.id+")\n  "+i),i;case 5:return[2]}}))}))},t.prototype.read=function(e,t){var r=arguments;t&&(t.layer=this),this.inherited(r)},t.prototype.write=function(e,t){var r=t&&t.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.getDefault());return r&&n&&!p.hasSamePortal(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new s("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},i([c.property({type:d})],t.prototype,"portalItem",null),i([c.reader("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),i([c.writer("portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),i([c.subclass("esri.layers.mixins.PortalLayer")],t)}(c.declared(e))}}.apply(null,n))||(e.exports=i)},895:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(10),r(11),r(18),r(4),r(15),r(2),r(897),r(898)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c){var f=a.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d=new a.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=null,t}var i;return r(t,e),i=t,t.prototype.readFeatureExpressionInfo=function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0},t.prototype.writeFeatureExpressionInfo=function(e,t,r,n){t[r]=e.write(null,n),"0"===e.expression&&(t.featureExpression={value:0})},Object.defineProperty(t.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):l.isSome(this.offset)||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unit",{set:function(e){this._set("unit",e)},enumerable:!0,configurable:!0}),t.prototype.write=function(){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null},t.prototype.clone=function(){return new i({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})},n([u.property({type:p,json:{write:!0}})],t.prototype,"featureExpressionInfo",void 0),n([u.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],t.prototype,"readFeatureExpressionInfo",null),n([u.writer("featureExpressionInfo",{featureExpressionInfo:{type:p},"featureExpression.value":{type:[0]}})],t.prototype,"writeFeatureExpressionInfo",null),n([u.property({type:f.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:f.jsonValues,read:f.read,write:{writer:f.write,isRequired:!0}}})],t.prototype,"mode",null),n([u.property({type:Number,json:{write:!0}})],t.prototype,"offset",void 0),n([u.property({type:c.supportedUnits,json:{type:String,read:d.read,write:d.write}})],t.prototype,"unit",null),i=n([u.subclass("esri.layers.support.ElevationInfo")],t)}(u.declared(s.JSONSupport))}.apply(null,n))||(e.exports=i)},897:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(10),r(11),r(4),r(2),r(140)],void 0===(i=function(e,t,r,n,i,o,a,s,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return r(t,e),a=t,t.prototype.collectRequiredFields=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,l.collectArcadeFieldNames(e,t,this.expression)]}))}))},t.prototype.clone=function(){return new a({expression:this.expression,title:this.title})},n([s.property({type:String,json:{write:!0}})],t.prototype,"expression",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),a=n([s.subclass("esri.layers.support.FeatureExpressionInfo")],t)}(s.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},898:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(830)],void 0===(i=function(e,t,r){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.supportsUnit=function(e){return null!=r.meterIn[e]},t.getMetersPerUnit=function(e){return 1/(r.meterIn[e]||1)},t.supportedUnits=((n=Object.keys(r.meterIn)).sort(),n)}.apply(null,n))||(e.exports=i)},901:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(2)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleRangeLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minScale=0,t.maxScale=0,t}return r(t,e),Object.defineProperty(t.prototype,"scaleRangeId",{get:function(){return this.minScale+","+this.maxScale},enumerable:!0,configurable:!0}),n([i.property({type:Number,json:{write:!0}})],t.prototype,"minScale",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxScale",void 0),n([i.property({readOnly:!0,dependsOn:["minScale","maxScale"]})],t.prototype,"scaleRangeId",null),n([i.subclass("esri.layers.mixins.ScaleRangeLayer")],t)}(i.declared(e))}}.apply(null,n))||(e.exports=i)}}]);