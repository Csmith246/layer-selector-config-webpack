(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/PrintTask":787,"esri/renderers/support/utils":835,"esri/renderers/visualVariables/support/ColorStop":844,"esri/renderers/support/numberUtils":845,"esri/layers/support/Field":859,"esri/tasks/support/QuantizationParameters":861,"esri/renderers/visualVariables/support/sizeVariableUtils":897,"esri/tasks/support/Query":899,"esri/geometry/support/normalizeUtils":901,"esri/tasks/support/StatisticDefinition":904,"esri/tasks/support/FeatureSet":915,"esri/tasks/geometry/cut":1010,"esri/tasks/geometry/simplify":1011,"esri/tasks/Task":1051,"esri/renderers/visualVariables/support/visualVariableUtils":1064,"dojox/gfx/_base":1146,"esri/tasks/support/GPMessage":1176,"dojox/gfx/matrix":1185,"dojo/dom-construct":1257,"dojo/dom-style":1258,"dojo/dom-geometry":1259,"dojo/_base/Color":1348,"dojox/gfx/shape":1349,"dojox/gfx/canvas":1499,"dojo/dom-attr":1500,"dojo/dom-prop":1501,"dojo/_base/connect":1502,"dojo/topic":1503,"dojo/_base/event":1504,"dojo/mouse":1505,"dojo/keys":1506,"dojox/gfx/path":1507,"dojox/gfx/arc":1508,"dojox/gfx/decompose":1509,"dojox/gfx/bezierutils":1510,"esri/tasks/Geoprocessor":1511,"esri/layers/support/MapImage":1512,"esri/tasks/support/DataFile":1513,"esri/tasks/support/JobInfo":1514,"esri/tasks/support/LinearUnit":1515,"esri/tasks/support/ParameterValue":1516,"esri/tasks/support/RasterData":1517,"esri/tasks/support/fileFormat":1518,"esri/tasks/support/layoutTemplate":1519,"esri/tasks/support/printTaskUtils":1520,"esri/tasks/support/PrintTemplate":1521})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[58,98,128],{1010:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7),r(11),r(10),r(32),r(76),r(37),r(36)],void 0===(i=function(e,t,r,n,i,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,u,c){return n(this,void 0,void 0,(function(){var n,p,h,d,f,y,m;return i(this,(function(i){switch(i.label){case 0:return n="string"==typeof e?s.urlToObject(e):e,p=t[0].spatialReference,h=r({},c,{query:r({},n.query,{f:"json",sr:JSON.stringify(p),target:JSON.stringify({geometryType:l.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(u)})}),[4,o(n.path+"/cut",h)];case 1:return d=i.sent(),f=d.data,y=f.cutIndexes,m=f.geometries,[2,{cutIndexes:y,geometries:(void 0===m?[]:m).map((function(e){return a.fromJSON(e).set(p)}))}]}}))}))}}.apply(null,n))||(e.exports=i)},1011:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7),r(11),r(10),r(76),r(37),r(36)],void 0===(i=function(e,t,r,n,i,a,o,s){function l(e){return{geometryType:s.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function u(e,t,r){var n=s.getGeometryType(t);return e.map((function(e){var t=n.fromJSON(e);return t.spatialReference=r,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,c){return n(this,void 0,void 0,(function(){var n,p,h,d;return i(this,(function(i){switch(i.label){case 0:return n="string"==typeof e?o.urlToObject(e):e,p=t[0].spatialReference,h=s.getJsonType(t[0]),d=r({},c,{query:r({},n.query,{f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(l(t))})}),[4,a(n.path+"/simplify",d)];case 1:return[2,u(i.sent().data,h,p)]}}))}))}}.apply(null,n))||(e.exports=i)},1051:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(103),r(7),r(8),r(37),r(2)],void 0===(i=function(e,t,r,n,i,a,o,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.requestOptions=null,r.url=null,r}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"!=typeof e?e:a({url:e},t)},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0}),t.prototype._parseUrl=function(e){return e?s.urlToObject(e):null},t.prototype._encode=function(e,t,r){var n={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){n[i]=[];for(var o=0;o<a.length;o++)n[i][o]=this._encode(a[o])}else if("object"==typeof a)if(a.toJSON){var s=a.toJSON(r&&r[i]);n[i]=t?s:JSON.stringify(s)}else n[i]=t?a:JSON.stringify(a);else n[i]=a}return n},n([l.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),n([l.property()],t.prototype,"requestOptions",void 0),n([l.property({type:String})],t.prototype,"url",void 0),n([l.subclass("esri.tasks.Task")],t)}(l.declared(o))}.apply(null,n))||(e.exports=i)},1064:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(40),r(242),r(29),r(5),r(16),r(835),r(897)],void 0===(i=function(e,t,r,n,i,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),c=new n,p=Math.PI;function h(e,t,n){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.ColorVariable"===i.declaredClass){var a="number"==typeof t,s=a?null:t,l=s&&s.attributes,c=a?t:null,p=i.field,h=i.cache,d=h.ipData,f=h.hasExpression,y=i.cache.compiledFunc;if(!p&&!f){var m=i.stops;return m&&m[0]&&m[0].color}if("number"!=typeof c)if(f){if(!o.isSome(n)||!o.isSome(n.arcade))return void u.error("Use of arcade expressions requires an arcade context");var v={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},g=n.arcade.arcadeUtils,b=g.getViewInfo(v),S=g.createExecContext(s,b);if(!y){var _=g.createSyntaxTree(i.valueExpression);y=g.createFunction(_),i.cache.compiledFunc=y}c=g.executeFunction(y,S)}else l&&(c=l[p]);var w=i.normalizationField,T=l?parseFloat(l[w]):void 0;if(null!=c&&(!w||a||!isNaN(T)&&0!==T)){isNaN(T)||a||(c/=T);var P=x(c,d);if(P){var C=P[0],M=P[1],N=C===M?i.stops[C].color:r.blendColors(i.stops[C].color,i.stops[M].color,P[2],o.isSome(n)?n.color:void 0);return new r(N)}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function d(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var i="number"==typeof t,a=i?null:t,s=a&&a.attributes,l=i?t:null,c=n.field,p=n.cache,h=p.ipData,d=p.hasExpression,f=n.cache.compiledFunc;if(!c&&!d){var y=n.stops;return y&&y[0]&&y[0].opacity}if("number"!=typeof l)if(d){if(o.isNone(r)||o.isNone(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,g=v.getViewInfo(m),b=v.createExecContext(a,g);if(!f){var S=v.createSyntaxTree(n.valueExpression);f=v.createFunction(S),n.cache.compiledFunc=f}l=v.executeFunction(f,b)}else s&&(l=s[c]);var _=n.normalizationField,w=s?parseFloat(s[_]):void 0;if(null!=l&&(!_||i||!isNaN(w)&&0!==w)){isNaN(w)||i||(l/=w);var T=x(l,h);if(T){var P=T[0],C=T[1];if(P===C)return n.stops[P].opacity;var M=n.stops[P].opacity;return M+(n.stops[C].opacity-M)*T[2]}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function f(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var i=n.axis||"heading",a="heading"===i&&"arithmetic"===n.rotationType?90:0,s="heading"===i&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,p=n.field,h=n.cache.hasExpression,d=n.cache.compiledFunc,f=0;if(!p&&!h)return f;if(h){if(o.isNone(r)||o.isNone(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},m=r.arcade.arcadeUtils,v=m.getViewInfo(y),g=m.createExecContext(l,v);if(!d){var x=m.createSyntaxTree(n.valueExpression);d=m.createFunction(x),n.cache.compiledFunc=d}f=m.executeFunction(d,g)}else c&&(f=c[p]||0);return"number"!=typeof f||isNaN(f)?null:a+s*f}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function y(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var i=g(function(e,t,r){var n="number"==typeof t,i=n?null:t,a=i&&i.attributes,s=n?t:null,c=e.cache.isScaleDriven,p=e.cache.compiledFunc;if(c){var h=o.isSome(r)?r.scale:void 0,d=o.isSome(r)?r.view:void 0;s=null==h||d&&"3d"===d.type?function(e){var t=null,r=null,n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):h}else if(!n)switch(e.inputValueType){case"expression":if(o.isNone(r)||o.isNone(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,m=y.getViewInfo(f),v=y.createExecContext(i,m);if(!p){var g=y.createSyntaxTree(e.valueExpression);p=y.createFunction(g),e.cache.compiledFunc=p}s=y.executeFunction(p,v);break;case"field":a&&(s=a[e.field]);break;case"unknown":s=null}if(!l.isValidNumber(s))return null;if(n||!e.normalizationField)return s;var x=a?parseFloat(a[e.normalizationField]):null;return l.isValidNumber(x)&&0!==x?s/x:null}(n,t,r),n,t,r,n.cache.ipData);return null==i||isNaN(i)?0:i}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:l.isSizeVariable(e)?y(e,t,r):l.isValidNumber(e)?e:null}function v(e,t,r){return l.isValidNumber(r)&&e>r?r:l.isValidNumber(t)&&e<t?t:e}function g(e,t,r,n,i){switch(t.transformationType){case"additive":return function(e,t,r,n){return e+(m(t.minSize,r,n)||t.minDataValue)}(e,t,r,n);case"constant":return function(e,t,r){var n=e.stops,i=n&&n.length&&n[0].size;return null==i&&(i=e.minSize),m(i,t,r)}(t,r,n);case"clamped-linear":return function(e,t,r,n){var i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=m(t.minSize,r,n),s=m(t.maxSize,r,n),l=o.isSome(n)?n.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&l){var u="circle"===l,c=u?p*Math.pow(a/2,2):a*a,h=c+i*((u?p*Math.pow(s/2,2):s*s)-c);return u?2*Math.sqrt(h/p):Math.sqrt(h)}return a+i*(s-a)}(e,t,r,n);case"proportional":return function(e,t,r,n){var i=o.isSome(n)?n.shape:void 0,a=e/t.minDataValue,s=m(t.minSize,r,n),l=m(t.maxSize,r,n);return v("circle"===i?2*Math.sqrt(a*Math.pow(s/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(a*Math.pow(s,2)):a*s,s,l)}(e,t,r,n);case"stops":return function(e,t,r,n,i){var a=x(e,i),o=a[0],s=a[1],l=a[2];if(o===s)return m(t.stops[o].size,r,n);var u=m(t.stops[o].size,r,n);return u+(m(t.stops[s].size,r,n)-u)*l}(e,t,r,n,i);case"real-world-size":return function(e,t,r,n){var i=(o.isSome(n)&&n.resolution?n.resolution:1)*s.meterIn[t.valueUnit],a=m(t.minSize,r,n),l=m(t.maxSize,r,n),u=t.valueRepresentation;return v("area"===u?2*Math.sqrt(e/p)/i:"radius"===u||"distance"===u?2*e/i:e/i,a,l)}(e,t,r,n);case"identity":return e;case"unknown":return null}}function x(e,t){if(t){var r=0,n=t.length-1;return t.some((function(t,i){return e<t?(n=i,!0):(r=i,!1)})),[r,n,(e-t[r])/(t[n]-t[r])]}}t.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,t.getColor=h,t.getOpacity=d,t.getRotationAngle=f,t.getSize=y,t.getSizeFromNumberOrVariable=m,t.getSizeForValue=g,t.getSizeRangeAtScale=function(e,t,r){var n=e.cache.isScaleDriven,i=r&&"3d"===r.type;if(!(n&&i||t))return null;var a={scale:t,view:r},o=m(e.minSize,c,a),s=m(e.maxSize,c,a);if(null!=o||null!=s){if(o>s){var l=s;s=o,o=l}return{minSize:o,maxSize:s}}},t.getVisualVariableValues=function(e,t,r){if(e.visualVariables){for(var n=[],i=[],a=[],o=[],s=[],l=0,u=e.visualVariables;l<u.length;l++){var c=u[l];switch(c.type){case"color":i.push(c);break;case"opacity":a.push(c);break;case"rotation":s.push(c);break;case"size":o.push(c)}}return i.forEach((function(e){var i=h(e,t,r);n.push({variable:e,value:i})})),a.forEach((function(e){var i=d(e,t,r);n.push({variable:e,value:i})})),s.forEach((function(e){var i=f(e,t,r);n.push({variable:e,value:i})})),o.forEach((function(e){var i=y(e,t,r);n.push({variable:e,value:i})})),n.filter((function(e){return null!=e.value}))}},t.getAllSizes=function(e,t,r){for(var n=["proportional","proportional","proportional"],a=0,o=e;a<o.length;a++){var s=o[a],l=s.useSymbolValue?"symbol-value":y(s,t,r);switch(s.axis){case"width":n[0]=l;break;case"depth":n[1]=l;break;case"height":n[2]=l;break;case"width-and-depth":n[0]=l,n[1]=l;break;case"all":case void 0:case null:n[0]=l,n[1]=l,n[2]=l;break;default:i.neverReached(s.axis)}}return n}}.apply(null,n))||(e.exports=i)},1146:function(e,t,r){var n,i;n=[r(23),r(22),r(1348),r(281),r(167),r(55),r(164),r(1257),r(1259)],void 0===(i=function(e,t,r,n,i,a,o,s,l){var u=t.getObject("dojox.gfx",!0),c=u._base={};u._hasClass=function(e,t){var r=e.getAttribute("className");return r&&(" "+r+" ").indexOf(" "+t+" ")>=0},u._addClass=function(e,t){var r=e.getAttribute("className")||"";(!r||(" "+r+" ").indexOf(" "+t+" ")<0)&&e.setAttribute("className",r+(r?" ":"")+t)},u._removeClass=function(e,t){var r=e.getAttribute("className");r&&e.setAttribute("className",r.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),"$1$2"))},c._getFontMeasurements=function(){var e,t,r={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};n("ie")&&((t=i.doc.documentElement.style.fontSize||"")||(i.doc.documentElement.style.fontSize="100%"));var a=s.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},i.body());for(e in r)a.style.fontSize=e,r[e]=16*Math.round(12*a.offsetHeight/16)/12/1e3;return n("ie")&&(i.doc.documentElement.style.fontSize=t),i.body().removeChild(a),r};var p=null;c._getCachedFontMeasurements=function(e){return!e&&p||(p=c._getFontMeasurements()),p};var h=null,d={};c._getTextBox=function(e,t,r){var n,a,o,u,c=arguments.length;if(h||(h=s.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},i.body())),(n=h).className="",(a=n.style).borderWidth="0",a.margin="0",a.padding="0",a.outline="0",c>1&&t)for(o in t)o in d||(a[o]=t[o]);if(c>2&&r&&(n.className=r),n.innerHTML=e,n.getBoundingClientRect){var p=n.getBoundingClientRect();u={l:p.left,t:p.top,w:p.width||p.right-p.left,h:p.height||p.bottom-p.top}}else u=l.getMarginBox(n);return n.innerHTML="",u},c._computeTextLocation=function(e,t,r,n){var i={};switch(e.align){case"end":i.x=e.x-t;break;case"middle":i.x=e.x-t/2;break;default:i.x=e.x}var a=n?.75:1;return i.y=e.y-r*a,i},c._computeTextBoundingBox=function(e){if(!u._base._isRendered(e))return{x:0,y:0,width:0,height:0};var t,r=e.getShape(),n=e.getFont()||u.defaultFont,i=e.getTextWidth(),a=u.normalizedLength(n.size);return{x:(t=c._computeTextLocation(r,i,a,!0)).x,y:t.y,width:i,height:a}},c._isRendered=function(e){for(var t=e.parent;t&&t.getParent;)t=t.parent;return null!==t};var f=0;c._getUniqueId=function(){var t;do{t=e._scopeName+"xUnique"+ ++f}while(o.byId(t));return t};var y,m=n("pointer-events")?"touchAction":null;return c._fixMsTouchAction=m?function(e){e.rawNode.style[m]="none"}:function(){},t.mixin(u,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(y={},function(e){var t=y[e];return t||((t=y[e]=new Function).prototype=u["default"+e]),new t}),normalizeColor:function(e){return e instanceof r?e:new r(e)},normalizeParameters:function(e,t){var r;if(t){var n={};for(r in e)r in t&&!(r in n)&&(e[r]=t[r])}return e},makeParameters:function(e,r){var n=null;if(!r)return t.delegate(e);var i={};for(n in e)n in i||(i[n]=t.clone(n in r?r[n]:e[n]));return i},formatNumber:function(e,t){var r=e.toString();if(r.indexOf("e")>=0)r=e.toFixed(4);else{var n=r.indexOf(".");n>=0&&r.length-n>5&&(r=e.toFixed(4))}return e<0?r:t?" "+r:r},makeFontString:function(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+" "+e.family},splitFontString:function(e){var t=u.getDefault("Font"),r=e.split(/\s+/);do{if(r.length<5)break;t.style=r[0],t.variant=r[1],t.weight=r[2];var n=r[3].indexOf("/");t.size=n<0?r[3]:r[3].substring(0,n);var i=4;n<0&&("/"==r[4]?i=6:"/"==r[4].charAt(0)&&(i=5)),i<r.length&&(t.family=r.slice(i).join(" "))}while(0);return t},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return u._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(e){return e*u.px_in_pt()},px2pt:function(e){return e/u.px_in_pt()},normalizedLength:function(e){if(0===e.length)return 0;if(e.length>2){var t=u.px_in_pt(),r=parseFloat(e);switch(e.slice(-2)){case"px":return r;case"pt":return r*t;case"in":return 72*r*t;case"pc":return 12*r*t;case"mm":return r*u.mm_in_pt*t;case"cm":return r*u.cm_in_pt*t}}return parseFloat(e)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(e,t){return e&&t&&e===t},switchTo:function(e){var t="string"==typeof e?u[e]:e;t&&(a.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],(function(e){u[e]=t[e]})),"string"==typeof e?u.renderer=e:a.some(["svg","vml","canvas","canvasWithEvents","silverlight"],(function(e){return u.renderer=u[e]&&u[e].Surface===u.Surface?e:null})))}}),u}.apply(null,n))||(e.exports=i)},1176:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(2)],void 0===(i=function(e,t,r,n,i,a,o){var s=new i.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return function(e){function t(t){var r=e.call(this,t)||this;return r.description=null,r.type=null,r}return r(t,e),n([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([o.property({type:String,json:{read:s.read,write:s.write}})],t.prototype,"type",void 0),n([o.subclass("esri.tasks.support.GPMessage")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},1185:function(e,t,r){var n,i;n=[r(1146),r(22)],void 0===(i=function(e,t){var r=e.matrix={},n={};return r._degToRad=function(e){return n[e]||(n[e]=Math.PI*e/180)},r._radToDeg=function(e){return e/Math.PI*180},r.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(e.length>0){for(var n=r.normalize(e[0]),i=1;i<e.length;++i){var a=n,o=r.normalize(e[i]);(n=new r.Matrix2D).xx=a.xx*o.xx+a.xy*o.yx,n.xy=a.xx*o.xy+a.xy*o.yy,n.yx=a.yx*o.xx+a.yy*o.yx,n.yy=a.yx*o.xy+a.yy*o.yy,n.dx=a.xx*o.dx+a.xy*o.dy+a.dx,n.dy=a.yx*o.dx+a.yy*o.dy+a.dy}t.mixin(this,n)}}else t.mixin(this,e)},t.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),t.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return arguments.length>1?new r.Matrix2D({dx:e,dy:t}):new r.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return arguments.length>1?new r.Matrix2D({xx:e,yy:t}):"number"==typeof e?new r.Matrix2D({xx:e,yy:e}):new r.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);return new r.Matrix2D({xx:t,xy:-n,yx:n,yy:t})},rotateg:function(e){return r.rotate(r._degToRad(e))},skewX:function(e){return new r.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return r.skewX(r._degToRad(e))},skewY:function(e){return new r.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return r.skewY(r._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=e*e,i=t*t,a=n+i,o=2*e*t/a;return new r.Matrix2D({xx:2*n/a-1,xy:o,yx:o,yy:2*i/a-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=e*e,i=t*t,a=n+i,o=e*t/a;return new r.Matrix2D({xx:n/a,xy:o,yx:o,yy:i/a})},normalize:function(e){return e instanceof r.Matrix2D?e:new r.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t=new r.Matrix2D;for(var n in e)"number"==typeof e[n]&&"number"==typeof t[n]&&t[n]!=e[n]&&(t[n]=e[n]);return t},invert:function(e){var t=r.normalize(e),n=t.xx*t.yy-t.xy*t.yx;return t=new r.Matrix2D({xx:t.yy/n,xy:-t.xy/n,yx:-t.yx/n,yy:t.xx/n,dx:(t.xy*t.dy-t.yy*t.dx)/n,dy:(t.yx*t.dx-t.xx*t.dy)/n})},_multiplyPoint:function(e,t,r){return{x:e.xx*t+e.xy*r+e.dx,y:e.yx*t+e.yy*r+e.dy}},multiplyPoint:function(e,t,n){var i=r.normalize(e);return"number"==typeof t&&"number"==typeof n?r._multiplyPoint(i,t,n):r._multiplyPoint(i,t.x,t.y)},multiplyRectangle:function(e,t){var n=r.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},r.isIdentity(n))return{x:t.x,y:t.y,width:t.width,height:t.height};var i=r.multiplyPoint(n,t.x,t.y),a=r.multiplyPoint(n,t.x,t.y+t.height),o=r.multiplyPoint(n,t.x+t.width,t.y),s=r.multiplyPoint(n,t.x+t.width,t.y+t.height),l=Math.min(i.x,a.x,o.x,s.x),u=Math.min(i.y,a.y,o.y,s.y);return{x:l,y:u,width:Math.max(i.x,a.x,o.x,s.x)-l,height:Math.max(i.y,a.y,o.y,s.y)-u}},multiply:function(e){for(var t=r.normalize(e),n=1;n<arguments.length;++n){var i=t,a=r.normalize(arguments[n]);(t=new r.Matrix2D).xx=i.xx*a.xx+i.xy*a.yx,t.xy=i.xx*a.xy+i.xy*a.yy,t.yx=i.yx*a.xx+i.yy*a.yx,t.yy=i.yx*a.xy+i.yy*a.yy,t.dx=i.xx*a.dx+i.xy*a.dy+i.dx,t.dy=i.yx*a.dx+i.yy*a.dy+i.dy}return t},_sandwich:function(e,t,n){return r.multiply(r.translate(t,n),e,r.translate(-t,-n))},scaleAt:function(e,t,n,i){switch(arguments.length){case 4:return r._sandwich(r.scale(e,t),n,i);case 3:return"number"==typeof n?r._sandwich(r.scale(e),t,n):r._sandwich(r.scale(e,t),n.x,n.y)}return r._sandwich(r.scale(e),t.x,t.y)},rotateAt:function(e,t,n){return arguments.length>2?r._sandwich(r.rotate(e),t,n):r._sandwich(r.rotate(e),t.x,t.y)},rotategAt:function(e,t,n){return arguments.length>2?r._sandwich(r.rotateg(e),t,n):r._sandwich(r.rotateg(e),t.x,t.y)},skewXAt:function(e,t,n){return arguments.length>2?r._sandwich(r.skewX(e),t,n):r._sandwich(r.skewX(e),t.x,t.y)},skewXgAt:function(e,t,n){return arguments.length>2?r._sandwich(r.skewXg(e),t,n):r._sandwich(r.skewXg(e),t.x,t.y)},skewYAt:function(e,t,n){return arguments.length>2?r._sandwich(r.skewY(e),t,n):r._sandwich(r.skewY(e),t.x,t.y)},skewYgAt:function(e,t,n){return arguments.length>2?r._sandwich(r.skewYg(e),t,n):r._sandwich(r.skewYg(e),t.x,t.y)}}),e.Matrix2D=r.Matrix2D,r}.apply(null,n))||(e.exports=i)},1257:function(e,t,r){var n,i;n=[t,r(23),r(57),r(167),r(164),r(1500)],void 0===(i=function(e,t,r,n,i,a){var o,s={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},l=/<\s*([\w\:]+)/,u={},c=0,p="__"+t._scopeName+"ToDomId";for(var h in s)if(s.hasOwnProperty(h)){var d=s[h];d.pre="option"==h?'<select multiple="multiple">':"<"+d.join("><")+">",d.post="</"+d.reverse().join("></")+">"}function f(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}r("ie")<=8&&(o=function(e){e.__dojo_html5_tested="yes";var t=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);1!==t.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,(function(t){e.createElement(t)})),v(t)}),e.toDom=function(e,t){var i=(t=t||n.doc)[p];i||(t[p]=i=++c+"",u[i]=t.createElement("div")),r("ie")<=8&&!t.__dojo_html5_tested&&t.body&&o(t);var a,h,d,f,y=(e+="").match(l),m=y?y[1].toLowerCase():"",v=u[i];if(y&&s[m])for(a=s[m],v.innerHTML=a.pre+e+a.post,h=a.length;h;--h)v=v.firstChild;else v.innerHTML=e;if(1==v.childNodes.length)return v.removeChild(v.firstChild);for(f=t.createDocumentFragment();d=v.firstChild;)f.appendChild(d);return f},e.place=function(t,r,n){if(r=i.byId(r),"string"==typeof t&&(t=/^\s*</.test(t)?e.toDom(t,r.ownerDocument):i.byId(t)),"number"==typeof n){var a=r.childNodes;!a.length||a.length<=n?r.appendChild(t):f(t,a[n<0?0:n])}else switch(n){case"before":f(t,r);break;case"after":!function(e,t){var r=t.parentNode;r&&(r.lastChild==t?r.appendChild(e):r.insertBefore(e,t.nextSibling))}(t,r);break;case"replace":r.parentNode.replaceChild(t,r);break;case"only":e.empty(r),r.appendChild(t);break;case"first":if(r.firstChild){f(t,r.firstChild);break}default:r.appendChild(t)}return t};var y=e.create=function(t,r,o,s){var l=n.doc;return o&&(l=(o=i.byId(o)).ownerDocument),"string"==typeof t&&(t=l.createElement(t)),r&&a.set(t,r),o&&e.place(t,o,s),t};function m(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(e){}for(var t;t=e.lastChild;)e.removeChild(t)}e.empty=function(e){m(i.byId(e))};var v=e.destroy=function(e){(e=i.byId(e))&&function(e,t){e.firstChild&&m(e),t&&(r("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}(e,e.parentNode)}}.apply(null,n))||(e.exports=i)},1258:function(e,t,r){var n,i;n=[r(57),r(164),r(167)],void 0===(i=function(e,t,r){var n,i,a={};n=e("webkit")?function(e){var t;if(1==e.nodeType){var r=e.ownerDocument.defaultView;!(t=r.getComputedStyle(e,null))&&e.style&&(e.style.display="",t=r.getComputedStyle(e,null))}return t||{}}:e("ie")&&(e("ie")<9||e("quirks"))?function(e){return 1==e.nodeType&&e.currentStyle?e.currentStyle:{}}:function(e){if(1===e.nodeType){var t=e.ownerDocument.defaultView;return(t.opener?t:r.global.window).getComputedStyle(e,null)}return{}},a.getComputedStyle=n,i=e("ie")?function(e,t){if(!t)return 0;if("medium"==t)return 4;if(t.slice&&"px"==t.slice(-2))return parseFloat(t);var r=e.style,n=e.runtimeStyle,i=e.currentStyle,a=r.left,o=n.left;n.left=i.left;try{r.left=t,t=r.pixelLeft}catch(e){t=0}return r.left=a,n.left=o,t}:function(e,t){return parseFloat(t)||0},a.toPixelValue=i;var o="DXImageTransform.Microsoft.Alpha",s=function(e,t){try{return e.filters.item(o)}catch(e){return t?{}:null}},l=e("ie")<9||e("ie")<10&&e("quirks")?function(e){try{return s(e).Opacity/100}catch(e){return 1}}:function(e){return n(e).opacity},u=e("ie")<9||e("ie")<10&&e("quirks")?function(e,t){""===t&&(t=1);var r=100*t;if(1===t?(e.style.zoom="",s(e)&&(e.style.filter=e.style.filter.replace(new RegExp("\\s*progid:"+o+"\\([^\\)]+?\\)","i"),""))):(e.style.zoom=1,s(e)?s(e,1).Opacity=r:e.style.filter+=" progid:"+o+"(Opacity="+r+")",s(e,1).Enabled=!0),"tr"==e.tagName.toLowerCase())for(var n=e.firstChild;n;n=n.nextSibling)"td"==n.tagName.toLowerCase()&&u(n,t);return t}:function(e,t){return e.style.opacity=t},c={left:!0,top:!0},p=/margin|padding|width|height|max|min|offset/;function h(e,t,r){if(t=t.toLowerCase(),"auto"==r){if("height"==t)return e.offsetHeight;if("width"==t)return e.offsetWidth}if("fontweight"==t)switch(r){case 700:return"bold";case 400:default:return"normal"}return t in c||(c[t]=p.test(t)),c[t]?i(e,r):r}var d={cssFloat:1,styleFloat:1,float:1};return a.get=function(e,r){var n=t.byId(e),i=arguments.length,o="opacity"==r;if(2==i&&o)return l(n);r=d[r]?"cssFloat"in n.style?"cssFloat":"styleFloat":r;var s=a.getComputedStyle(n);return 1==i?s:h(n,r,s[r]||n.style[r])},a.set=function(e,r,n){var i=t.byId(e),o=arguments.length,s="opacity"==r;if(r=d[r]?"cssFloat"in i.style?"cssFloat":"styleFloat":r,3==o)return s?u(i,n):i.style[r]=n;for(var l in r)a.set(e,l,r[l]);return a.getComputedStyle(i)},a}.apply(null,n))||(e.exports=i)},1259:function(e,t,r){var n,i;n=[r(57),r(167),r(164),r(1258)],void 0===(i=function(e,t,r,n){var i={boxModel:"content-box"};e("ie")&&(i.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),i.getPadExtents=function(e,t){e=r.byId(e);var i=t||n.getComputedStyle(e),a=n.toPixelValue,o=a(e,i.paddingLeft),s=a(e,i.paddingTop),l=a(e,i.paddingRight),u=a(e,i.paddingBottom);return{l:o,t:s,r:l,b:u,w:o+l,h:s+u}};var a="none";function o(e,t,r,n,i,a){a=a||"px";var o=e.style;isNaN(t)||(o.left=t+a),isNaN(r)||(o.top=r+a),n>=0&&(o.width=n+a),i>=0&&(o.height=i+a)}function s(e){return"button"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&"button"==(e.getAttribute("type")||"").toLowerCase()}function l(e){return"border-box"==i.boxModel||"table"==e.tagName.toLowerCase()||s(e)}i.getBorderExtents=function(e,t){e=r.byId(e);var i=n.toPixelValue,o=t||n.getComputedStyle(e),s=o.borderLeftStyle!=a?i(e,o.borderLeftWidth):0,l=o.borderTopStyle!=a?i(e,o.borderTopWidth):0,u=o.borderRightStyle!=a?i(e,o.borderRightWidth):0,c=o.borderBottomStyle!=a?i(e,o.borderBottomWidth):0;return{l:s,t:l,r:u,b:c,w:s+u,h:l+c}},i.getPadBorderExtents=function(e,t){e=r.byId(e);var a=t||n.getComputedStyle(e),o=i.getPadExtents(e,a),s=i.getBorderExtents(e,a);return{l:o.l+s.l,t:o.t+s.t,r:o.r+s.r,b:o.b+s.b,w:o.w+s.w,h:o.h+s.h}},i.getMarginExtents=function(e,t){e=r.byId(e);var i=t||n.getComputedStyle(e),a=n.toPixelValue,o=a(e,i.marginLeft),s=a(e,i.marginTop),l=a(e,i.marginRight),u=a(e,i.marginBottom);return{l:o,t:s,r:l,b:u,w:o+l,h:s+u}},i.getMarginBox=function(t,o){t=r.byId(t);var s,l=o||n.getComputedStyle(t),u=i.getMarginExtents(t,l),c=t.offsetLeft-u.l,p=t.offsetTop-u.t,h=t.parentNode,d=n.toPixelValue;return 8!=e("ie")||e("quirks")||h&&(c-=(s=n.getComputedStyle(h)).borderLeftStyle!=a?d(t,s.borderLeftWidth):0,p-=s.borderTopStyle!=a?d(t,s.borderTopWidth):0),{l:c,t:p,w:t.offsetWidth+u.w,h:t.offsetHeight+u.h}},i.getContentBox=function(t,o){t=r.byId(t);var s,l=o||n.getComputedStyle(t),u=t.clientWidth,c=i.getPadExtents(t,l),p=i.getBorderExtents(t,l),h=t.offsetLeft+c.l+p.l,d=t.offsetTop+c.t+p.t;if(u?s=t.clientHeight:(u=t.offsetWidth-p.w,s=t.offsetHeight-p.h),8==e("ie")&&!e("quirks")){var f,y=t.parentNode,m=n.toPixelValue;y&&(h-=(f=n.getComputedStyle(y)).borderLeftStyle!=a?m(t,f.borderLeftWidth):0,d-=f.borderTopStyle!=a?m(t,f.borderTopWidth):0)}return{l:h,t:d,w:u-c.w,h:s-c.h}},i.setContentSize=function(e,t,n){e=r.byId(e);var a=t.w,s=t.h;if(l(e)){var u=i.getPadBorderExtents(e,n);a>=0&&(a+=u.w),s>=0&&(s+=u.h)}o(e,NaN,NaN,a,s)};var u={l:0,t:0,w:0,h:0};return i.setMarginBox=function(t,a,c){t=r.byId(t);var p=c||n.getComputedStyle(t),h=a.w,d=a.h,f=l(t)?u:i.getPadBorderExtents(t,p),y=i.getMarginExtents(t,p);if(e("webkit")&&s(t)){var m=t.style;h>=0&&!m.width&&(m.width="4px"),d>=0&&!m.height&&(m.height="4px")}h>=0&&(h=Math.max(h-f.w-y.w,0)),d>=0&&(d=Math.max(d-f.h-y.h,0)),o(t,a.l,a.t,h,d)},i.isBodyLtr=function(e){return e=e||t.doc,"ltr"==(t.body(e).dir||e.documentElement.dir||"ltr").toLowerCase()},i.docScroll=function(e){e=e||t.doc;var r=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in r?{x:r.pageXOffset,y:r.pageYOffset}:(r=e.documentElement)&&{x:i.fixIeBiDiScrollLeft(r.scrollLeft||0,e),y:r.scrollTop||0}},i.getIeDocumentElementOffset=function(e){return{x:0,y:0}},i.fixIeBiDiScrollLeft=function(r,n){n=n||t.doc;var a=e("ie");if(a&&!i.isBodyLtr(n)){var o=e("quirks"),s=o?t.body(n):n.documentElement,l=t.global;return 6==a&&!o&&l.frameElement&&s.scrollHeight>s.clientHeight&&(r+=s.clientLeft),a<8||o?r+s.clientWidth-s.scrollWidth:-r}return r},i.position=function(n,a){n=r.byId(n);t.body(n.ownerDocument);var o=n.getBoundingClientRect();if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},e("ie")<9&&(o.x-=0,o.y-=0),a){var s=i.docScroll(n.ownerDocument);o.x+=s.x,o.y+=s.y}return o},i.getMarginSize=function(e,t){e=r.byId(e);var a=i.getMarginExtents(e,t||n.getComputedStyle(e)),o=e.getBoundingClientRect();return{w:o.right-o.left+a.w,h:o.bottom-o.top+a.h}},i.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!("pageX"in e)){var t=e.target,r=t&&t.ownerDocument||document,n=r.documentElement;e.pageX=e.clientX+i.fixIeBiDiScrollLeft(n.scrollLeft||0,r),e.pageY=e.clientY+(n.scrollTop||0)}},i}.apply(null,n))||(e.exports=i)},1348:function(e,t,r){var n,i;n=[r(23),r(22),r(55),r(116)],void 0===(i=function(e,t,r,n){var i=e.Color=function(e){e&&this.setColor(e)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},t.extend(i,{r:255,g:255,b:255,a:1,_set:function(e,t,r,n){var i=this;i.r=e,i.g=t,i.b=r,i.a=n},setColor:function(e){return t.isString(e)?i.fromString(e,this):t.isArray(e)?i.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){var e=this;return[e.r,e.g,e.b]},toRgba:function(){var e=this;return[e.r,e.g,e.b,e.a]},toHex:function(){return"#"+r.map(["r","g","b"],(function(e){var t=this[e].toString(16);return t.length<2?"0"+t:t}),this).join("")},toCss:function(e){var t=this,r=t.r+", "+t.g+", "+t.b;return(e?"rgba("+r+", "+t.a:"rgb("+r)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=e.blendColors=function(e,t,r,n){var a=n||new i;return a.r=Math.round(e.r+(t.r-e.r)*r),a.g=Math.round(e.g+(t.g-e.g)*r),a.b=Math.round(e.b+(t.b-e.b)*r),a.a=e.a+(t.a-e.a)*r,a.sanitize()},i.fromRgb=e.colorFromRgb=function(e,t){var r=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return r&&i.fromArray(r[1].split(/\s*,\s*/),t)},i.fromHex=e.colorFromHex=function(e,t){var n=t||new i,a=4==e.length?4:8,o=(1<<a)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(r.forEach(["b","g","r"],(function(t){var r=e&o;e>>=a,n[t]=4==a?17*r:r})),n.a=1,n)},i.fromArray=e.colorFromArray=function(e,t){var r=t||new i;return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r.sanitize()},i.fromString=e.colorFromString=function(e,t){var r=i.named[e];return r&&i.fromArray(r,t)||i.fromRgb(e,t)||i.fromHex(e,t)},i}.apply(null,n))||(e.exports=i)},1349:function(e,t,r){var n,i;n=[r(1146),r(22),r(276),r(23),r(281),r(111),r(55),r(1257),r(1348),r(1185)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u){function c(e,t){for(var r=e.length-1;t<r;)e[t]=e[++t];e.length=r}var p=e.shape={};return p.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){if(this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null,i("gfxRegistry")){var e=p.register(this);this.getUID=function(){return e}}},destroy:function(){i("gfxRegistry")&&p.dispose(this),this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null),this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var e=this.getBoundingBox();if(!e)return null;var t=this._getRealMatrix(),r=u;return[r.multiplyPoint(t,e.x,e.y),r.multiplyPoint(t,e.x+e.width,e.y),r.multiplyPoint(t,e.x+e.width,e.y+e.height),r.multiplyPoint(t,e.x,e.y+e.height)]},getEventSource:function(){return this.rawNode},setClip:function(e){this.clip=e},getClip:function(){return this.clip},setShape:function(t){return this.shape=e.makeParameters(this.shape,t),this.bbox=null,this},setFill:function(t){if(!t)return this.fillStyle=null,this;var r=null;if("object"==typeof t&&"type"in t)switch(t.type){case"linear":r=e.makeParameters(e.defaultLinearGradient,t);break;case"radial":r=e.makeParameters(e.defaultRadialGradient,t);break;case"pattern":r=e.makeParameters(e.defaultPattern,t)}else r=e.normalizeColor(t);return this.fillStyle=r,this},setStroke:function(r){if(!r)return this.strokeStyle=null,this;("string"==typeof r||t.isArray(r)||r instanceof l)&&(r={color:r});var n=this.strokeStyle=e.makeParameters(e.defaultStroke,r);return n.color=e.normalizeColor(n.color),this},setTransform:function(e){return this.matrix=u.clone(e?u.normalize(e):u.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var e=this.getParent();return e&&(e._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var e=this.getParent();return e&&(e._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(e){return e?this.setTransform([this.matrix,e]):this},applyLeftTransform:function(e){return e?this.setTransform([e,this.matrix]):this},applyTransform:function(e){return e?this.setTransform([this.matrix,e]):this},removeShape:function(e){return this.parent&&this.parent.remove(this,e),this},_setParent:function(e,t){return this.parent=e,this._updateParentMatrix(t)},_updateParentMatrix:function(e){return this.parentMatrix=e?u.clone(e):null,this._applyTransform()},_getRealMatrix:function(){for(var e=this.matrix,t=this.parent;t;)t.matrix&&(e=u.multiply(t.matrix,e)),t=t.parent;return e}}),p._eventsProcessing={on:function(t,r){return a(this.getEventSource(),t,p.fixCallback(this,e.fixTarget,r))},connect:function(e,r,n){return"on"==e.substring(0,2)&&(e=e.substring(2)),this.on(e,n?t.hitch(r,n):r)},disconnect:function(e){return e.remove()}},p.fixCallback=function(e,r,i,a){if(a||(a=i,i=null),t.isString(a)){if(!(i=i||n.global)[a])throw['dojox.gfx.shape.fixCallback: scope["',a,'"] is null (scope="',i,'")'].join("");return function(t){return r(t,e)?i[a].apply(i,arguments||[]):void 0}}return i?function(t){return r(t,e)?a.apply(i,arguments||[]):void 0}:function(t){return r(t,e)?a.apply(i,arguments):void 0}},t.extend(p.Shape,p._eventsProcessing),p.Container={_init:function(){this.children=[],this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(e){var t=e.getParent();return t&&t.remove(e,!0),this.children.push(e),e._setParent(this,this._getRealMatrix())},remove:function(e,t){for(var r=0;r<this.children.length;++r)if(this.children[r]==e){t||(e.parent=null,e.parentMatrix=null),c(this.children,r);break}return this},clear:function(e){for(var t,r=0;r<this.children.length;++r)(t=this.children[r]).parent=null,t.parentMatrix=null,e&&t.destroy();return this.children=[],this},getBoundingBox:function(){if(this.children){var e=null;return o.forEach(this.children,(function(t){var r=t.getBoundingBox();if(r){var n=t.getTransform();n&&(r=u.multiplyRectangle(n,r)),e?(e.x=Math.min(e.x,r.x),e.y=Math.min(e.y,r.y),e.endX=Math.max(e.endX,r.x+r.width),e.endY=Math.max(e.endY,r.y+r.height)):e={x:r.x,y:r.y,endX:r.x+r.width,endY:r.y+r.height}}})),e&&(e.width=e.endX-e.x,e.height=e.endY-e.y),e}return null},_moveChildToFront:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){c(this.children,t),this.children.push(e);break}return this},_moveChildToBack:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){c(this.children,t),this.children.unshift(e);break}return this}},p.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(o.forEach(this._nodes,s.destroy),this._nodes=[],o.forEach(this._events,(function(e){e&&e.remove()})),this._events=[],this.rawNode=null,i("ie"))for(;this._parent.lastChild;)s.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(e){},whenLoaded:function(e,r){var n=t.hitch(e,r);this.isLoaded?n(this):a.once(this,"load",(function(e){n(e)}))}}),t.extend(p.Surface,p._eventsProcessing),p.Rect=r("dojox.gfx.shape.Rect",p.Shape,{constructor:function(t){this.shape=e.getDefault("Rect"),this.rawNode=t},getBoundingBox:function(){return this.shape}}),p.Ellipse=r("dojox.gfx.shape.Ellipse",p.Shape,{constructor:function(t){this.shape=e.getDefault("Ellipse"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.rx,y:e.cy-e.ry,width:2*e.rx,height:2*e.ry}}return this.bbox}}),p.Circle=r("dojox.gfx.shape.Circle",p.Shape,{constructor:function(t){this.shape=e.getDefault("Circle"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.r,y:e.cy-e.r,width:2*e.r,height:2*e.r}}return this.bbox}}),p.Line=r("dojox.gfx.shape.Line",p.Shape,{constructor:function(t){this.shape=e.getDefault("Line"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}}return this.bbox}}),p.Polyline=r("dojox.gfx.shape.Polyline",p.Shape,{constructor:function(t){this.shape=e.getDefault("Polyline"),this.rawNode=t},setShape:function(e,t){return e&&e instanceof Array?(this.inherited(arguments,[{points:e}]),t&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[e]),this},_normalizePoints:function(){var e=this.shape.points,t=e&&e.length;if(t&&"number"==typeof e[0]){for(var r=[],n=0;n<t;n+=2)r.push({x:e[n],y:e[n+1]});this.shape.points=r}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var e=this.shape.points,t=e.length,r=e[0],n={l:r.x,t:r.y,r:r.x,b:r.y},i=1;i<t;++i)r=e[i],n.l>r.x&&(n.l=r.x),n.r<r.x&&(n.r=r.x),n.t>r.y&&(n.t=r.y),n.b<r.y&&(n.b=r.y);this.bbox={x:n.l,y:n.t,width:n.r-n.l,height:n.b-n.t}}return this.bbox}}),p.Image=r("dojox.gfx.shape.Image",p.Shape,{constructor:function(t){this.shape=e.getDefault("Image"),this.rawNode=t},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),p.Text=r(p.Shape,{constructor:function(t){this.fontStyle=null,this.shape=e.getDefault("Text"),this.rawNode=t},getFont:function(){return this.fontStyle},setFont:function(t){return this.fontStyle="string"==typeof t?e.splitFontString(t):e.makeParameters(e.defaultFont,t),this._setFont(),this},getBoundingBox:function(){var t=null;return this.getShape().text&&(t=e._base._computeTextBoundingBox(this)),t}}),p.Creator={createShape:function(t){switch(t.type){case e.defaultPath.type:return this.createPath(t);case e.defaultRect.type:return this.createRect(t);case e.defaultCircle.type:return this.createCircle(t);case e.defaultEllipse.type:return this.createEllipse(t);case e.defaultLine.type:return this.createLine(t);case e.defaultPolyline.type:return this.createPolyline(t);case e.defaultImage.type:return this.createImage(t);case e.defaultText.type:return this.createText(t);case e.defaultTextPath.type:return this.createTextPath(t)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(t){return this.createObject(e.Rect,t)},createEllipse:function(t){return this.createObject(e.Ellipse,t)},createCircle:function(t){return this.createObject(e.Circle,t)},createLine:function(t){return this.createObject(e.Line,t)},createPolyline:function(t){return this.createObject(e.Polyline,t)},createImage:function(t){return this.createObject(e.Image,t)},createText:function(t){return this.createObject(e.Text,t)},createPath:function(t){return this.createObject(e.Path,t)},createTextPath:function(t){return this.createObject(e.TextPath,{}).setText(t)},createObject:function(e,t){return null}},p}.apply(null,n))||(e.exports=i)},1499:function(e,t,r){var n,a;n=[r(1146),r(22),r(55),r(276),r(167),r(1259),r(164),r(1349),r(1507),r(1508),r(1185),r(1509),r(1510)],void 0===(a=function(e,t,r,n,a,o,s,l,u,c,h,d,f){var y=e.canvas={},m=null,v=h.multiplyPoint,g=Math.PI,x=2*g,b=g/2,S=t.extend;if(a.global.CanvasRenderingContext2D)var _=a.doc.createElement("canvas").getContext("2d"),w="function"==typeof _.setLineDash,T="function"==typeof _.fillText;var P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};function C(e,t,r,n,i,a,o,s,l,u){var c,p,h=t.length,d=0;for(u?(p=u.l/i,d=u.i):p=t[0]/i;a<o;)a+p>o&&(c={l:(a+p-o)*i,i:d},p=o-a),d%2||(e.beginPath(),e.arc(r,n,i,a,a+p,s),l&&e.stroke()),a+=p,p=t[++d%h]/i;return c}function M(e,t,r,n){var i,a=0,o=0,s=0;for(n?(i=n.l,s=n.i):i=t[0];o<1;){if(1==(o=f.tAtLength(e,i)))a={l:i-f.computeLength(e),i:s};var l=f.splitBezierAtT(e,o);s%2||r.push(l[0]),e=l[1],i=t[++s%t.length]}return a}function N(e,t,r,n){for(var i=[t.last.x,t.last.y].concat(r),a=4===r.length,o=!(e instanceof Array),s=a?"quadraticCurveTo":"bezierCurveTo",l=[],u=M(i,t.canvasDash,l,n),c=0;c<l.length;++c){var p=l[c];o?(e.moveTo(p[0],p[1]),e[s].apply(e,p.slice(2))):(e.push("moveTo",[p[0],p[1]]),e.push(s,p.slice(2)))}return u}function L(e,t,r,n,i,a,o){var s,l,u=0,c=0,p=0,h=f.distance(r,n,i,a),d=0,y=t.canvasDash,m=r,v=n,g=!(e instanceof Array);for(o?(p=o.l,d=o.i):p+=y[0];Math.abs(1-c)>.01;)p>h&&(u={l:p-h,i:d},p=h),s=r+(i-r)*(c=p/h),l=n+(a-n)*c,d++%2||(g?(e.moveTo(m,v),e.lineTo(s,l)):(e.push("moveTo",[m,v]),e.push("lineTo",[s,l]))),m=s,v=l,p+=y[d%y.length];return u}y.Shape=n("dojox.gfx.canvas.Shape",l.Shape,{_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e),this._renderShape(e),this._renderFill(e,!0),this._renderStroke(e,!0),e.restore()},_renderClip:function(e){this.canvasClip&&(this.canvasClip.render(e),e.clip())},_renderTransform:function(e){if("canvasTransform"in this){var t=this.canvasTransform;e.translate(t.dx,t.dy),e.rotate(t.angle2),e.scale(t.sx,t.sy),e.rotate(t.angle1)}},_renderShape:function(e){},_renderFill:function(e,t){if("canvasFill"in this){var r=this.fillStyle;if("canvasFillImage"in this){var n=r.width,i=r.height,a=this.canvasFillImage.width,o=this.canvasFillImage.height,s=n==a?1:n/a,l=i==o?1:i/o,u=Math.min(s,l),c=(n-u*a)/2,p=(i-u*o)/2;m.width=n,m.height=i;var h=m.getContext("2d");h.clearRect(0,0,n,i),h.drawImage(this.canvasFillImage,0,0,a,o,c,p,u*a,u*o),this.canvasFill=e.createPattern(m,"repeat"),delete this.canvasFillImage}e.fillStyle=this.canvasFill,t&&("pattern"!==r.type||0===r.x&&0===r.y||e.translate(r.x,r.y),e.fill())}else e.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(e,t){var r=this.strokeStyle;r?(e.strokeStyle=r.color.toString(),e.lineWidth=r.width,e.lineCap=r.cap,"number"==typeof r.join?(e.lineJoin="miter",e.miterLimit=r.join):e.lineJoin=r.join,this.canvasDash?w?(e.setLineDash(this.canvasDash),t&&e.stroke()):this._renderDashedStroke(e,t):t&&e.stroke()):t||(e.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(e,t){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(e){this.inherited(arguments);var t=e?"width"in e?"rect":"cx"in e?"ellipse":"points"in e?"polyline":"d"in e?"path":null:null;return e&&!t||(this.canvasClip=e?R(t,e):null,this.parent&&this.parent._makeDirty()),this}});var R=function(e,r){switch(e){case"ellipse":return{canvasEllipse:O({shape:r}),render:function(e){return y.Ellipse.prototype._renderShape.call(this,e)}};case"rect":return{shape:t.delegate(r,{r:0}),render:function(e){return y.Rect.prototype._renderShape.call(this,e)}};case"path":return{canvasPath:D(r),render:function(e){this.canvasPath._renderShape(e)}};case"polyline":return{canvasPolyline:r.points,render:function(e){return y.Polyline.prototype._renderShape.call(this,e)}}}return null},D=function(e){var t=new dojox.gfx.canvas.Path;return t.canvasPath=[],t._setPath(e.d),t},k=function(e,t,r){var n=e.prototype[t];e.prototype[t]=r?function(){return this.parent&&this.parent._makeDirty(),n.apply(this,arguments),r.call(this),this}:function(){return this.parent&&this.parent._makeDirty(),n.apply(this,arguments)}};k(y.Shape,"setTransform",(function(){this.matrix?this.canvasTransform=e.decompose(this.matrix):delete this.canvasTransform})),k(y.Shape,"setFill",(function(){var t,n=this.fillStyle;if(n){if("object"==typeof n&&"type"in n){var i=this.surface.rawNode.getContext("2d");switch(n.type){case"linear":case"radial":t="linear"==n.type?i.createLinearGradient(n.x1,n.y1,n.x2,n.y2):i.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r),r.forEach(n.colors,(function(r){t.addColorStop(r.offset,e.normalizeColor(r.color).toString())}));break;case"pattern":m||(m=document.createElement("canvas"));var a=new Image;this.surface.downloadImage(a,n.src),this.canvasFillImage=a}}else t=n.toString();this.canvasFill=t}else delete this.canvasFill})),k(y.Shape,"setStroke",(function(){var e=this.strokeStyle;if(e){var t=this.strokeStyle.style.toLowerCase();if(t in P&&(t=P[t]),t instanceof Array){var r;for(t=t.slice(),this.canvasDash=t,r=0;r<t.length;++r)t[r]*=e.width;if("butt"!=e.cap){for(r=0;r<t.length;r+=2)t[r]-=e.width,t[r]<1&&(t[r]=1);for(r=1;r<t.length;r+=2)t[r]+=e.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!w&&!!this.canvasDash})),k(y.Shape,"setShape"),y.Group=n("dojox.gfx.canvas.Group",y.Shape,{constructor:function(){l.Container._init.call(this)},_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e);for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},destroy:function(){l.Container.clear.call(this,!0),y.Shape.prototype.destroy.apply(this,arguments)}}),y.Rect=n("dojox.gfx.canvas.Rect",[y.Shape,l.Rect],{_renderShape:function(e){var t=this.shape,r=Math.min(t.r,t.height/2,t.width/2),n=t.x,i=n+t.width,a=t.y,o=a+t.height,s=n+r,l=i-r,u=a+r,c=o-r;e.beginPath(),e.moveTo(s,a),r?(e.arc(l,u,r,-b,0,!1),e.arc(l,c,r,0,b,!1),e.arc(s,c,r,b,g,!1),e.arc(s,u,r,g,g+b,!1)):(e.lineTo(l,a),e.lineTo(i,c),e.lineTo(s,o),e.lineTo(n,u)),e.closePath()},_renderDashedStroke:function(e,t){var r,n=this.shape,i=Math.min(n.r,n.height/2,n.width/2),a=n.x,o=a+n.width,s=n.y,l=s+n.height,u=a+i,c=o-i,p=s+i,h=l-i;i?(e.beginPath(),r=L(e,this,u,s,c,s),t&&e.stroke(),r=C(e,this.canvasDash,c,p,i,-b,0,!1,t,r),e.beginPath(),r=L(e,this,o,p,o,h,r),t&&e.stroke(),r=C(e,this.canvasDash,c,h,i,0,b,!1,t,r),e.beginPath(),r=L(e,this,c,l,u,l,r),t&&e.stroke(),r=C(e,this.canvasDash,u,h,i,b,g,!1,t,r),e.beginPath(),r=L(e,this,a,h,a,p,r),t&&e.stroke(),C(e,this.canvasDash,u,p,i,g,g+b,!1,t,r)):(e.beginPath(),r=L(e,this,u,s,c,s),r=L(e,this,c,s,o,h,r),r=L(e,this,o,h,u,l,r),L(e,this,u,l,a,p,r),t&&e.stroke())}});var F=[];!function(){var e=c.curvePI4;F.push(e.s,e.c1,e.c2,e.e);for(var t=45;t<360;t+=45){var r=h.rotateg(t);F.push(v(r,e.c1),v(r,e.c2),v(r,e.e))}}();var O=function(e){var t,r,n,i=[],a=e.shape,o=h.normalize([h.translate(a.cx,a.cy),h.scale(a.rx,a.ry)]);t=v(o,F[0]),i.push([t.x,t.y]);for(var s=1;s<F.length;s+=3)r=v(o,F[s]),n=v(o,F[s+1]),t=v(o,F[s+2]),i.push([r.x,r.y,n.x,n.y,t.x,t.y]);if(e._needsDash){var l=[],u=i[0];for(s=1;s<i.length;++s){var c=[];M(u.concat(i[s]),e.canvasDash,c),u=[i[s][4],i[s][5]],l.push(c)}e._dashedPoints=l}return i};y.Ellipse=n("dojox.gfx.canvas.Ellipse",[y.Shape,l.Ellipse],{setShape:function(){return this.inherited(arguments),this.canvasEllipse=O(this),this},setStroke:function(){return this.inherited(arguments),w||(this.canvasEllipse=O(this)),this},_renderShape:function(e){var t,r=this.canvasEllipse;for(e.beginPath(),e.moveTo.apply(e,r[0]),t=1;t<r.length;++t)e.bezierCurveTo.apply(e,r[t]);e.closePath()},_renderDashedStroke:function(e,t){var r=this._dashedPoints;e.beginPath();for(var n=0;n<r.length;++n)for(var i=r[n],a=0;a<i.length;++a){var o=i[a];e.moveTo(o[0],o[1]),e.bezierCurveTo(o[2],o[3],o[4],o[5],o[6],o[7])}t&&e.stroke()}}),y.Circle=n("dojox.gfx.canvas.Circle",[y.Shape,l.Circle],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.arc(t.cx,t.cy,t.r,0,x,1)},_renderDashedStroke:function(e,t){var r,n=this.shape,a=0,o=this.canvasDash.length;for(i=0;a<x;)r=this.canvasDash[i%o]/n.r,i%2||(e.beginPath(),e.arc(n.cx,n.cy,n.r,a,a+r,0),t&&e.stroke()),a+=r,++i}}),y.Line=n("dojox.gfx.canvas.Line",[y.Shape,l.Line],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)},_renderDashedStroke:function(e,t){var r=this.shape;e.beginPath(),L(e,this,r.x1,r.y1,r.x2,r.y2),t&&e.stroke()}}),y.Polyline=n("dojox.gfx.canvas.Polyline",[y.Shape,l.Polyline],{setShape:function(){this.inherited(arguments);var e,t,r,n=this.shape.points,i=n[0];if(this.bbox=null,this._normalizePoints(),n.length)if("number"==typeof i)e=n;else for(e=[],r=0;r<n.length;++r)t=n[r],e.push(t.x,t.y);else e=[];return this.canvasPolyline=e,this},_renderShape:function(e){var t=this.canvasPolyline;if(t.length){e.beginPath(),e.moveTo(t[0],t[1]);for(var r=2;r<t.length;r+=2)e.lineTo(t[r],t[r+1])}},_renderDashedStroke:function(e,t){var r=this.canvasPolyline,n=0;e.beginPath();for(var i=0;i<r.length;i+=2)n=L(e,this,r[i],r[i+1],r[i+2],r[i+3],n);t&&e.stroke()}}),y.Image=n("dojox.gfx.canvas.Image",[y.Shape,l.Image],{setShape:function(){this.inherited(arguments);var e=new Image;return this.surface.downloadImage(e,this.shape.src),this.canvasImage=e,this},_renderShape:function(e){var t=this.shape;e.drawImage(this.canvasImage,t.x,t.y,t.width,t.height)}}),y.Text=n("dojox.gfx.canvas.Text",[y.Shape,l.Text],{_setFont:function(){this.fontStyle?this.canvasFont=e.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var e,t=this.shape,r=0;return t.text&&((e=this.surface.rawNode.getContext("2d")).save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this.canvasFont&&(e.font=this.canvasFont),r=e.measureText(t.text).width,e.restore()),r},_render:function(e){e.save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this._renderShape(e),e.restore()},_renderShape:function(e){var t,r=this.shape;r.text&&(t="middle"===r.align?"center":r.align,e.textAlign=t,this.canvasFont&&(e.font=this.canvasFont),this.canvasFill&&e.fillText(r.text,r.x,r.y),this.strokeStyle&&(e.beginPath(),e.strokeText(r.text,r.x,r.y),e.closePath()))}}),k(y.Text,"setFont"),T||y.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var j={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};y.Path=n("dojox.gfx.canvas.Path",[y.Shape,u.Path],{constructor:function(){this.lastControl={}},setShape:function(){return this.canvasPath=[],this._dashedPath=[],this.inherited(arguments)},setStroke:function(){return this.inherited(arguments),w||(this.segmented=!1,this._confirmSegmented()),this},_setPath:function(){this._dashResidue=null,this.inherited(arguments)},_updateWithSegment:function(e){var r=t.clone(this.last);this[j[e.action]](this.canvasPath,e.action,e.args,this._needsDash?this._dashedPath:null),this.last=r,this.inherited(arguments)},_renderShape:function(e){var t=this.canvasPath;e.beginPath();for(var r=0;r<t.length;r+=2)e[t[r]].apply(e,t[r+1])},_renderDashedStroke:w?function(){}:function(e,t){var r=this._dashedPath;e.beginPath();for(var n=0;n<r.length;n+=2)e[r[n]].apply(e,r[n+1]);t&&e.stroke()},_moveToA:function(e,t,r,n){e.push("moveTo",[r[0],r[1]]),n&&n.push("moveTo",[r[0],r[1]]);for(var i=2;i<r.length;i+=2)e.push("lineTo",[r[i],r[i+1]]),n&&(this._dashResidue=L(n,this,r[i-2],r[i-1],r[i],r[i+1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_moveToR:function(e,t,r,n){var i;"x"in this.last?(i=[this.last.x+=r[0],this.last.y+=r[1]],e.push("moveTo",i),n&&n.push("moveTo",i)):(i=[this.last.x=r[0],this.last.y=r[1]],e.push("moveTo",i),n&&n.push("moveTo",i));for(var a=2;a<r.length;a+=2)e.push("lineTo",[this.last.x+=r[a],this.last.y+=r[a+1]]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(e,t,r,n){for(var i=0;i<r.length;i+=2)n&&(this._dashResidue=L(n,this,this.last.x,this.last.y,r[i],r[i+1],this._dashResidue)),e.push("lineTo",[r[i],r[i+1]]);this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_lineToR:function(e,t,r,n){for(var i=0;i<r.length;i+=2)e.push("lineTo",[this.last.x+=r[i],this.last.y+=r[i+1]]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(e,t,r,n){for(var i=0;i<r.length;++i)e.push("lineTo",[r[i],this.last.y]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],r[i],this.last.y,this._dashResidue));this.last.x=r[r.length-1],this.lastControl={}},_hLineToR:function(e,t,r,n){for(var i=0;i<r.length;++i)e.push("lineTo",[this.last.x+=r[i],this.last.y]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(e,t,r,n){for(var i=0;i<r.length;++i)e.push("lineTo",[this.last.x,r[i]]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],this.last.x,r[i],this._dashResidue));this.last.y=r[r.length-1],this.lastControl={}},_vLineToR:function(e,t,r,n){for(var i=0;i<r.length;++i)e.push("lineTo",[this.last.x,this.last.y+=r[i]]),n&&(this._dashResidue=L(n,this,n[n.length-1][0],n[n.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(e,t,r,n){for(var i=0;i<r.length;i+=6)e.push("bezierCurveTo",r.slice(i,i+6)),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="C"},_curveToR:function(e,t,r,n){for(var i=0;i<r.length;i+=6)e.push("bezierCurveTo",[this.last.x+r[i],this.last.y+r[i+1],this.lastControl.x=this.last.x+r[i+2],this.lastControl.y=this.last.y+r[i+3],this.last.x+r[i+4],this.last.y+r[i+5]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.last.x+=r[i+4],this.last.y+=r[i+5];this.lastControl.type="C"},_smoothCurveToA:function(e,t,r,n){for(var i=0;i<r.length;i+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,r[i],r[i+1],r[i+2],r[i+3]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.lastControl.x=r[i],this.lastControl.y=r[i+1],this.lastControl.type="C"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_smoothCurveToR:function(e,t,r,n){for(var i=0;i<r.length;i+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[i],this.last.y+r[i+1],this.last.x+r[i+2],this.last.y+r[i+3]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.lastControl.x=this.last.x+r[i],this.lastControl.y=this.last.y+r[i+1],this.lastControl.type="C",this.last.x+=r[i+2],this.last.y+=r[i+3]}},_qCurveToA:function(e,t,r,n){for(var i=0;i<r.length;i+=4)e.push("quadraticCurveTo",r.slice(i,i+4));n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="Q"},_qCurveToR:function(e,t,r,n){for(var i=0;i<r.length;i+=4)e.push("quadraticCurveTo",[this.lastControl.x=this.last.x+r[i],this.lastControl.y=this.last.y+r[i+1],this.last.x+r[i+2],this.last.y+r[i+3]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.last.x+=r[i+2],this.last.y+=r[i+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(e,t,r,n){for(var i=0;i<r.length;i+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,r[i],r[i+1]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_qSmoothCurveToR:function(e,t,r,n){for(var i=0;i<r.length;i+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[i],this.last.y+r[i+1]]),n&&(this._dashResidue=N(n,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q",this.last.x+=r[i],this.last.y+=r[i+1]}},_arcTo:function(e,t,n,i){for(var a="a"==t,o=0;o<n.length;o+=7){var s=n[o+5],l=n[o+6];a&&(s+=this.last.x,l+=this.last.y);var u=c.arcAsBezier(this.last,n[o],n[o+1],n[o+2],n[o+3]?1:0,n[o+4]?1:0,s,l);r.forEach(u,(function(t){e.push("bezierCurveTo",t)})),i&&(this._dashResidue=N(i,this,p,this._dashResidue)),this.last.x=s,this.last.y=l}this.lastControl={}},_closePath:function(e,t,r,n){e.push("closePath",[]),n&&(this._dashResidue=L(n,this,this.last.x,this.last.y,n[1][0],n[1][1],this._dashResidue)),this.lastControl={}}}),r.forEach(["moveTo","lineTo","hLineTo","vLineTo","curveTo","smoothCurveTo","qCurveTo","qSmoothCurveTo","arcTo","closePath"],(function(e){k(y.Path,e)})),y.TextPath=n("dojox.gfx.canvas.TextPath",[y.Shape,u.TextPath],{_renderShape:function(e){this.shape},_setText:function(){},_setFont:function(){}}),y.Surface=n("dojox.gfx.canvas.Surface",l.Surface,{constructor:function(){l.Container._init.call(this),this.pendingImageCount=0,this.makeDirty()},destroy:function(){l.Container.clear.call(this,!0),this.inherited(arguments)},setDimensions:function(t,r){if(this.width=e.normalizedLength(t),this.height=e.normalizedLength(r),!this.rawNode)return this;var n=!1;return this.rawNode.width!=this.width&&(this.rawNode.width=this.width,n=!0),this.rawNode.height!=this.height&&(this.rawNode.height=this.height,n=!0),n&&this.makeDirty(),this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(e){if(this.rawNode&&(e||!this.pendingImageCount)){var t=this.rawNode.getContext("2d");t.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(t),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender)}},render:function(e){e.save();for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(t.hitch(this,this._render),0))},downloadImage:function(e,r){var n=t.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender),e.onload=n,e.onerror=n,e.onabort=n,e.src=r},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}}),y.createSurface=function(t,r,n){if(!r&&!n){var i=o.position(t);r=r||i.w,n=n||i.h}"number"==typeof r&&(r+="px"),"number"==typeof n&&(n+="px");var a=new y.Surface,l=s.byId(t),u=l.ownerDocument.createElement("canvas");return u.width=e.normalizedLength(r),u.height=e.normalizedLength(n),l.appendChild(u),a.rawNode=u,a._parent=l,a.surface=a,a};var V=l.Container,I={openBatch:function(){return++this._batch,this},closeBatch:function(){return this._batch=this._batch>0?--this._batch:0,this._makeDirty(),this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(e){return this._makeDirty(),V.add.apply(this,arguments)},remove:function(e,t){return this._makeDirty(),V.remove.apply(this,arguments)},clear:function(){return this._makeDirty(),V.clear.apply(this,arguments)},getBoundingBox:V.getBoundingBox,_moveChildToFront:function(e){return this._makeDirty(),V._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(e){return this._makeDirty(),V._moveChildToBack.apply(this,arguments)}},E={createObject:function(e,t){var r=new e;return r.surface=this.surface,r.setShape(t),this.add(r),r}};return S(y.Group,I),S(y.Group,l.Creator),S(y.Group,E),S(y.Surface,I),S(y.Surface,l.Creator),S(y.Surface,E),y.fixTarget=function(e,t){return!0},y}.apply(null,n))||(e.exports=a)},1500:function(e,t,r){var n,i;n=[t,r(57),r(22),r(164),r(1258),r(1501)],void 0===(i=function(e,t,r,n,i,a){var o={innerHTML:1,textContent:1,className:1,htmlFor:t("ie"),value:1},s={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};function l(e,t){var r=e.getAttributeNode&&e.getAttributeNode(t);return!!r&&r.specified}e.has=function(e,t){var r=t.toLowerCase();return o[a.names[r]||t]||l(n.byId(e),s[r]||t)},e.get=function(e,t){e=n.byId(e);var i=t.toLowerCase(),u=a.names[i]||t,c=o[u],p=e[u];if(c&&void 0!==p)return p;if("textContent"==u)return a.get(e,u);if("href"!=u&&("boolean"==typeof p||r.isFunction(p)))return p;var h=s[i]||t;return l(e,h)?e.getAttribute(h):null},e.set=function(t,l,u){if(t=n.byId(t),2==arguments.length){for(var c in l)e.set(t,c,l[c]);return t}var p=l.toLowerCase(),h=a.names[p]||l,d=o[h];return"style"==h&&"string"!=typeof u?(i.set(t,u),t):d||"boolean"==typeof u||r.isFunction(u)?a.set(t,l,u):(t.setAttribute(s[p]||l,u),t)},e.remove=function(e,t){n.byId(e).removeAttribute(s[t.toLowerCase()]||t)},e.getNodeProp=function(e,t){e=n.byId(e);var r=t.toLowerCase(),i=a.names[r]||t;if(i in e&&"href"!=i)return e[i];var o=s[r]||t;return l(e,o)?e.getAttribute(o):null}}.apply(null,n))||(e.exports=i)},1501:function(e,t,r){var n,i;n=[t,r(23),r(57),r(22),r(164),r(1258),r(1257),r(1502)],void 0===(i=function(e,t,r,n,i,a,o,s){var l={},u=1,c=t._scopeName+"attrid";r.add("dom-textContent",(function(e,t,r){return"textContent"in r})),e.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"},e.get=function(t,n){t=i.byId(t);var a=n.toLowerCase(),o=e.names[a]||n;return"textContent"!=o||r("dom-textContent")?t[o]:function e(t){for(var r,n="",i=t.childNodes,a=0;r=i[a];a++)8!=r.nodeType&&(1==r.nodeType?n+=e(r):n+=r.nodeValue);return n}(t)},e.set=function(t,p,h){t=i.byId(t);var d=arguments.length;if(2==d&&"string"!=typeof p){for(var f in p)e.set(t,f,p[f]);return t}var y=p.toLowerCase(),m=e.names[y]||p;if("style"==m&&"string"!=typeof h)return a.set(t,h),t;if("innerHTML"==m)return r("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(t),t.appendChild(o.toDom(h,t.ownerDocument))):t[m]=h,t;if("textContent"==m&&!r("dom-textContent"))return o.empty(t),t.appendChild(t.ownerDocument.createTextNode(h)),t;if(n.isFunction(h)){var v=t[c];v||(v=u++,t[c]=v),l[v]||(l[v]={});var g=l[v][m];if(g)s.disconnect(g);else try{delete t[m]}catch(e){}return h?l[v][m]=s.connect(t,m,h):t[m]=null,t}return t[m]=h,t}}.apply(null,n))||(e.exports=i)},1502:function(e,t,r){var n,i;n=[r(23),r(111),r(1503),r(117),r(1504),r(1505),r(281),r(22),r(1506)],void 0===(i=function(e,t,r,n,i,a,o,s){function l(r,i,o,l,c){if(l=s.hitch(o,l),!r||!r.addEventListener&&!r.attachEvent)return n.after(r||e.global,i,l,!0);if("string"==typeof i&&"on"==i.substring(0,2)&&(i=i.substring(2)),r||(r=e.global),!c)switch(i){case"keypress":i=u;break;case"mouseenter":i=a.enter;break;case"mouseleave":i=a.leave}return t(r,i,l,c)}o.add("events-keypress-typed",(function(){var e={charCode:0};try{((e=document.createEvent("KeyboardEvent")).initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(e){}return 0==e.charCode&&!o("opera")}));var u,c={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},p=o("mac")?"metaKey":"ctrlKey",h=function(e,t){var r=s.mixin({},e,t);return d(r),r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()},r};function d(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}if(o("events-keypress-typed")){u=function(e,r){var n=t(e,"keydown",(function(e){var t=e.keyCode,n=13!=t&&32!=t&&(27!=t||!o("ie"))&&(t<48||t>90)&&(t<96||t>111)&&(t<186||t>192)&&(t<219||t>222)&&229!=t;if(n||e.ctrlKey){var i=n?0:t;if(e.ctrlKey){if(3==t||13==t)return r.call(e.currentTarget,e);i>95&&i<106?i-=48:!e.shiftKey&&i>=65&&i<=90?i+=32:i=c[i]||i}var a=h(e,{type:"keypress",faux:!0,charCode:i});r.call(e.currentTarget,a),o("ie")&&function(e,t){try{e.keyCode=t}catch(e){return 0}}(e,a.keyCode)}})),i=t(e,"keypress",(function(e){var t=e.charCode;return e=h(e,{charCode:t=t>=32?t:0,faux:!0}),r.call(this,e)}));return{remove:function(){n.remove(),i.remove()}}}}else u=o("opera")?function(e,r){return t(e,"keypress",(function(e){var t=e.which;return 3==t&&(t=99),t=t<32&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&t<=90&&(t+=32),r.call(this,h(e,{charCode:t}))}))}:function(e,r){return t(e,"keypress",(function(e){return d(e),r.call(this,e)}))};var f={_keypress:u,connect:function(e,t,r,n,i){var a=arguments,o=[],s=0;o.push("string"==typeof a[0]?null:a[s++],a[s++]);var u=a[s+1];o.push("string"==typeof u||"function"==typeof u?a[s++]:null,a[s++]);for(var c=a.length;s<c;s++)o.push(a[s]);return l.apply(this,o)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,n){return r.subscribe(e,s.hitch(t,n))},publish:function(e,t){return r.publish.apply(r,[e].concat(t))},connectPublisher:function(e,t,r){var n=function(){f.publish(e,arguments)};return r?f.connect(t,r,n):f.connect(t,n)},isCopyKey:function(e){return e[p]}};return f.unsubscribe=f.disconnect,s.mixin(e,f),f}.apply(null,n))||(e.exports=i)},1503:function(e,t,r){var n,i;n=[r(290)],void 0===(i=function(e){var t=new e;return{publish:function(e,r){return t.emit.apply(t,arguments)},subscribe:function(e,r){return t.on.apply(t,arguments)}}}.apply(null,n))||(e.exports=i)},1504:function(e,t,r){var n,i;n=[r(23),r(111),r(24),r(1259)],void 0===(i=function(e,t,r,n){if(t._fixEvent){var i=t._fixEvent;t._fixEvent=function(e,t){return(e=i(e,t))&&n.normalizeEvent(e),e}}var a={fix:function(e,r){return t._fixEvent?t._fixEvent(e,r):e},stop:function(e){e.preventDefault(),e.stopPropagation()}};return e.fixEvent=a.fix,e.stopEvent=a.stop,a}.apply(null,n))||(e.exports=i)},1505:function(e,t,r){var n,i;n=[r(23),r(111),r(24),r(164),r(167)],void 0===(i=function(e,t,r,n,i){var a,o;function s(e,r){var i=function(i,a){return t(i,e,(function(e){return r?r(e,a):n.isDescendant(e.relatedTarget,i)?void 0:a.call(this,e)}))};return i.bubble=function(t){return s(e,(function(e,r){var n=t(e.target),i=e.relatedTarget;if(n&&n!=(i&&1==i.nodeType&&t(i)))return r.call(n,e)}))},i}return r.add("dom-quirks",i.doc&&"BackCompat"==i.doc.compatMode),r.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),r.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc),a={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},e.mouseButtons=a,o="mousewheel",{_eventHandler:s,enter:s("mouseover"),leave:s("mouseout"),wheel:o,isLeft:a.isLeft,isMiddle:a.isMiddle,isRight:a.isRight}}.apply(null,n))||(e.exports=i)},1506:function(e,t,r){var n,i;n=[r(23),r(57)],void 0===(i=function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}}.apply(null,n))||(e.exports=i)},1507:function(e,t,r){var n,i;n=[r(1146),r(22),r(276),r(1185),r(1349)],void 0===(i=function(e,t,r,n,i){var a=r("dojox.gfx.path.Path",i.Shape,{constructor:function(r){this.shape=t.clone(e.defaultPath),this.segments=[],this.tbbox=null,this.absolute=!0,this.last={},this.rawNode=r,this.segmented=!1},setAbsoluteMode:function(e){return this._confirmSegmented(),this.absolute="string"==typeof e?"absolute"==e:e,this},getAbsoluteMode:function(){return this._confirmSegmented(),this.absolute},getBoundingBox:function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var e=this.bbox,t=this._getRealMatrix();this.bbox=null;for(var r=0,n=this.segments.length;r<n;++r)this._updateWithSegment(this.segments[r],t);var i=this.bbox;return this.bbox=e,this.tbbox=i?[{x:i.l,y:i.t},{x:i.r,y:i.t},{x:i.r,y:i.b},{x:i.l,y:i.b}]:null,this.tbbox},getLastPosition:function(){return this._confirmSegmented(),"x"in this.last?this.last:null},_applyTransform:function(){return this.tbbox=null,this.inherited(arguments)},_updateBBox:function(e,t,r){if(r){var i=n.multiplyPoint(r,e,t);e=i.x,t=i.y}this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>t&&(this.bbox.t=t),this.bbox.b<t&&(this.bbox.b=t)):this.bbox={l:e,b:t,r:e,t:t}},_updateWithSegment:function(t,r){var n,i=t.args,a=i.length;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)this._updateBBox(i[n],i[n+1],r);this.last.x=i[a-2],this.last.y=i[a-1],this.absolute=!0;break;case"H":for(n=0;n<a;++n)this._updateBBox(i[n],this.last.y,r);this.last.x=i[a-1],this.absolute=!0;break;case"V":for(n=0;n<a;++n)this._updateBBox(this.last.x,i[n],r);this.last.y=i[a-1],this.absolute=!0;break;case"m":var o=0;"x"in this.last||(this._updateBBox(this.last.x=i[0],this.last.y=i[1],r),o=2);for(n=o;n<a;n+=2)this._updateBBox(this.last.x+=i[n],this.last.y+=i[n+1],r);this.absolute=!1;break;case"l":case"t":for(n=0;n<a;n+=2)this._updateBBox(this.last.x+=i[n],this.last.y+=i[n+1],r);this.absolute=!1;break;case"h":for(n=0;n<a;++n)this._updateBBox(this.last.x+=i[n],this.last.y,r);this.absolute=!1;break;case"v":for(n=0;n<a;++n)this._updateBBox(this.last.x,this.last.y+=i[n],r);this.absolute=!1;break;case"c":for(n=0;n<a;n+=6)this._updateBBox(this.last.x+i[n],this.last.y+i[n+1],r),this._updateBBox(this.last.x+i[n+2],this.last.y+i[n+3],r),this._updateBBox(this.last.x+=i[n+4],this.last.y+=i[n+5],r);this.absolute=!1;break;case"s":case"q":for(n=0;n<a;n+=4)this._updateBBox(this.last.x+i[n],this.last.y+i[n+1],r),this._updateBBox(this.last.x+=i[n+2],this.last.y+=i[n+3],r);this.absolute=!1;break;case"A":for(n=0;n<a;n+=7)this._updateBBox(i[n+5],i[n+6],r);this.last.x=i[a-2],this.last.y=i[a-1],this.absolute=!0;break;case"a":for(n=0;n<a;n+=7)this._updateBBox(this.last.x+=i[n+5],this.last.y+=i[n+6],r);this.absolute=!1}var s=[t.action];for(n=0;n<a;++n)s.push(e.formatNumber(i[n],!0));if("string"==typeof this.shape.path)this.shape.path+=s.join("");else for(n=0,a=s.length;n<a;++n)this.shape.path.push(s[n])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,t){this.tbbox=null;var r,n=this._validSegments[e.toLowerCase()];"number"==typeof n&&(n?t.length>=n&&(r={action:e,args:t.slice(0,t.length-t.length%n)},this.segments.push(r),this._updateWithSegment(r)):(r={action:e,args:[]},this.segments.push(r),this._updateWithSegment(r)))},_collectArgs:function(e,t){for(var r=0;r<t.length;++r){var n=t[r];"boolean"==typeof n?e.push(n?1:0):"number"==typeof n?e.push(n):n instanceof Array?this._collectArgs(e,n):"x"in n&&"y"in n&&e.push(n.x,n.y)}},moveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"M":"m",e),this},lineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"L":"l",e),this},hLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"H":"h",e),this},vLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"V":"v",e),this},curveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"C":"c",e),this},smoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"S":"s",e),this},qCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"Q":"q",e),this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"T":"t",e),this},arcTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"A":"a",e),this},closePath:function(){return this._confirmSegmented(),this._pushSegment("Z",[]),this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[],this._setPath(e),this.shape.path=this.shape.path.join(""),this.segmented=!0}},_setPath:function(r){var n=t.isArray(r)?r:r.match(e.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},n){for(var i="",a=[],o=n.length,s=0;s<o;++s){var l=n[s],u=parseFloat(l);isNaN(u)?(i&&this._pushSegment(i,a),a=[],i=l):a.push(u)}this._pushSegment(i,a)}},setShape:function(t){return this.inherited(arguments,["string"==typeof t?{path:t}:t]),this.segmented=!1,this.segments=[],e.lazyPathSegmentation||this._confirmSegmented(),this},_2PI:2*Math.PI}),o=r("dojox.gfx.path.TextPath",a,{constructor:function(r){"text"in this||(this.text=t.clone(e.defaultTextPath)),"fontStyle"in this||(this.fontStyle=t.clone(e.defaultFont))},getText:function(){return this.text},setText:function(t){return this.text=e.makeParameters(this.text,"string"==typeof t?{text:t}:t),this._setText(),this},getFont:function(){return this.fontStyle},setFont:function(t){return this.fontStyle="string"==typeof t?e.splitFontString(t):e.makeParameters(e.defaultFont,t),this._setFont(),this}});return e.path={Path:a,TextPath:o}}.apply(null,n))||(e.exports=i)},1508:function(e,t,r){var n,i;n=[r(1146),r(22),r(1185)],void 0===(i=function(e,t,r){var n=2*Math.PI,i=Math.PI/4,a=Math.PI/8,o=i+a,s=l(a);function l(e){var t=Math.cos(e),r=Math.sin(e),n={x:t+4/3*(1-t),y:r-4/3*t*(1-t)/r};return{s:{x:t,y:-r},c1:{x:n.x,y:-n.y},c2:n,e:{x:t,y:r}}}return e.arc={unitArcAsBezier:l,curvePI4:s,arcAsBezier:function(e,t,u,c,p,h,d,f){p=Boolean(p),h=Boolean(h);var y=r._degToRad(c),m=t*t,v=u*u,g=r.multiplyPoint(r.rotate(-y),{x:(e.x-d)/2,y:(e.y-f)/2}),x=g.x*g.x,b=g.y*g.y,S=Math.sqrt((m*v-m*b-v*x)/(m*b+v*x));isNaN(S)&&(S=0);var _={x:S*t*g.y/u,y:-S*u*g.x/t};p==h&&(_={x:-_.x,y:-_.y});var w=r.multiplyPoint([r.translate((e.x+d)/2,(e.y+f)/2),r.rotate(y)],_),T=r.normalize([r.translate(w.x,w.y),r.rotate(y),r.scale(t,u)]),P=r.invert(T),C=r.multiplyPoint(P,e),M=r.multiplyPoint(P,d,f),N=Math.atan2(C.y,C.x),L=N-Math.atan2(M.y,M.x);h&&(L=-L),L<0?L+=n:L>n&&(L-=n);for(var R=a,D=s,k=h?R:-R,F=[],O=L;O>0;O-=i){O<o&&(D=l(R=O/2),k=h?R:-R,O=0);var j,V,I=r.normalize([T,r.rotate(N+k)]);h?(S=r.multiplyPoint(I,D.c1),j=r.multiplyPoint(I,D.c2),V=r.multiplyPoint(I,D.e)):(S=r.multiplyPoint(I,D.c2),j=r.multiplyPoint(I,D.c1),V=r.multiplyPoint(I,D.s)),F.push([S.x,S.y,j.x,j.y,V.x,V.y]),N+=2*k}return F}}}.apply(null,n))||(e.exports=i)},1509:function(e,t,r){var n,i;n=[r(1146),r(22),r(1185)],void 0===(i=function(e,t,r){function n(e,t){return Math.abs(e-t)<=1e-6*(Math.abs(e)+Math.abs(t))}function i(e,t,r,n){return isFinite(e)?isFinite(r)?((t=Math.abs(t))*e+(n=Math.abs(n))*r)/(t+n):e:r}function a(e){return e.xx*e.yy<0||e.xy*e.yx>0?-1:1}function o(e){var t=r.normalize(e),i=-t.xx-t.yy,a=t.xx*t.yy-t.xy*t.yx,o=Math.sqrt(i*i-4*a),s=-(i+(i<0?-o:o))/2,l=a/s,u=t.xy/(s-t.xx),c=1,p=t.xy/(l-t.xx),h=1;n(s,l)&&(u=1,c=0,p=0,h=1),isFinite(u)||(u=1,c=(s-t.xx)/t.xy,isFinite(c)||(u=(s-t.yy)/t.yx,c=1,isFinite(u)||(u=1,c=t.yx/(s-t.yy)))),isFinite(p)||(p=1,h=(l-t.xx)/t.xy,isFinite(h)||(p=(l-t.yy)/t.yx,h=1,isFinite(p)||(p=1,h=t.yx/(l-t.yy))));var d=Math.sqrt(u*u+c*c),f=Math.sqrt(p*p+h*h);return isFinite(u/=d)||(u=0),isFinite(c/=d)||(c=0),isFinite(p/=f)||(p=0),isFinite(h/=f)||(h=0),{value1:s,value2:l,vector1:{x:u,y:c},vector2:{x:p,y:h}}}function s(e,t){var r=a(e),n=t.angle1=(Math.atan2(e.yx,e.yy)+Math.atan2(-r*e.xy,r*e.xx))/2,o=Math.cos(n),s=Math.sin(n);return t.sx=i(e.xx/o,o,-e.xy/s,s),t.sy=i(e.yy/o,o,e.yx/s,s),t}function l(e,t){var r=a(e),n=t.angle2=(Math.atan2(r*e.yx,r*e.xx)+Math.atan2(-e.xy,e.yy))/2,o=Math.cos(n),s=Math.sin(n);return t.sx=i(e.xx/o,o,e.yx/s,s),t.sy=i(e.yy/o,o,-e.xy/s,s),t}return e.decompose=function(e){var i=r.normalize(e),a={dx:i.dx,dy:i.dy,sx:1,sy:1,angle1:0,angle2:0};if(n(i.xy,0)&&n(i.yx,0))return t.mixin(a,{sx:i.xx,sy:i.yy});if(n(i.xx*i.yx,-i.xy*i.yy))return s(i,a);if(n(i.xx*i.xy,-i.yx*i.yy))return l(i,a);var u=function(e){var n=new r.Matrix2D(e);return t.mixin(n,{dx:0,dy:0,xy:n.yx,yx:n.xy})}(i),c=o([i,u]),p=o([u,i]),h=new r.Matrix2D({xx:c.vector1.x,xy:c.vector2.x,yx:c.vector1.y,yy:c.vector2.y}),d=new r.Matrix2D({xx:p.vector1.x,xy:p.vector1.y,yx:p.vector2.x,yy:p.vector2.y}),f=new r.Matrix2D([r.invert(h),i,r.invert(d)]);return s(d,a),f.xx*=a.sx,f.yy*=a.sy,l(h,a),f.xx*=a.sx,f.yy*=a.sy,t.mixin(a,{sx:f.xx,sy:f.yy})}}.apply(null,n))||(e.exports=i)},1510:function(e,t,r){var n,i;n=[r(1146)],void 0===(i=function(e){var t=e.bezierutils={},r=(t.tAtLength=function(e,t){var r=0,a=6==e.length,s=0,l=0,u=a?i:o,c=function(i,o){for(var p=0,h=0;h<i.length-2;h+=2)p+=n(i[h],i[h+1],i[h+2],i[h+3]);if(p-(a?n(e[0],e[1],e[4],e[5]):n(e[0],e[1],e[6],e[7]))>o||s+p>t+o){++l;var d=u(i,.5);if(c(d[0],o),Math.abs(s-t)<=o)return;c(d[1],o)}else s+=p,r+=1/(1<<l)};return t&&c(e,.5),r},t.computeLength=function(e){for(var t=6==e.length,o=0,s=0;s<e.length-2;s+=2)o+=n(e[s],e[s+1],e[s+2],e[s+3]);if(o-(t?n(e[0],e[1],e[4],e[5]):n(e[0],e[1],e[6],e[7]))>.1){var l=t?i(e,.5):a(e,.5),u=r(l[0],t);return u+=r(l[1],t)}return o}),n=t.distance=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},i=function(e,t){var r=1-t,n=r*r,i=t*t,a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=n*a+2*r*t*s+i*u,h=n*o+2*r*t*l+i*c;return[[a,o,r*a+t*s,r*o+t*l,p,h],[p,h,r*s+t*u,r*l+t*c,u,c]]},a=function(e,t){var r=1-t,n=r*r,i=n*r,a=t*t,o=a*t,s=e[0],l=e[1],u=e[2],c=e[3],p=e[4],h=e[5],d=e[6],f=e[7],y=i*s+3*n*t*u+3*r*a*p+o*d,m=i*l+3*n*t*c+3*r*a*h+o*f;return[[s,l,r*s+t*u,r*l+t*c,n*s+2*r*t*u+a*p,n*l+2*r*t*c+a*h,y,m],[y,m,n*u+2*r*t*p+a*d,n*c+2*r*t*h+a*f,r*p+t*d,r*h+t*f,d,f]]},o=t.splitBezierAtT=function(e,t){return 6==e.length?i(e,t):a(e,t)};return t}.apply(null,n))||(e.exports=i)},1511:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7),r(1),r(0),r(10),r(11),r(76),r(29),r(6),r(2),r(30),r(28),r(901),r(859),r(1512),r(1051),r(1513),r(915),r(1176),r(1514),r(1515),r(1516),r(1517)],void 0===(i=function(e,t,n,i,a,o,s,l,u,c,p,h,d,f,y,m,v,g,x,b,S,_,w,T){return function(e){function t(t){var r=e.call(this,t)||this;return r._timers=new Map,r.outSpatialReference=null,r.processExtent=null,r.processSpatialReference=null,r.returnFeatureCollection=!1,r.returnM=!1,r.returnZ=!1,r}return i(t,e),t.prototype.destroy=function(){this._timers.forEach((function(e){clearInterval(e)}))},t.prototype.cancelJob=function(e,t){var r=this.parsedUrl.path,i=n({},this.requestOptions,t,{query:{f:"json"}});return this._clearTimer(e),l(r+"/jobs/"+e+"/cancel",i).then((function(e){return S.fromJSON(e.data)}))},t.prototype.checkJobStatus=function(e,t){var r=this.parsedUrl.path,i=n({},this.requestOptions,t,{query:{f:"json"}});return l(r+"/jobs/"+e,i).then((function(e){return S.fromJSON(e.data)}))},t.prototype.execute=function(e,t){var r=this;return this._constructRequest("execute",e,t).then((function(e){var t=e.data.results||[],n=e.data.messages||[];return{results:t.map(r._decode),messages:n.map((function(e){return b.fromJSON(e)}))}}))},t.prototype.getResultData=function(e,t,r){var i=this,a=this,o=a.returnFeatureCollection,s=a.returnM,u=a.returnZ,c=a.outSpatialReference,p=a.parsedUrl.path,h={returnFeatureCollection:o||void 0,returnM:s||void 0,returnZ:u||void 0,outSR:c,returnType:"data",f:"json"},d=this._gpEncode(h,null),f=n({},this.requestOptions,r,{query:d});return l(p+"/jobs/"+e+"/results/"+t,f).then((function(e){return i._decode(e.data)}))},t.prototype.getResultImage=function(e,t,r,i){var a=this,o=this.parsedUrl.path,s=n({},r.toJSON(),{f:"json"}),u=this._gpEncode(s),c=n({},this.requestOptions,i,{query:u});return l(o+"/jobs/"+e+"/results/"+t,c).then((function(e){return a._decode(e.data)}))},t.prototype.getResultMapImageLayer=function(e){return s(this,void 0,void 0,(function(){var t,n,i,a;return o(this,(function(o){switch(o.label){case 0:return t=this.parsedUrl.path,n=t.indexOf("/GPServer/"),i=t.substring(0,n),a=i+"/MapServer/jobs/"+e,[4,c.create((function(e){return Promise.all([r.e(1),r.e(2),r.e(5),r.e(9),r.e(84)]).then(function(){var t=[r(1014)];e.apply(null,t)}.bind(this)).catch(r.oe)}))];case 1:return[2,new(o.sent())({url:a})]}}))}))},t.prototype.submitJob=function(e,t){return this._constructRequest("submitJob",e,t).then((function(e){return S.fromJSON(e.data)}))},t.prototype.waitForJobCompletion=function(e,t){var r=this;void 0===t&&(t={});var n=t.interval,i=void 0===n?1e3:n,a=t.signal,o=t.statusCallback;return c.create((function(t,n){c.onAbort(a,(function(){r._clearTimer(e),n(c.createAbortError())})),r._clearTimer(e);var s=setInterval((function(){r._timers.has(e)||n(c.createAbortError()),r._getJobStatus(e,r.requestOptions).then((function(i){var a=i.jobStatus;switch(a){case"job-succeeded":r._clearTimer(e),t(i);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":o&&o(i);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":r._clearTimer(e),n(i);break;default:u.neverReached(a)}}))}),i);r._timers.set(e,s)}))},t.prototype._clearTimer=function(e){this._timers.has(e)&&(clearInterval(this._timers.get(e)),this._timers.delete(e))},t.prototype._constructRequest=function(e,t,r){var i=this,a={},o={},s=[];return this._collectGeometries(t,s,a),f.normalizeCentralMeridian(s).then((function(s){var u=i,c=u.outSpatialReference,p=u.parsedUrl,h=u.processExtent,d=u.processSpatialReference,f=u.returnFeatureCollection,y=u.returnM,m=u.returnZ,v=p.path;for(var g in a){var x=a[g];o[g]=s.slice(x[0],x[1])}var b=c?c.wkid||c:null,S=d?d.wkid||d:null,_=n({},h?{context:{extent:h,outSR:b,processSR:S}}:{"env:outSR":b,"env:processSR":S},t,"execute"===e?{returnFeatureCollection:f||void 0,returnM:y||void 0,returnZ:m||void 0}:null,{f:"json"}),w=i._gpEncode(_,null,o),T=n({},i.requestOptions,r,{query:w});return l(v+"/"+e,T)}))},t.prototype._collectGeometries=function(e,t,r){for(var n in e){var i=e[n];if(i&&"object"==typeof i&&i instanceof x){var a=i.features;r[n]=[t.length,t.length+a.length],a.forEach((function(e){t.push(e.geometry)}))}}},t.prototype._decode=function(e){var t=e.dataType,r=w.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":return r;case"GPDate":r.value=new Date(r.value);break;case"GPDataFile":r.value=g.fromJSON(r.value);break;case"GPLinearUnit":r.value=_.fromJSON(r.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":var n=e.value.url;r.value=n?g.fromJSON(r.value):x.fromJSON(r.value);break;case"GPRasterData":case"GPRasterDataLayer":var i=e.value.mapImage;r.value=i?m.fromJSON(i):T.fromJSON(r.value);break;case"GPField":r.value=y.fromJSON(r.value);break;case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return r;case"GPMultiValue:GPDate":var a=r.value;r.value=a.map((function(e){return new Date(e)}));break;case"GPMultiValue:GPDataFile":r.value=r.value.map((function(e){return g.fromJSON(e)}));break;case"GPMultiValue:GPLinearUnit":r.value=r.value.map((function(e){return _.fromJSON(e)}));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":r.value=r.value.map((function(e){return x.fromJSON(e)}));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":r.value=r.value.map((function(e){return e?m.fromJSON(e):T.fromJSON(r.value)}));break;case"GPMultiValue:GPField":r.value=r.value.map((function(e){return y.fromJSON(e)}));break;default:u.neverReached(t)}return r},t.prototype._gpEncode=function(e,t,r){var n=this;for(var i in e){var a=e[i];Array.isArray(a)?e[i]=JSON.stringify(a.map((function(e){return n._gpEncode({item:e},!0).item}),this)):a instanceof Date&&(e[i]=a.getTime())}return this._encode(e,t,r)},t.prototype._getJobStatus=function(e,t){var r=this.parsedUrl.path+"/jobs/"+e,i=n({},this.requestOptions,t,{query:{f:"json"}});return l(r,i).then((function(e){return S.fromJSON(e.data)}))},a([p.property({type:d})],t.prototype,"outSpatialReference",void 0),a([p.property({type:h})],t.prototype,"processExtent",void 0),a([p.property({type:d})],t.prototype,"processSpatialReference",void 0),a([p.property({nonNullable:!0})],t.prototype,"returnFeatureCollection",void 0),a([p.property({nonNullable:!0})],t.prototype,"returnM",void 0),a([p.property({nonNullable:!0})],t.prototype,"returnZ",void 0),a([p.subclass("esri/tasks/Geoprocessor")],t)}(p.declared(v))}.apply(null,n))||(e.exports=i)},1512:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(103),r(4),r(2),r(30)],void 0===(i=function(e,t,r,n,i,a,o,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.extent=null,t.height=null,t.href=null,t.opacity=1,t.rotation=0,t.scale=null,t.visible=!0,t.width=null,t}return r(t,e),n([o.property({type:s})],t.prototype,"extent",void 0),n([o.property()],t.prototype,"height",void 0),n([o.property()],t.prototype,"href",void 0),n([o.property()],t.prototype,"opacity",void 0),n([o.property()],t.prototype,"rotation",void 0),n([o.property()],t.prototype,"scale",void 0),n([o.property()],t.prototype,"visible",void 0),n([o.property()],t.prototype,"width",void 0),n([o.subclass("esri.layer.support.MapImage")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},1513:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(4),r(2)],void 0===(i=function(e,t,r,n,i,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.itemId=null,r.url=null,r}return r(t,e),n([a.property({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],t.prototype,"itemId",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"url",void 0),n([a.subclass("esri.tasks.support.DataFile")],t)}(a.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},1514:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(2),r(1176)],void 0===(i=function(e,t,r,n,i,a,o,s){var l=new i.default({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});return function(e){function t(t){var r=e.call(this,t)||this;return r.jobId=null,r.jobStatus=null,r.messages=null,r}return r(t,e),n([o.property()],t.prototype,"jobId",void 0),n([o.property({json:{read:l.read}})],t.prototype,"jobStatus",void 0),n([o.property({type:[s]})],t.prototype,"messages",void 0),n([o.subclass("esri.tasks.support.JobInfo")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},1515:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(2)],void 0===(i=function(e,t,r,n,i,a,o){var s=new i.default({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});return function(e){function t(t){var r=e.call(this,t)||this;return r.distance=0,r.units=null,r}return r(t,e),n([o.property({json:{write:!0}})],t.prototype,"distance",void 0),n([o.property({json:{read:s.read,write:s.write}})],t.prototype,"units",void 0),n([o.subclass("esri/tasks/support/LinearUnit")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},1516:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(2)],void 0===(i=function(e,t,r,n,i,a,o){var s=new i.default({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});return function(e){function t(t){var r=e.call(this,t)||this;return r.dataType=null,r.value=null,r}return r(t,e),n([o.property({json:{read:s.read,write:s.write}})],t.prototype,"dataType",void 0),n([o.property()],t.prototype,"value",void 0),n([o.subclass("esri.tasks.support.ParameterValue")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},1517:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(4),r(2)],void 0===(i=function(e,t,r,n,i,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.format=null,r.itemId=null,r.url=null,r}return r(t,e),n([a.property()],t.prototype,"format",void 0),n([a.property({json:{read:{source:"itemID"},write:{target:"itemID"}}})],t.prototype,"itemId",void 0),n([a.property()],t.prototype,"url",void 0),n([a.subclass("esri/tasks/support/RasterData")],t)}(a.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},1518:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(18)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.default({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"});t.fromJSON=n.fromJSON.bind(n),t.toJSON=n.toJSON.bind(n)}.apply(null,n))||(e.exports=i)},1519:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(18)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.default({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"});t.fromJSON=n.fromJSON.bind(n),t.toJSON=n.toJSON.bind(n)}.apply(null,n))||(e.exports=i)},1520:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(67),r(21),r(1064)],void 0===(i=function(e,t,r,n,i){function a(e){return e&&"esri.views.layers.GroupLayerView"===e.declaredClass}Object.defineProperty(t,"__esModule",{value:!0}),t.applyVisualVariables=function(e,t){var r=t.graphic,a=t.renderer,o=t.symbol,s=o.type;if("text"!==s&&"shield-label-symbol"!==s&&"visualVariables"in a&&a.visualVariables){var l=a.getVisualVariablesForType("size"),u=a.getVisualVariablesForType("color"),c=a.getVisualVariablesForType("opacity"),p=a.getVisualVariablesForType("rotation"),h=l&&l[0],d=u&&u[0],f=c&&c[0],y=p&&p[0];if(h){var m="simple-marker"===s?o.style:null,v=i.getSize(h,r,{shape:m});null!=v&&("simple-marker"===s?e.size=n.px2pt(v):"picture-marker"===s?(e.width=n.px2pt(v),e.height=n.px2pt(v)):"simple-line"===s?e.width=n.px2pt(v):e.outline&&(e.outline.width=n.px2pt(v)))}if(d){var g=i.getColor(d,r);(g&&"simple-marker"===s||"simple-line"===s||"simple-fill"===s)&&(e.color=g?g.toJSON():void 0)}if(f){var x=i.getOpacity(f,r);null!=x&&e.color&&(e.color[3]=Math.round(255*x))}y&&(e.angle=-i.getRotationAngle(a,r))}},t.createMultipointLayer=function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},t.createPolygonLayer=function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},t.createPointLayer=function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},t.createPolylineLayer=function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},t.getVisibleLayerViews=function(e,t){var n,i=e.allLayerViews.items;if(t===e.scale)n=i.filter((function(e){return!e.suspended}));else{n=[];for(var o=0,s=i;o<s.length;o++){var l=s[o];a(l.parent)&&!r.includes(n,l.parent)||!l.visible||t&&"isVisibleAtScale"in l&&!l.isVisibleAtScale(t)||n.push(l)}}return n},t.isBingMapsLayer=function(e){return e&&"bing-maps"===e.type},t.isCSVLayer=function(e){return e&&"csv"===e.type},t.isFeatureLayer=function(e){return e&&"feature"===e.type},t.isGraphicsLayer=function(e){return e&&"graphics"===e.type},t.isGroupLayer=function(e){return e&&"group"===e.type},t.isImageryLayer=function(e){return e&&"imagery"===e.type},t.isKMLLayer=function(e){return e&&"kml"===e.type},t.isMapImageLayer=function(e){return e&&"map-image"===e.type},t.isMapNotesLayer=function(e){return e&&"map-notes"===e.type},t.isOpenStreetMapLayer=function(e){return e&&"open-street-map"===e.type},t.isStreamLayer=function(e){return e&&"stream"===e.type},t.isTileLayer=function(e){return e&&"tile"===e.type},t.isVectorTileLayer=function(e){return e&&"vector-tile"===e.type},t.isWebTileLayer=function(e){return e&&"web-tile"===e.type},t.isWMSLayer=function(e){return e&&"wms"===e.type},t.isWMTSLayer=function(e){return e&&"wmts"===e.type}}.apply(null,n))||(e.exports=i)},1521:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(8),r(2)],void 0===(i=function(e,t,r,n,i,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.attributionVisible=!0,r.exportOptions={width:800,height:1100,dpi:96},r.forceFeatureAttributes=!1,r.format="png32",r.label=null,r.layout="map-only",r.layoutOptions=null,r.outScale=0,r.preserveScale=!0,r.showLabels=!0,r}return r(t,e),n([a.property()],t.prototype,"attributionVisible",void 0),n([a.property()],t.prototype,"exportOptions",void 0),n([a.property()],t.prototype,"forceFeatureAttributes",void 0),n([a.property({type:["pdf","png32","png8","jpg","gif","eps","svg","svgz"]})],t.prototype,"format",void 0),n([a.property()],t.prototype,"label",void 0),n([a.property({type:["map-only","a3-landscape","a3-portrait","a4-landscape","a4-portrait","letter-ansi-a-landscape","letter-ansi-a-portrait","tabloid-ansi-b-landscape","tabloid-ansi-b-portrait"]})],t.prototype,"layout",void 0),n([a.property()],t.prototype,"layoutOptions",void 0),n([a.property()],t.prototype,"outScale",void 0),n([a.property()],t.prototype,"preserveScale",void 0),n([a.property()],t.prototype,"showLabels",void 0),n([a.subclass("esri.tasks.support.PrintTemplate")],t)}(a.declared(i))}.apply(null,n))||(e.exports=i)},787:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7),r(11),r(1),r(0),r(10),r(1499),r(68),r(76),r(18),r(3),r(6),r(21),r(64),r(37),r(2),r(146),r(1064),r(1511),r(1051),r(1518),r(1519),r(1520),r(1521),r(899)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f,y,m,v,g,x,b,S,_,w,T,P){var C={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},M=new c.default({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),N=new c.default({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),L=new P({returnGeometry:!0});function R(e){return e&&(e.path||"image/svg+xml"===e.contentType)}return function(e){function t(t){var r=e.call(this,t)||this;return r._ssExtent=null,r._legendLayers=[],r._legendLayerNameMap={},r._gpServerUrl=null,r._cimVersion=null,r._is11xService=!1,r._gpMetadata=null,r.updateDelay=1e3,r}return i(t,e),Object.defineProperty(t.prototype,"_geoprocessor",{get:function(){return new x({url:this.url})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._gpMetadata&&this._gpMetadata.executionType?N.fromJSON(this._gpMetadata.executionType):"sync"},enumerable:!0,configurable:!0}),t.prototype.execute=function(e,t){var r=this,n=this.url,i=n.lastIndexOf("/GPServer/");return i>0&&(n=n.slice(0,i+9)),h.resolve().then((function(){return r._gpServerUrl===n?{data:r._gpMetadata}:(r._gpServerUrl=n,u(n,{query:{f:"json"}}))})).then((function(t){return r._gpMetadata=t.data,r._cimVersion=r._gpMetadata.cimVersion,r._is11xService=!!r._cimVersion,r._getGpPrintParams(e)})).then((function(e){var n=function(e){return"sync"===r.mode?e.results&&e.results[0]&&e.results[0].value:r._geoprocessor.getResultData(e.jobId,"Output_File",t).then((function(e){return e.value}))};return"async"===r.mode?r._geoprocessor.submitJob(e,t).then((function(e){return r._geoprocessor.waitForJobCompletion(e.jobId,{interval:r.updateDelay}).then(n)})):r._geoprocessor.execute(e,t).then(n)}))},t.prototype._createOperationalLayers=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i,a,s,l,u,c,p;return o(this,(function(o){switch(o.label){case 0:r=[],n={layerView:null,printTemplate:t,view:e},i=0,t.preserveScale&&(i=t.outScale||e.scale),a=w.getVisibleLayerViews(e,i),s=0,l=a,o.label=1;case 1:return s<l.length?(u=l[s],!(c=u.layer).loaded||w.isGroupLayer(c)?[3,26]:(p=void 0,n.layerView=u,w.isBingMapsLayer(c)?(p=this._createBingMapsLayerJSON(c),[3,25]):[3,2])):[3,27];case 2:return w.isCSVLayer(c)?[4,this._createCSVLayerJSON(c,n)]:[3,4];case 3:return p=o.sent(),[3,25];case 4:return w.isFeatureLayer(c)?[4,this._createFeatureLayerJSON(c,n)]:[3,6];case 5:return p=o.sent(),[3,25];case 6:return w.isGraphicsLayer(c)?[4,this._createGraphicsLayerJSON(c,n)]:[3,8];case 7:return p=o.sent(),[3,25];case 8:return w.isImageryLayer(c)?(p=this._createImageryLayerJSON(c),[3,25]):[3,9];case 9:return w.isKMLLayer(c)?[4,this._createKMLLayerJSON(c,n)]:[3,11];case 10:return p=o.sent(),[3,25];case 11:return w.isMapImageLayer(c)?(p=this._createMapImageLayerJSON(c,n),[3,25]):[3,12];case 12:return w.isMapNotesLayer(c)?[4,this._createMapNotesLayerJSON(n)]:[3,14];case 13:return p=o.sent(),[3,25];case 14:return w.isOpenStreetMapLayer(c)?(p=this._createOpenStreetMapLayerJSON(),[3,25]):[3,15];case 15:return w.isStreamLayer(c)?[4,this._createStreamLayerJSON(c,n)]:[3,17];case 16:return p=o.sent(),[3,25];case 17:return w.isTileLayer(c)?(p=this._createTileLayerJSON(c),[3,25]):[3,18];case 18:return w.isVectorTileLayer(c)?[4,this._createVectorTileLayerJSON(c,n)]:[3,20];case 19:return p=o.sent(),[3,25];case 20:return w.isWebTileLayer(c)?(p=this._createWebTileLayerJSON(c),[3,25]):[3,21];case 21:return w.isWMSLayer(c)?(p=this._createWMSLayerJSON(c),[3,25]):[3,22];case 22:return w.isWMTSLayer(c)?(p=this._createWMTSLayerJSON(c),[3,25]):[3,23];case 23:return[4,this._createScreenshotJSON(c,n)];case 24:p=o.sent(),o.label=25;case 25:p&&(Array.isArray(p)?r.push.apply(r,p):(p.id=c.id,p.title=this._legendLayerNameMap[c.id]||c.title,p.opacity=c.opacity,p.minScale=c.minScale||0,p.maxScale=c.maxScale||0,r.push(p))),o.label=26;case 26:return s++,[3,1];case 27:return i&&r.forEach((function(e){e.minScale=0,e.maxScale=0})),e.graphics&&e.graphics.length?[4,this._createFeatureCollectionJSON(null,e.graphics,t)]:[3,29];case 28:(p=o.sent())&&r.push(p),o.label=29;case 29:return[2,r]}}))}))},t.prototype._createBingMapsLayerJSON=function(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}},t.prototype._createCSVLayerJSON=function(e,t){var r=t.layerView,i=t.printTemplate;return n(this,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),this._is11xService?(t={type:"CSV"},e.write(t,{origin:"web-map"}),delete t.popupInfo,delete t.layerType,t.showLabels=i.showLabels&&e.labelsVisible,[3,3]):[3,1];case 1:return[4,this._getGraphics(r)];case 2:return n=a.sent(),[2,this._createFeatureCollectionJSON(e,n,i)];case 3:return[2,t]}}))}))},t.prototype._createFeatureCollectionJSON=function(e,t,r){return n(this,void 0,void 0,(function(){var n,i,a,s,l,u,c,p,h,d,y,m,g,x,b,S,_,T,P=this;return o(this,(function(C){switch(C.label){case 0:return n=e,i=w.createPolygonLayer(),a=w.createPolylineLayer(),s=w.createPointLayer(),l=w.createMultipointLayer(),(u=w.createPointLayer()).layerDefinition.name="textLayer",delete u.layerDefinition.drawingInfo,n&&("esri.layers.FeatureLayer"===n.declaredClass||"esri.layers.StreamLayer"===n.declaredClass?i.layerDefinition.name=a.layerDefinition.name=s.layerDefinition.name=l.layerDefinition.name=this._legendLayerNameMap[n.id]||n.get("arcgisProps.title")||n.title:"esri.layers.GraphicsLayer"===n.declaredClass&&(t=n.graphics.items)),n&&n.renderer?(c=n.renderer.toJSON(),i.layerDefinition.drawingInfo.renderer=c,a.layerDefinition.drawingInfo.renderer=c,s.layerDefinition.drawingInfo.renderer=c,l.layerDefinition.drawingInfo.renderer=c):(delete i.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete s.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo),h=n&&n.fields,d=n&&n.renderer,h&&d&&"function"==typeof d.collectRequiredFields?(y=new Set,[4,d.collectRequiredFields(y,h)]):[3,2];case 1:C.sent(),p=f.valuesOfSet(y),C.label=2;case 2:h&&(m=h.map((function(e){return e.toJSON()})),i.layerDefinition.fields=m,a.layerDefinition.fields=m,s.layerDefinition.fields=m,l.layerDefinition.fields=m),g=t&&t.length,b=function(e){var c,h,d,f,y;return o(this,(function(o){switch(o.label){case 0:return!1!==(c=t[e]||t.getItemAt(e)).visible&&c.geometry?((x=c.toJSON()).hasOwnProperty("popupTemplate")&&delete x.popupTemplate,x.geometry&&x.geometry.z&&delete x.geometry.z,x.symbol&&x.symbol.outline&&"esriCLS"===x.symbol.outline.type&&!S._is11xService?[2,"continue"]:(!S._is11xService&&x.symbol&&x.symbol.outline&&x.symbol.outline.color&&x.symbol.outline.color[3]&&(x.symbol.outline.color[3]=255),h=n&&n.renderer&&("valueExpression"in n.renderer&&n.renderer.valueExpression||"hasVisualVariables"in n.renderer&&n.renderer.hasVisualVariables()),!x.symbol&&n&&n.renderer&&h&&!S._is11xService?[4,(d=n.renderer).getSymbolAsync(c)]:[3,2])):[2,"continue"];case 1:if(!(f=o.sent()))return[2,"continue"];x.symbol=f.toJSON(),"hasVisualVariables"in d&&d.hasVisualVariables()&&w.applyVisualVariables(x.symbol,{renderer:d,graphic:c,symbol:f}),o.label=2;case 2:return x.symbol&&(x.symbol.angle||delete x.symbol.angle,R(x.symbol)?x.symbol=S._convertSvgToPictureMarkerSymbolJson(x.symbol):x.symbol.text&&delete x.attributes),r&&r.forceFeatureAttributes||!p||!p.length||(y={},p.forEach((function(e){x.attributes&&x.attributes.hasOwnProperty(e)&&(y[e]=x.attributes[e])})),x.attributes=y),"polygon"===c.geometry.type?i.featureSet.features.push(x):"polyline"===c.geometry.type?a.featureSet.features.push(x):"point"===c.geometry.type?x.symbol&&x.symbol.text?u.featureSet.features.push(x):s.featureSet.features.push(x):"multipoint"===c.geometry.type?l.featureSet.features.push(x):"extent"===c.geometry.type&&(x.geometry=v.fromExtent(c.geometry).toJSON(),i.featureSet.features.push(x)),[2]}}))},S=this,_=0,C.label=3;case 3:return _<g?[5,b(_)]:[3,6];case 4:C.sent(),C.label=5;case 5:return _++,[3,3];case 6:return(T=[i,a,l,s,u].filter((function(e){return e.featureSet.features.length>0}))).forEach((function(e){var t=e.featureSet.features.every((function(e){return e.symbol}));!t||r&&r.forceFeatureAttributes||e.featureSet.features.forEach((function(e){delete e.attributes})),t&&delete e.layerDefinition.drawingInfo,e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&P._convertSvgRenderer(e.layerDefinition.drawingInfo.renderer)})),[2,T.length?{featureCollection:{layers:T}}:null]}}))}))},t.prototype._createFeatureLayerJSON=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i,a,s,l,u,c,p,h;return o(this,(function(o){switch(o.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),n=e.renderer,e.featureReduction||n&&"dot-density"===n.type?[2,this._createScreenshotJSON(e,t)]:(i=t.layerView,a=t.printTemplate,s=t.view,l=n&&("valueExpression"in n&&n.valueExpression||"hasVisualVariables"in n&&n.hasVisualVariables()),u=e.source&&"feature-layer"!==e.source.type,!this._is11xService&&l||e.featureReduction||u||!n||"field"in n&&null!=n.field&&("string"!=typeof n.field||!e.getField(n.field))?[3,1]:(r={},this._setURLandToken(r,e),e.write(r,{origin:"web-map"}),delete r.layerType,delete r.popupInfo,delete r.visibility,r.showLabels=a.showLabels&&e.labelsVisible,r.layerDefinition&&r.layerDefinition.drawingInfo&&r.layerDefinition.drawingInfo.renderer&&(this._convertSvgRenderer(r.layerDefinition.drawingInfo.renderer),"visualVariables"in n&&n.visualVariables&&n.visualVariables[0]&&"size"===(c=n.visualVariables[0]).type&&c.maxSize&&"number"!=typeof c.maxSize&&c.minSize&&"number"!=typeof c.minSize&&(p=g.getSizeRangeAtScale(c,s.scale),r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=p.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=p.maxSize)),[3,4]));case 1:return[4,this._getGraphics(i)];case 2:return h=o.sent(),[4,this._createFeatureCollectionJSON(e,h,a)];case 3:r=o.sent(),o.label=4;case 4:return[2,r]}}))}))},t.prototype._createGraphicsLayerJSON=function(e,t){var r=t.printTemplate;return n(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._createFeatureCollectionJSON(e,null,r)]}))}))},t.prototype._createImageryLayerJSON=function(e){this._legendLayers&&this._legendLayers.push({id:e.id});var t={bandIds:e.bandIds,compressionQuality:e.compressionQuality,format:e.format,interpolation:e.interpolation};if((e.mosaicRule||e.definitionExpression)&&(t.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(this._is11xService)e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),e.renderer&&(t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{var r=e.exportImageServiceParameters.combineRendererWithRenderingRule();r&&(t.renderingRule=r.toJSON())}return this._setURLandToken(t,e),t},t.prototype._createKMLLayerJSON=function(e,t){return n(this,void 0,void 0,(function(){var n,i,a,s,l,u,c;return o(this,(function(o){switch(o.label){case 0:return n=t.printTemplate,this._is11xService?(i={type:"kml"},e.write(i,{origin:"web-map"}),delete i.layerType,i.url=y.normalize(e.url),[2,i]):(a=[],(s=t.layerView).allVisibleMapImages.forEach((function(t,r){var n={id:e.id+"_image"+r,type:"image",title:e.id,minScale:e.minScale||0,maxScale:e.maxScale||0,opacity:e.opacity,extent:t.extent};"data:image/png;base64,"===t.href.substr(0,22)?n.imageData=t.href.substr(22):n.url=t.href,a.push(n)})),l=s.allVisiblePoints.items.concat(s.allVisiblePolylines.items,s.allVisiblePolygons.items),c=[{id:e.id}],[4,this._createFeatureCollectionJSON(null,l,n)]);case 1:return u=r.apply(void 0,c.concat([o.sent()])),a.push(u),[2,a]}}))}))},t.prototype._createMapImageLayerJSON=function(e,t){var r,n=t.view,i={id:e.id,subLayerIds:[]},a=[],o=n.scale,s=function(e){var t=0===o,r=0===e.minScale||o<=e.minScale,n=0===e.maxScale||o>=e.maxScale;if(e.visible&&(t||r&&n))if(e.sublayers)e.sublayers.forEach(s);else{var l=e.write({}),u=e.toExportImageJSON();l.layerDefinition={drawingInfo:u.drawingInfo,definitionExpression:u.definitionExpression,source:u.source},a.unshift(l),i.subLayerIds.push(e.id)}};return e.sublayers&&e.sublayers.forEach(s),a.length&&(r={layers:a=a.map((function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}})),visibleLayers:i.subLayerIds},this._setURLandToken(r,e),this._legendLayers.push(i)),r},t.prototype._createMapNotesLayerJSON=function(e){var t=e.layerView,r=e.printTemplate;return n(this,void 0,void 0,(function(){var e,n,i,a,s;return o(this,(function(o){switch(o.label){case 0:e=[],n=0,i=t.graphicsViews,o.label=1;case 1:return n<i.length?(a=i[n],[4,this._createFeatureCollectionJSON(a,a.graphics,r)]):[3,4];case 2:(s=o.sent())&&e.push.apply(e,s.featureCollection.layers),o.label=3;case 3:return n++,[3,1];case 4:return[2,{featureCollection:{layers:e}}]}}))}))},t.prototype._createOpenStreetMapLayerJSON=function(){return{type:"OpenStreetMap"}},t.prototype._createScreenshotJSON=function(e,t){var r=t.printTemplate,i=t.view;return n(this,void 0,void 0,(function(){var t,n,a,s,l,u,c,p,h,f;return o(this,(function(o){switch(o.label){case 0:return t={type:"image"},n={format:"png",ignoreBackground:!0,layers:[e],rotation:0},a=this._ssExtent||i.extent.clone(),s=96,l=!0,u=!0,r.exportOptions&&((c=r.exportOptions).dpi>0&&(s=c.dpi),c.width>0&&(l=c.width%2==i.width%2),c.height>0&&(u=c.height%2==i.height%2)),"map-only"!==r.layout||!r.preserveScale||r.outScale&&r.outScale!==i.scale||96!==s||l&&u||(n.area={x:0,y:0,width:i.width,height:i.height},l||(n.area.width-=1),u||(n.area.height-=1),this._ssExtent||(p=i.toMap(d.createScreenPoint(n.area.width,n.area.height)),a.ymin=p.y,a.xmax=p.x,this._ssExtent=a)),t.extent=a.clone()._normalize(!0).toJSON(),[4,i.takeScreenshot(n)];case 1:return h=o.sent(),f=y.dataComponents(h.dataUrl),t.imageData=f.data,[2,t]}}))}))},t.prototype._createStreamLayerJSON=function(e,t){var r=t.layerView,i=t.printTemplate;return n(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),[4,this._getGraphics(r)];case 1:return t=n.sent(),[2,this._createFeatureCollectionJSON(e,t,i)]}}))}))},t.prototype._createTileLayerJSON=function(e){var t={};return this._setURLandToken(t,e),t},t.prototype._createVectorTileLayerJSON=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i;return o(this,(function(a){return this._is11xService&&e.serviceUrl&&e.styleUrl&&(r=l.id&&l.id.findCredential(e.styleUrl),n=l.id&&l.id.findCredential(e.serviceUrl),!r&&!n||"2.1.0"!==this._cimVersion)?((i={type:"VectorTileLayer"}).styleUrl=y.normalize(e.styleUrl),r&&(i.token=r.token),n&&n.token!==i.token&&(i.additionalTokens=[{url:e.serviceUrl,token:n.token}]),[2,i]):[2,this._createScreenshotJSON(e,t)]}))}))},t.prototype._createWebTileLayerJSON=function(e){var t={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(t.subDomains=e.subDomains),t},t.prototype._createWMSLayerJSON=function(e){var t,r=[],n=function(e){e.visible&&(e.sublayers?e.sublayers.forEach(n):e.name&&r.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(n),r.length&&(t={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:r,url:y.normalize(e.url),version:e.version}),t},t.prototype._createWMTSLayerJSON=function(e){var t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:y.normalize(e.url)}},t.prototype._setURLandToken=function(e,t){if(t.url){e.url=y.normalize(t.url);var r=l.id&&l.id.findCredential(t.url);r&&(e.token=r.token)}},t.prototype._convertSvgToPictureMarkerSymbolJson=function(e){var t;this._canvasParent?(this._canvasSurface.clear(),this._canvasSurface.setDimensions(1024,1024)):(this._canvasParent=document.createElement("div"),this._canvasSurface=s.createSurface(this._canvasParent,1024,1024)),t="image/svg+xml"===e.contentType?this._canvasSurface.createObject(s.Image,{src:"data:image/svg+xml;base64,"+e.imageData,width:d.pt2px(e.width),height:d.pt2px(e.height),x:0,y:0}):this._canvasSurface.createObject(s.Path,e.path).setFill(e.color).setStroke(e.outline),"pendingRender"in this._canvasSurface&&this._canvasSurface._render(!0);var r=this._canvasSurface.rawNode.getContext("2d"),n=t.getBoundingBox(),i=Math.ceil(n.width+n.x),a=Math.ceil(n.height+n.y),o=r.getImageData(n.x,n.y,i,a);return r.canvas.width=i,r.canvas.height=a,r.putImageData(o,0,0),{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").substr(22),angle:e.angle,contentType:"image/png",height:e.size?e.size:a-n.y,width:e.size?e.size:i-n.x,xoffset:e.xoffset,yoffset:e.yoffset}},t.prototype._convertSvgRenderer=function(e){var t=this,r=e.type;if("simple"===r&&R(e.symbol))e.symbol=this._convertSvgToPictureMarkerSymbolJson(e.symbol);else if("unique-value"===r||"class-breaks"===r){R(e.defaultSymbol)&&(e.defaultSymbol=this._convertSvgToPictureMarkerSymbolJson(e.defaultSymbol));var n=e["unique-value"===r?"uniqueValueInfos":"classBreakInfos"];n&&n.forEach((function(e){R(e.symbol)&&(e.symbol=t._convertSvgToPictureMarkerSymbolJson(e.symbol))}))}},t.prototype._getGraphics=function(e){return e.queryFeatures(L).then((function(e){return e.features}))},t.prototype._getPrintDefinition=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i,a,s;return o(this,(function(o){switch(o.label){case 0:return r=e.view,n=r.spatialReference,a={},[4,this._createOperationalLayers(r,t)];case 1:return a.operationalLayers=o.sent(),i=a,s=this._ssExtent||e.extent||r.extent,n&&n.isWrappable&&(s=s.clone()._normalize(!0),n=s.spatialReference),i.mapOptions={extent:s&&s.toJSON(),spatialReference:n&&n.toJSON(),showAttribution:t.attributionVisible},this._ssExtent=null,r.rotation&&(i.mapOptions.rotation=-r.rotation),t.preserveScale&&(i.mapOptions.scale=t.outScale||r.scale),[2,i]}}))}))},t.prototype._getGpPrintParams=function(e){return n(this,void 0,void 0,(function(){var t,r,n,i,a,s,l,u,c,h,d,f,y,m,v,g,x,b,w,P=this;return o(this,(function(o){switch(o.label){case 0:return null==(t=e.template||new T).showLabels&&(t.showLabels=!0),r=t.exportOptions,i=_.toJSON(t.layout),r&&(a=r.dpi,n={dpi:a},"map_only"!==i.toLowerCase()&&""!==i||(s=r.width,l=r.height,n.outputSize=[s,l])),(u=t.layoutOptions)&&(h=void 0,d=void 0,"Miles"===u.scalebarUnit||"Kilometers"===u.scalebarUnit?(h="Kilometers",d="Miles"):"Meters"!==u.scalebarUnit&&"Feet"!==u.scalebarUnit||(h="Meters",d="Feet"),c={titleText:u.titleText,authorText:u.authorText,copyrightText:u.copyrightText,customTextElements:u.customTextElements,scaleBarOptions:{metricUnit:M.toJSON(h),metricLabel:C[h],nonMetricUnit:M.toJSON(d),nonMetricLabel:C[d]}}),f=null,u&&u.legendLayers&&(f=u.legendLayers.map((function(e){P._legendLayerNameMap[e.layerId]=e.title;var t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t}))),[4,this._getPrintDefinition(e,t)];case 1:return(y=o.sent()).operationalLayers&&(v=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),g=/[\u0600-\u06FF]/,x=function(e){var t=e.text,r=e.font,n=r&&r.family&&r.family.toLowerCase();t&&r&&("arial"===n||"arial unicode ms"===n)&&(r.family=v.test(t)?"Arial Unicode MS":"Arial","normal"!==r.style&&g.test(t)&&(r.family="Arial Unicode MS"))},y.operationalLayers.forEach((function(e){e.featureCollection&&e.featureCollection.layers&&e.featureCollection.layers.forEach((function(e){e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&e.layerDefinition.drawingInfo.renderer.symbol&&"esriTS"===(m=e.layerDefinition.drawingInfo.renderer).symbol.type&&x(m.symbol),e.featureSet&&e.featureSet.features&&e.featureSet.features.forEach((function(e){e.symbol&&"esriTS"===e.symbol.type&&x(e.symbol)}))}))}))),e.outSpatialReference&&(y.mapOptions.spatialReference=e.outSpatialReference.toJSON()),p.mixin(y,{exportOptions:n,layoutOptions:c}),p.mixin(y.layoutOptions,{legendOptions:{operationalLayers:null!=f?f:this._legendLayers.slice()}}),this._legendLayers.length=0,b=JSON.stringify(y),w={Web_Map_as_JSON:b,Format:S.toJSON(t.format),Layout_Template:i},e.extraParameters&&p.mixin(w,e.extraParameters),[2,w]}}))}))},a([m.property({dependsOn:["url"]})],t.prototype,"_geoprocessor",null),a([m.property()],t.prototype,"_gpMetadata",void 0),a([m.property({dependsOn:["_gpMetadata"],readOnly:!0})],t.prototype,"mode",null),a([m.property()],t.prototype,"updateDelay",void 0),a([m.subclass("esri.tasks.PrintTask")],t)}(m.declared(b))}.apply(null,n))||(e.exports=i)},835:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7),r(25),r(5),r(97),r(99),r(845),r(844)],void 0===(i=function(e,t,r,n,i,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=i.getLogger("esri.renderers.support.utils"),c={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},p={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function h(e,t,r){var n="";return 0===t?n="< ":t===r&&(n="> "),n+e}function d(e){var t=e.minValue,r=e.maxValue,n=e.isFirstBreak?"":"> ",i="percent-of-total"===e.normalizationType?"%":"";return n+(t=null==t?"":s.format(t))+i+"  "+(r=null==r?"":s.format(r))+i}function f(e,t){return"normalizationField"in e&&e.normalizationField?{type:"normalized-field",field:e.field,normalizationField:e.normalizationField}:"field"in e&&e.field?y(e.field):"valueExpression"in e&&e.valueExpression?{type:"expression",expression:e.valueExpression,title:e.valueExpressionTitle,returnType:t}:null}function y(e){return{type:"field",field:e}}t.meterIn={inches:a.convertUnit(1,"meters","inches"),feet:a.convertUnit(1,"meters","feet"),"us-feet":a.convertUnit(1,"meters","us-feet"),yards:a.convertUnit(1,"meters","yards"),miles:a.convertUnit(1,"meters","miles"),"nautical-miles":a.convertUnit(1,"meters","nautical-miles"),millimeters:a.convertUnit(1,"meters","millimeters"),centimeters:a.convertUnit(1,"meters","centimeters"),decimeters:a.convertUnit(1,"meters","decimeters"),meters:a.convertUnit(1,"meters","meters"),kilometers:a.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/a.lengthToDegrees(1,"meters")},t.timelineDateFormatOptions=o.convertDateFormatToIntlOptions("short-date"),t.createColorStops=function(e){var t=e.values,r=e.colors,n=e.labelIndexes,i=e.isDate,a=e.dateFormatOptions;return t.map((function(e,u){var c=null;if(!n||n.indexOf(u)>-1){var p;(p=i?o.formatDate(e,a):s.format(e))&&(c=h(p,u,t.length-1))}return new l({value:e,color:r[u],label:c})}))},t.updateColorStops=function(e){for(var t=e.stops,r=e.changes,n=e.isDate,i=e.dateFormatOptions,a=t.map((function(e){return e.value})),l=[],u=0,c=r;u<c.length;u++){var p=c[u];l.push(p.index),a[p.index]=p.value}var d=s.round(a,{indexes:l});t.forEach((function(e,r){if(e.value=a[r],null!=e.label){var l,u=null;(l=n?o.formatDate(d[r],i):s.format(d[r]))&&(u=h(l,r,t.length-1)),e.label=u}}))},t.createClassBreakLabel=d,t.setLabelsForClassBreaks=function(e){var t=e.classBreakInfos,r=e.normalizationType,n=[];if(t&&t.length)if("standard-deviation"!==e.classificationMethod)if(e.round){n.push(t[0].minValue);for(var i=0,a=t;i<a.length;i++){var o=a[i];n.push(o.maxValue)}n=s.round(n),t.forEach((function(e,t){e.label=d({minValue:0===t?n[0]:n[t],maxValue:n[t+1],isFirstBreak:0===t,normalizationType:r})}))}else t.forEach((function(e,t){e.label=d({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===t,normalizationType:r})}));else u.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.")},t.updateClassBreak=function(e){if("standard-deviation"!==e.classificationMethod){var t=e.classBreaks,r=e.change,n=r.index,i=r.value,a=t.length,o=-1,s=-1;0===n?o=n:n===a?s=n-1:(s=n-1,o=n);var l=e.normalizationType,c=null;o>-1&&o<a&&((c=t[o]).minValue=i,c.label=d({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===o,normalizationType:l})),s>-1&&s<a&&((c=t[s]).maxValue=i,c.label=d({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===s,normalizationType:l}))}else u.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.")},t.calculateDateFormatInterval=function(e){for(var t=e.map((function(e){return new Date(e)})),r=t.length,n=1/0,i=null,a=0;a<r-1;a++){for(var o=t[a],s=[],l=1/0,u=null,p=a+1;p<r;p++){var h=t[p],d=(o.getFullYear()!==h.getFullYear()?"year":o.getMonth()!==h.getMonth()&&"month")||o.getDate()!==h.getDate()&&"day"||o.getHours()!==h.getHours()&&"hour"||o.getMinutes()!==h.getMinutes()&&"minute"||o.getSeconds()!==h.getSeconds()&&"second"||"millisecond",f=c[d];f<l&&(l=f,u=d),s.push(d)}l<n&&(n=l,i=u)}return i},t.createUniqueValueLabel=function(e){var t=e.value,r=e.domain,n=e.fieldInfo,i=e.dateFormatInterval,a=String(t),l=r&&"codedValues"in r&&r.codedValues?r.getName(t):null;return l?a=l:"number"==typeof t&&(a=n&&"date"===n.type?o.formatDate(t,i&&o.convertDateFormatToIntlOptions(p[i])):s.format(t)),a},t.getAttributes=function(e,t){var r=[];if("class-breaks"===e.type||"heatmap"===e.type)r.push(f(e,"number"));else if("unique-value"===e.type){var i=e.uniqueValueInfos[0],a=null;if(i&&i.value){var o=typeof e.uniqueValueInfos[0].value;"string"!==o&&"number"!==o||(a=o)}r.push(f(e,a)),[e.field2,e.field3].forEach((function(e){return e&&r.push(y(e))}))}else"dot-density"===e.type&&e.attributes.forEach((function(e){return r.push(f(e,"number"))}));var s=t?t(e):"visualVariables"in e?e.visualVariables:null;return s&&s.forEach((function(e){return r.push(f(e,"number"))})),n.unique(r.filter(Boolean),(function(e,t){return"field"===e.type&&"field"===t.type?e.field===t.field:"normalized-field"===e.type&&"normalized-field"===t.type?e.field===t.field&&e.normalizationField===t.normalizationField:"expression"===e.type&&"expression"===t.type&&e.expression===t.expression}))}}.apply(null,n))||(e.exports=i)},844:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(40),r(4),r(2),r(17)],void 0===(i=function(e,t,r,n,i,a,o,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.color=null,r.label=null,r.value=null,r}var a;return r(t,e),a=t,t.prototype.writeValue=function(e,t,r){t[r]=null==e?0:e},t.prototype.clone=function(){return new a({color:this.color&&this.color.clone(),label:this.label,value:this.value})},n([o.property({type:i,json:{type:[s.Integer],write:!0}})],t.prototype,"color",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([o.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"value",void 0),n([o.writer("value")],t.prototype,"writeValue",null),a=n([o.subclass("esri.renderers.visualVariables.support.ColorStop")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},845:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(246)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/^-?(\d+)(\.(\d+))?$/i;function i(e,t){return e-t}function a(e,t){var r,n;return(r=Number(e.toFixed(t)))<e?n=r+1/Math.pow(10,t):(n=r,r-=1/Math.pow(10,t)),[r=Number(r.toFixed(t)),n=Number(n.toFixed(t))]}function o(e,t,r,n,i){var a=l(e,t,r,n),o=null==a.previous||a.previous<=i,s=null==a.next||a.next<=i;return o&&s||a.previous+a.next<=2*i}function s(e){var t=String(e),r=t.match(n);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(t.toLowerCase().indexOf("e")>-1){var i=t.split("e"),a=i[0],o=i[1];if(a&&o){var l=Number(a),u=Number(o),c=u>0;c||(u=Math.abs(u));var p=s(l);return c?(p.integer+=u,u>p.fractional?p.fractional=0:p.fractional-=u):(p.fractional+=u,u>p.integer?p.integer=1:p.integer-=u),p}}return{integer:0,fractional:0}}function l(e,t,r,n){var i,a={previous:null,next:null};if(null!=r){var o=t-r-(i=e-r);a.previous=Math.floor(Math.abs(100*o/i))}null!=n&&(o=n-t-(i=n-e),a.next=Math.floor(Math.abs(100*o/i)));return a}t.numDigits=s,t.percentChange=l,t.round=function(e,t){void 0===t&&(t={});var r=e.slice(0),n=t.tolerance,l=void 0===n?2:n,u=t.strictBounds,c=void 0!==u&&u,p=t.indexes,h=void 0===p?r.map((function(e,t){return t})):p;h.sort(i);for(var d=0;d<h.length;d++){var f=h[d],y=r[f],m=0===f?null:r[f-1],v=f===r.length-1?null:r[f+1],g=s(y).fractional;if(g){for(var x=0,b=!1,S=void 0;x<=g&&!b;){var _=a(y,x);b=o(y,S=c&&0===d?_[1]:_[0],m,v,l),x++}b&&(r[f]=S)}}return r};var u={maximumFractionDigits:20};t.format=function(e){return r.formatNumber(e,u)}}.apply(null,n))||(e.exports=i)},859:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(2),r(17),r(251),r(250)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u){var c=new i.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(e){function t(t){var r=e.call(this,t)||this;return r.alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r}var i;return r(t,e),i=t,t.prototype.readDescription=function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(e){}return r?r.value:null},t.prototype.readValueType=function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(e){}return r?c.fromJSON(r.fieldValueType):null},t.prototype.clone=function(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})},n([o.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),n([o.property({type:[String,Number],json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),n([o.property()],t.prototype,"description",void 0),n([o.reader("description")],t.prototype,"readDescription",null),n([o.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],t.prototype,"domain",void 0),n([o.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),n([o.property({type:s.Integer,json:{write:!0}})],t.prototype,"length",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([o.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),n([o.enumeration.serializable()(u.kebabDict)],t.prototype,"type",void 0),n([o.property()],t.prototype,"valueType",void 0),n([o.reader("valueType",["description"])],t.prototype,"readValueType",null),i=n([o.subclass("esri.layers.support.Field")],t)}(o.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},861:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(32),r(18),r(4),r(3),r(2)],void 0===(i=function(e,t,r,n,i,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=new a.default({upperLeft:"upper-left",lowerLeft:"lower-left"}),c=function(e){function t(t){var r=e.call(this,t)||this;return r.extent=null,r.mode="view",r.originPosition="upper-left",r.tolerance=1,r}var a;return r(t,e),a=t,t.prototype.clone=function(){return new a(s.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))},n([l.property({type:i.Extent,json:{write:!0}})],t.prototype,"extent",void 0),n([l.property({type:["view","edit"],json:{write:!0}})],t.prototype,"mode",void 0),n([l.property({type:String,json:{read:u.read,write:u.write}})],t.prototype,"originPosition",void 0),n([l.property({type:Number,json:{write:!0}})],t.prototype,"tolerance",void 0),a=n([l.subclass("esri.tasks.support.QuantizationParameters")],t)}(l.declared(o.JSONSupport));t.default=c}.apply(null,n))||(e.exports=i)},897:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.isSizeVariable=function(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass},t.isValidNumber=function(e){return null!=e&&!isNaN(e)&&isFinite(e)},t.getInputValueType=r,t.getTransformationType=function(e,t){var n=t||r(e),i=e.valueUnit||"unknown";return"unknown"===n?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}}.apply(null,n))||(e.exports=i)},899:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(32),r(32),r(142),r(100),r(18),r(4),r(3),r(2),r(17),r(36),r(143),r(861),r(904)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f,y,m){var v=new l.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g=new l.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cacheHint=!1,r.datumTransformation=null,r.distance=void 0,r.gdbVersion=null,r.geometry=null,r.geometryPrecision=void 0,r.groupByFieldsForStatistics=null,r.having=null,r.historicMoment=null,r.maxAllowableOffset=void 0,r.maxRecordCountFactor=1,r.multipatchOption=null,r.num=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.outStatistics=null,r.parameterValues=null,r.pixelSize=null,r.quantizationParameters=null,r.rangeValues=null,r.relationParameter=null,r.resultType=null,r.returnCentroid=!1,r.returnDistinctValues=!1,r.returnExceededLimitFeatures=!0,r.returnGeometry=!1,r.returnQueryGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.source=null,r.spatialRelationship="intersects",r.start=void 0,r.sqlFormat=null,r.text=null,r.timeExtent=null,r.units=null,r.where=null,r}var l;return r(t,e),l=t,t.from=function(e){return h.ensureClass(l,e)},t.prototype.castDatumTransformation=function(e){return"number"==typeof e||"object"==typeof e?e:null},t.prototype.writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.writeParameterValues=function(e,t){if(e){var r={};for(var n in e){var i=e[n];Array.isArray(i)?r[n]=i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}},t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"},t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.clone=function(){return new l(c.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))},t.MAX_MAX_RECORD_COUNT_FACTOR=5,n([p.property({type:Boolean,json:{write:!0,default:!1}})],t.prototype,"cacheHint",void 0),n([p.property({json:{write:!0}})],t.prototype,"datumTransformation",void 0),n([p.cast("datumTransformation")],t.prototype,"castDatumTransformation",null),n([p.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),n([p.property({types:a.geometryTypes,json:{read:d.fromJSON,write:!0}})],t.prototype,"geometry",void 0),n([p.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"groupByFieldsForStatistics",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"having",void 0),n([p.property({type:Date})],t.prototype,"historicMoment",void 0),n([p.writer("historicMoment")],t.prototype,"writeHistoricMoment",null),n([p.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),n([p.property({type:Number,cast:function(e){return e<1?1:e>l.MAX_MAX_RECORD_COUNT_FACTOR?l.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],t.prototype,"maxRecordCountFactor",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"multipatchOption",void 0),n([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),n([p.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"orderByFields",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),n([p.property({type:i.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),n([p.property({type:[m],json:{write:!0}})],t.prototype,"outStatistics",void 0),n([p.property({json:{write:!0}})],t.prototype,"parameterValues",void 0),n([p.writer("parameterValues")],t.prototype,"writeParameterValues",null),n([p.property({types:o.symbolTypes,json:{read:f.read,write:!0}})],t.prototype,"pixelSize",void 0),n([p.property({type:y.default,json:{write:!0}})],t.prototype,"quantizationParameters",void 0),n([p.property({type:[Object],json:{write:!0}})],t.prototype,"rangeValues",void 0),n([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],t.prototype,"relationParameter",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"resultType",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnCentroid",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnDistinctValues",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:!e}}}}})],t.prototype,"returnExceededLimitFeatures",void 0),n([p.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnQueryGeometry",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnM",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnZ",void 0),n([p.property({json:{write:!0}})],t.prototype,"source",void 0),n([p.property({type:String,json:{read:{source:"spatialRel",reader:v.read},write:{target:"spatialRel",writer:v.write}}})],t.prototype,"spatialRelationship",void 0),n([p.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),n([p.writer("start"),p.writer("num")],t.prototype,"writeStart",null),n([p.property({type:String,json:{write:!0}})],t.prototype,"sqlFormat",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([p.property({type:s,json:{write:!0}})],t.prototype,"timeExtent",void 0),n([p.property({type:String,json:{read:g.read,write:{writer:g.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),n([p.property({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],t.prototype,"where",void 0),n([p.writer("where")],t.prototype,"writeWhere",null),l=n([p.subclass("esri.tasks.support.Query")],t)}(p.declared(u.JSONSupport))}.apply(null,n))||(e.exports=i)},901:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(11),r(45),r(9),r(5),r(16),r(6),r(146),r(148),r(28),r(38),r(31),r(1010),r(1011)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f,y){Object.defineProperty(t,"__esModule",{value:!0});var m=o.getLogger("esri.geometry.support.normalizeUtils"),v={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new c({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator}),minus180Line:new c({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:p.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WGS84})}};function g(e){return"polygon"===e.type}function x(e){return g(e)?e.rings:e.paths}function b(e,t){return Math.ceil((e-t)/(2*t))}function S(e,t){for(var r=0,n=x(e);r<n.length;r++)for(var i=0,a=n[r];i<a.length;i++)a[i][0]+=t;return e}function _(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){for(var a=e[i],o=null,s=0;s<a.length;s++)o=a[s],t.push(o),0===s?n=r=o[0]:(r=Math.min(r,o[0]),n=Math.max(n,o[0]));o&&t.push([(r+n)/2,0])}return t}function w(e,t){if(!(e instanceof c||e instanceof u)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(r),new a(r)}for(var n=[],i=0,o=x(e);i<o.length;i++){var s=o[i],l=[];n.push(l),l.push([s[0][0],s[0][1]]);for(var p=0;p<s.length-1;p++){var h=s[p][0],d=s[p][1],f=s[p+1][0],y=s[p+1][1],v=Math.sqrt((f-h)*(f-h)+(y-d)*(y-d)),b=(y-d)/v,S=(f-h)/v,_=v/t;if(_>1){for(var w=1;w<=_-1;w++){var T=w*t,P=S*T+h,C=b*T+d;l.push([P,C])}var M=(v+Math.floor(_-1)*t)/2,N=S*M+h,L=b*M+d;l.push([N,L])}l.push([f,y])}}return g(e)?new u({rings:n,spatialReference:e.spatialReference}):new c({paths:n,spatialReference:e.spatialReference})}function T(e,t,r){if(t){var n=w(e,1e6);e=d.webMercatorToGeographic(n,!0)}return r&&(e=S(e,r)),e}function P(e,t,r){var n;if(Array.isArray(e))if((n=e[0])>t){var i=b(n,t);e[0]=n+i*(-2*t)}else n<r&&(i=b(n,r),e[0]=n+i*(-2*r));else(n=e.x)>t?(i=b(n,t),e=e.clone().offset(i*(-2*t),0)):n<r&&(i=b(n,r),e=e.clone().offset(i*(-2*r),0));return e}t.straightLineDensify=w,t.normalizeCentralMeridian=function e(t,a,o){return n(this,void 0,void 0,(function(){var n,p,m,g,_,w,C,M,N,L,R,D,k,F,O,j,V,I,E,A,J,z,B,G,U,q,W,H,X,K,Y,Q,Z,$,ee,te,re;return r(this,(function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],a)];for(n=a?a.url:i.geometryServiceUrl,L=0,R=[],D=[],k=0,F=t;k<F.length;k++)O=F[k],s.isNone(O)?D.push(O):(p||(p=O.spatialReference,m=h.getInfo(p),g=p.isWebMercator,_=v[C=g?102100:4326].maxX,w=v[C].minX,M=v[C].plus180Line,N=v[C].minus180Line),m?"mesh"===O.type?D.push(O):"point"===O.type?D.push(P(O.clone(),_,w)):"multipoint"===O.type?((j=O.clone()).points=j.points.map((function(e){return P(e,_,w)})),D.push(j)):"extent"===O.type?(I=O.clone(),V=I._normalize(!1,!1,m),D.push(V.rings?new u(V):V)):O.extent?(I=O.extent,E=b(I.xmin,w),J=0==(A=E*(2*_))?O.clone():S(O.clone(),A),I.offset(A,0),I.intersects(M)&&I.xmax!==_?(L=I.xmax>L?I.xmax:L,J=T(J,g),R.push(J),D.push("cut")):I.intersects(N)&&I.xmin!==w?(L=I.xmax*(2*_)>L?I.xmax*(2*_):L,J=T(J,g,360),R.push(J),D.push("cut")):D.push(J)):D.push(O.clone()):D.push(O));for(z=b(L,_),B=-90,G=z,U=new c;z>0;)q=360*z-180,U.addPath([[q,B],[q,-1*B]]),B*=-1,z--;return R.length>0&&G>0?[4,f.cut(n,R,U,o)]:[3,3];case 1:for(W=r.sent(),H=function(e,t){for(var r=-1,n=function(n){for(var i=t.cutIndexes[n],a=t.geometries[n],o=x(a),s=function(e){var t=o[e];t.some((function(r){if(r[0]<180)return!0;for(var n=0,i=0;i<t.length;i++){var o=t[i][0];n=o>n?o:n}for(var s=-360*b(n=Number(n.toFixed(9)),180),l=0;l<t.length;l++){var u=a.getPoint(e,l);a.setPoint(e,l,u.clone().offset(s,0))}return!0}))},l=0;l<o.length;l++)s(l);if(i===r){if("polygon"===e[0].type)for(var u=0,c=x(a);u<c.length;u++){var p=c[u];e[i]=e[i].addRing(p)}else if(function(e){return"polyline"===e[0].type}(e))for(var h=0,d=x(a);h<d.length;h++){var f=d[h];e[i]=e[i].addPath(f)}}else r=i,e[i]=a},i=0;i<t.cutIndexes.length;i++)n(i);return e}(R,W),X=[],K=[],ee=0;ee<D.length;ee++)"cut"!==(te=D[ee])?K.push(te):(re=H.shift(),Y=t[ee],s.isSome(Y)&&"polygon"===Y.type&&Y.rings&&Y.rings.length>1&&re.rings.length>=Y.rings.length?(X.push(re),K.push("simplify")):K.push(g?d.geographicToWebMercator(re):re));return X.length?[4,y.simplify(n,X,o)]:[2,K];case 2:for(Q=r.sent(),Z=[],ee=0;ee<K.length;ee++)"simplify"!==(te=K[ee])?Z.push(te):Z.push(g?d.geographicToWebMercator(Q.shift()):Q.shift());return[2,Z];case 3:for($=[],ee=0;ee<D.length;ee++)"cut"!==(te=D[ee])?$.push(te):(re=R.shift(),$.push(!0===g?d.geographicToWebMercator(re):re));return[2,l.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&h.getInfo(e.spatialReference);if(!n)return r;var i,a=n.valid,o=a[0],s=a[1],l=2*s,u=r.width,c=r.xmin,p=r.xmax;if(c=(t=[p,c])[0],p=t[1],"extent"===e.type||0===u||u<=s||u>l||c<o||p>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;i=_(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;i=_(e.paths);break;case"multipoint":i=e.points}for(var d=r.clone(),f=0;f<i.length;f++){var y=i[f][0];y<0?(y+=s,p=Math.max(y,p)):(y-=s,c=Math.min(y,c))}return d.xmin=c,d.xmax=p,d.width<u?(d.xmin-=s,d.xmax-=s,d):r},t.normalizeMapX=function(e,t){var r=h.getInfo(t);if(r){var n=r.valid,i=n[0],a=n[1],o=a-i;if(e<i)for(;e<i;)e+=o;if(e>a)for(;e>a;)e-=o}return e}}.apply(null,n))||(e.exports=i)},904:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(18),r(4),r(3),r(2)],void 0===(i=function(e,t,r,n,i,a,o,s){var l=new i.default({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});return function(e){function t(t){var r=e.call(this,t)||this;return r.maxPointCount=void 0,r.maxRecordCount=void 0,r.maxVertexCount=void 0,r.onStatisticField=null,r.outStatisticFieldName=null,r.statisticType=null,r.statisticParameters=null,r}var i;return r(t,e),i=t,t.prototype.writeStatisticParameters=function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=o.clone(e))},t.prototype.clone=function(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:o.clone(this.statisticParameters)})},n([s.property({type:Number,json:{write:!0}})],t.prototype,"maxPointCount",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"maxRecordCount",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"maxVertexCount",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"onStatisticField",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"outStatisticFieldName",void 0),n([s.property({type:String,json:{read:{source:"statisticType",reader:l.read},write:{target:"statisticType",writer:l.write}}})],t.prototype,"statisticType",void 0),n([s.property({type:Object})],t.prototype,"statisticParameters",void 0),n([s.writer("statisticParameters")],t.prototype,"writeStatisticParameters",null),i=n([s.subclass("esri.tasks.support.StatisticDefinition")],t)}(s.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},915:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(32),r(242),r(18),r(4),r(16),r(2),r(28),r(36),r(859)],void 0===(i=function(e,t,r,n,i,a,o,s,l,u,c,p,h){var d=new o.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),f=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return n(t,e),t.prototype.readFeatures=function(e,t){for(var r=c.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],s=a.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;l.isSome(s.geometry)&&!u&&(s.geometry.spatialReference=r),n.push(s)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)d.write(e,t,r,n);else{var i=this.features;if(i)for(var a=0,o=i;a<o.length;a++){var s=o[a];if(s&&l.isSome(s.geometry))return void d.write(s.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var n=0,i=r;n<i.length;n++){var a=i[n];a&&l.isSome(a.geometry)&&a.geometry.spatialReference&&(t.spatialReference=a.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,a=i[0],o=i[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((o-e)/n)})),c=0,p=s.length;c<p;c++)u(l.expect(s[c].geometry))||(s.splice(c,1),c--,p--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;for(var n=r.translate,i=n[0],a=n[1],o=r.scale,s=o[0],u=o[1],c=this._getHydrationFunction(e,(function(e){return e*s+i}),(function(e){return a-e*u})),p=0,h=t;p<h.length;p++){var d=h[p].geometry;l.isSome(d)&&c(d)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,a=[],o=0,s=e.length;o<s;o++){var l=e[o];if(o>0){var u=t(l[0]),c=r(l[1]);u===n&&c===i||(a.push([u-n,c-i]),n=u,i=c)}else n=t(l[0]),i=r(l[1]),a.push([n,i])}return a.length>0?a:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=p.isPolygon(e)?e.rings:e.paths,a=[],o=0,s=i.length;o<s;o++){var l=i[o],u=n._quantizePoints(l,t,r);u&&a.push(u)}return a.length>0?(p.isPolygon(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,a=p.isPolygon(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var l=a[o],u=0,c=l.length;u<c;u++){var h=l[u];u>0?(n+=h[0],i+=h[1]):(n=h[0],i=h[1]),h[0]=t(n),h[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,a=e.points,o=0,s=a.length;o<s;o++){var l=a[o];o>0?(n+=l[0],i+=l[1]):(n=l[0],i=l[1]),l[0]=t(n),l[1]=r(i)}}:void 0},r([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([u.property({type:[a],json:{write:!0}})],t.prototype,"features",void 0),r([u.reader("features")],t.prototype,"readFeatures",null),r([u.property({type:[h],json:{write:!0}})],t.prototype,"fields",void 0),r([u.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],t.prototype,"geometryType",void 0),r([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([u.property({types:i.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([u.property({type:c,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([u.property({json:{write:!0}})],t.prototype,"transform",void 0),r([u.subclass("esri.tasks.support.FeatureSet")],t)}(u.declared(s.JSONSupport));return f.prototype.toJSON.isDefaultToJSON=!0,f||(f={}),f}.apply(null,n))||(e.exports=i)}}]);